window.nhn=window.nhn||{};nhn.husky=nhn.husky||{};nhn.husky.SE2M_Configuration=nhn.husky.SE2M_Configuration||{};nhn.husky.SE2M_Configuration.Editor={sJsBaseURL:"./js_src",sImageBaseURL:"./images/"};nhn.husky.SE2M_Configuration.LazyLoad={sJsBaseURI:"js_lazyload"};nhn.husky.SE2M_Configuration.SE2B_CSSLoader={sCSSBaseURI:"css"};nhn.husky.SE2M_Configuration.SE_EditingAreaManager={sCSSBaseURI:"css",sBlankPageURL:"wysiwyg.blank.html",sBlankPageURL_EmulateIE7:"wysiwyg.blank.ie8.html",aAddtionalEmulateIE7:[]};
nhn.husky.SE2M_Configuration.LinkageDomain={sCommonAPI:"http://api.se2.naver.com",sCommonStatic:"http://static.se2.naver.com",sCommonImage:"http://images.se2.naver.com"};nhn.husky.SE2M_Configuration.SE2M_Accessibility={sBeforeElementId:"",sNextElementId:""};window.nhn=window.nhn||{};nhn.husky=nhn.husky||{};nhn.husky.SE2M_Configuration=nhn.husky.SE2M_Configuration||{};nhn.husky.SE2M_Configuration.Quote={sImageBaseURL:"http://static.se2.naver.com/static/img"};
nhn.husky.SE2M_Configuration.CustomObject={sVersion:1,sClassName:"__se_object",sValueName:"jsonvalue",sTagIdPrefix:"se_object_",sTailComment:"\x3c!--__se_object_end --\x3e",sBlankTemplateURL:nhn.husky.SE2M_Configuration.LinkageDomain.sCommonStatic+"/static/db_attach/iframe_template_for_se1_obj.html",sAttributeOfEmpty:'s_isempty="true"',sAttributeOfOldDB:'s_olddb="true"',sBlock:'<div class="_block" style="position:absolute;z-index:10000;background-color:#fff;"></div>',sBlockTemplate:"<div[\\s\\S]*?class=['\"]?_block['\"]?[\\s\\S]*?</div>",
sHighlight:'<div class="_highlight" style="position:absolute;width:58px;height:16px;line-height:0;z-index:9999"><img src="'+nhn.husky.SE2M_Configuration.LinkageDomain.sCommonStatic+'/static/img/pencil2.png" alt="" width="58" height="16" style="vertical-align:top"></div>',sHighlightTemplate:"<div[\\s\\S]*?class=['\"]?_highlight['\"]?[\\s\\S]*?</div>",sHtmlTemplateStartTag:"\x3c!-- se_object_template_start --\x3e",sHtmlTemplateEndTag:"\x3c!-- se_object_template_end --\x3e",sHtmlFilterTag:"{=sType}_{=sSubType}_{=nSeq}",
sTplHtmlFilterTag:"\x3c!--{=sType}_{=sSubType}_(\\d+)--\x3e",sImgComServerPath:nhn.husky.SE2M_Configuration.LinkageDomain.sCommonStatic+"/static/img/reviewitem",nMaxWidth:548};
nhn.husky.SE2M_Configuration.SE2M_ReEditAction={bUsed:!0,nSecDisplayDulationReEditMsg:3,aReEditGuideMsg:["\uc774\ubbf8\uc9c0 \ud30c\uc77c\uc740 1\ud68c \ud074\ub9ad \uc2dc \ud06c\uae30 \uc870\uc808, \ub354\ube14\ud074\ub9ad \uc2dc \uc7ac\ud3b8\uc9d1\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.","\ucca8\ubd80\ud55c \ud30c\uc77c\uc744 \ub354\ube14\ud074\ub9ad \uc2dc \uc7ac\ud3b8\uc9d1\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.","\ucca8\ubd80\ud55c \uae00\uc591\uc2dd \ud14c\uc774\ube14\uc744 \ub4dc\ub798\uadf8\uc2dc \ud14c\uc774\ube14 \uc7ac\ud3b8\uc9d1\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.",
"\ucca8\ubd80\ud55c \ud45c\ub97c \ub4dc\ub798\uadf8 \uc2dc \ud45c \uc7ac\ud3b8\uc9d1\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4."]};nhn.husky.SE2M_Configuration.SE2M_ColorPalette={bUseRecentColor:!1};nhn.husky.SE2M_Configuration.QuickEditor={common:{bUseConfig:!1}};
function createSEditor2(a,b,c){if(window.$Jindo){c=c||jindo.$("smart_editor2");var d=jindo.$$.getSingle("DIV.husky_seditor_editing_area_container",c),e=jindo.$$.getSingle("IFRAME.se2_input_wysiwyg",d),f=a?a:jindo.$$.getSingle("TEXTAREA.blind",d),g=jindo.$$.getSingle("TEXTAREA.se2_input_htmlsrc",d),d=jindo.$$.getSingle("TEXTAREA.se2_input_text",d);b||(b={fOnBeforeUnload:null});b.elAppContainer=c;b.oNavigator=jindo.$Agent().navigator();var h=new nhn.husky.HuskyCore(b);h.registerPlugin(new nhn.husky.CorePlugin(b?
b.fOnAppLoad:null));h.registerPlugin(new nhn.husky.StringConverterManager);a={nMinHeight:60,nMinWidth:parseInt(a.style.minWidth,10)||290,nHeight:a.style.height||a.offsetHeight,nWidth:a.style.width||a.offsetWidth};var j={bUseVerticalResizer:b.bUseVerticalResizer,bUseModeChanger:b.bUseModeChanger};h.registerPlugin(new nhn.husky.SE_EditingAreaManager("WYSIWYG",f,a,b.fOnBeforeUnload,c));h.registerPlugin(new nhn.husky.SE_EditingArea_WYSIWYG(e));h.registerPlugin(new nhn.husky.SE_EditingArea_HTMLSrc(g));
h.registerPlugin(new nhn.husky.SE_EditingArea_TEXT(d));h.registerPlugin(new nhn.husky.SE2M_EditingModeChanger(c,j));h.registerPlugin(new nhn.husky.HuskyRangeManager(e));h.registerPlugin(new nhn.husky.Utils);h.registerPlugin(new nhn.husky.SE2M_UtilPlugin);h.registerPlugin(new nhn.husky.SE_WYSIWYGStyler);h.registerPlugin(new nhn.husky.SE2M_Toolbar(c));h.registerPlugin(new nhn.husky.Hotkey);h.registerPlugin(new nhn.husky.DialogLayerManager);
h.registerPlugin(new nhn.husky.ActiveLayerManager);h.registerPlugin(new nhn.husky.SE_WYSIWYGStyleGetter);h.registerPlugin(new nhn.husky.SE2B_Customize_ToolBar(c));h.registerPlugin(new nhn.husky.SE_WYSIWYGEnterKey("P"));h.registerPlugin(new nhn.husky.SE2M_ColorPalette(c));h.registerPlugin(new nhn.husky.SE2M_FontColor(c));h.registerPlugin(new nhn.husky.SE2M_BGColor(c));h.registerPlugin(new nhn.husky.SE2M_FontNameWithLayerUI(c));h.registerPlugin(new nhn.husky.SE2M_FontSizeWithLayerUI(c));h.registerPlugin(new nhn.husky.SE2M_LineStyler);
h.registerPlugin(new nhn.husky.SE2M_ExecCommand(e));h.registerPlugin(new nhn.husky.SE2M_LineHeightWithLayerUI(c));h.registerPlugin(new nhn.husky.SE2M_Quote(c));h.registerPlugin(new nhn.husky.SE2M_Hyperlink(c));h.registerPlugin(new nhn.husky.SE2M_SCharacter(c));h.registerPlugin(new nhn.husky.SE2M_FindReplacePlugin(c));h.registerPlugin(new nhn.husky.SE2M_TableCreator(c));h.registerPlugin(new nhn.husky.SE2M_TableEditor(c));h.registerPlugin(new nhn.husky.SE2M_TableBlockStyler(c));h.registerPlugin(new nhn.husky.MessageManager(oMessageMap));
h.registerPlugin(new nhn.husky.SE2M_QuickEditor_Common(c));jindo.$Agent().navigator().ie&&h.registerPlugin(new nhn.husky.SE2M_ImgSizeRatioKeeper);h.registerPlugin(new nhn.husky.SE2B_CSSLoader);h.registerPlugin(new nhn.husky.SE_OuterIFrameControl(c,100));h.registerPlugin(new nhn.husky.SE_ToolbarToggler(c,b.bUseToolbar));h.registerPlugin(new nhn.husky.SE2M_Accessibility(c));return h}parent.document.body.innerHTML="\uc9c4\ub3c4 \ud504\ub808\uc784\uc6cd\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.<br>\n<a href='http://dev.naver.com/projects/jindo/download'>http://dev.naver.com/projects/jindo/download</a>\uc5d0\uc11c Jindo 1.5.3 \ubc84\uc804\uc758 jindo.min.js\ub97c \ub2e4\uc6b4\ub85c\ub4dc \ubc1b\uc544 /js \ud3f4\ub354\uc5d0 \ubcf5\uc0ac \ud574 \uc8fc\uc138\uc694.\n(\uc544\uc9c1 Jindo 2 \ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.)"}
var nSE2Version=9656;"undefined"==typeof window.nhn&&(window.nhn={});
nhn.FindReplace=jindo.$Class({sKeyword:"",window:null,document:null,bBrowserSupported:!1,bEOC:!1,$init:function(a){this.sInlineContainer="SPAN|B|U|I|S|STRIKE";this.rxInlineContainer=RegExp("^("+this.sInlineContainer+")$");this.window=a;this.document=this.window.document;if(this.document.domain!=this.document.location.hostname&&(a=jindo.$Agent().navigator(),a.firefox&&3>a.version)){this.bBrowserSupported=!1;this.find=function(){return 3};return}this.bBrowserSupported=!0},find:function(a,b,c,d){var e;
this.window.focus();if(!a)return 2;this.bEOC=!1;if(e=this.findNext(a,b,c,d))return 0;this.bEOC=!0;return(e=this.findNew(a,b,c,d))?0:1},findNew:function(a,b,c,d){this.findReset();return this.findNext(a,b,c,d)},findNext:function(a,b,c,d){var e;b=b||!1;d=d||!1;c=c||!1;if(this.window.find)return this.window.find(a,b,c,!1,d);if(this.document.body.createTextRange)try{var f=0;c&&(f+=1);d&&(f+=2);b&&(f+=4);this.window.focus();this._range=this.document.selection.createRangeCollection().item(0);this._range.collapse(!1);
e=this._range.findText(a,1,f);this._range.select();return e}catch(g){}return!1},findReset:function(){this.window.find?this.window.getSelection().removeAllRanges():this.document.body.createTextRange&&(this._range=this.document.body.createTextRange(),this._range.collapse(!0),this._range.select())},replace:function(a,b,c,d,e){if(!a)return 4;var f=new nhn.HuskyRange(this.window);f.setFromSelection();c=c||!1;var g=f.toString();if(!(c?g==a:g.toLowerCase()==a.toLowerCase()))return this.find(a,c,d,e)+2;"function"==
typeof b?f=b(f):f.pasteText(b);f.select();return this.find(a,c,d,e)},replaceAll:function(a,b,c,d){if(!a)return-1;var e,f=0,g=this.window;if(0!==this.find(a,c,!1,d))return f;var h=new nhn.HuskyRange(this.window);h.setFromSelection();h.collapseToStart();var j=this.window.document.createElement("SPAN");j.innerHTML=unescape("%uFEFF");h.insertNode(j);h.select();var k=h.placeStringBookmark();for(this.bEOC=!1;!this.bEOC;)e=this.replace(a,b,c,!1,d),(0==e||1==e)&&f++;var m=function(){var a=new nhn.HuskyRange(g);
a.setFromSelection();h.moveToBookmark(k);return 1==h.compareBoundaryPoints(nhn.W3CDOMRange.START_TO_END,a)?!1:!0};e=0;for(this.bEOC=!1;!m()&&0==e&&!this.bEOC;)e=this.replace(a,b,c,!1,d),(0==e||1==e)&&f++;h.moveToBookmark(k);h.select();h.removeStringBookmark(k);setTimeout(function(){j.parentNode.removeChild(j)},0);return f},_isBlankTextNode:function(a){return 3==a.nodeType&&""==a.nodeValue?!0:!1},_getNextNode:function(a,b){if(!a||"BODY"==a.tagName)return{elNextNode:null,bDisconnected:!1};if(a.nextSibling){for(a=
a.nextSibling;a.firstChild;)a.tagName&&!this.rxInlineContainer.test(a.tagName)&&(b=!0),a=a.firstChild;return{elNextNode:a,bDisconnected:b}}return this._getNextNode(nhn.DOMFix.parentNode(a),b)},_getNextTextNode:function(a,b){for(var c;!(c=this._getNextNode(a,b),a=c.elNextNode,b=c.bDisconnected,a&&(3!=a.nodeType&&!this.rxInlineContainer.test(a.tagName))&&(b=!0),!a||3==a.nodeType&&!this._isBlankTextNode(a)););return{elNextText:a,bDisconnected:b}},_getFirstTextNode:function(){for(var a=this.document.body.firstChild;a&&
a.firstChild;)a=a.firstChild;if(!a)return null;if(3!=a.nodeType||this._isBlankTextNode(a))a=this._getNextTextNode(a,!1).elNextText;return a},_addToTextMap:function(a,b,c,d){for(var e=b[d].length,f=0,g=a.nodeValue.length;f<g;f++)c[d][e+f]=[a,f];b[d]+=a.nodeValue},_createTextMap:function(){for(var a=[],b=[],c=-1,d=this._getFirstTextNode(),e={elNextText:d,bDisconnected:!0};d;)e.bDisconnected&&(c++,a[c]="",b[c]=[]),this._addToTextMap(e.elNextText,a,b,c),e=this._getNextTextNode(d,!1),d=e.elNextText;return{aTexts:a,
aElTexts:b}},replaceAll_js:function(a,b,c,d){try{var e=this._createTextMap(),f=e.aTexts,g=e.aElTexts,h=0,j=a.length;c=0;for(var k=f.length;c<k;c++)for(var m=f[c],l=m.length-j;0<=l;l--){var n=m.substring(l,l+j);if((!d||!(0<l&&m.charAt(l-1).match(/[a-zA-Z\uac00-\ud7a3]/)))&&n==a){h++;var q=new nhn.HuskyRange(this.window),p,r;l+j<g[c].length?(p=g[c][l+j][0],r=g[c][l+j][1]):(p=g[c][l+j-1][0],r=g[c][l+j-1][1]+1);q.setEnd(p,r,!0,!0);q.setStart(g[c][l][0],g[c][l][1],!0);"function"==typeof b?q=b(q):q.pasteText(b);
l-=j}}return h}catch(s){return h}}});
nhn.husky.SE2M_TableTemplate=[{},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#c7c7c7"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",color:"#666666"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#c7c7c7"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",color:"#666666"},{padding:"3px 4px 2px",backgroundColor:"#f3f3f3",color:"#666666"}]},{htTableProperty:{border:"0",cellPadding:"0",
cellSpacing:"0"},htTableStyle:{backgroundColor:"#ffffff",borderTop:"1px solid #c7c7c7"},aRowStyle:[{padding:"3px 4px 2px",borderBottom:"1px solid #c7c7c7",backgroundColor:"#ffffff",color:"#666666"},{padding:"3px 4px 2px",borderBottom:"1px solid #c7c7c7",backgroundColor:"#f3f3f3",color:"#666666"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"0"},htTableStyle:{border:"1px solid #c7c7c7"},ht1stRowStyle:{padding:"3px 4px 2px",backgroundColor:"#f3f3f3",color:"#666666",borderRight:"1px solid #e7e7e7",
textAlign:"left",fontWeight:"normal"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",borderTop:"1px solid #e7e7e7",borderRight:"1px solid #e7e7e7",color:"#666666"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#c7c7c7"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#f8f8f8",color:"#666666"},{padding:"3px 4px 2px",backgroundColor:"#ebebeb",color:"#666666"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"0"},ht1stRowStyle:{padding:"3px 4px 2px",
borderTop:"1px solid #000000",borderBottom:"1px solid #000000",backgroundColor:"#333333",color:"#ffffff",textAlign:"left",fontWeight:"normal"},aRowStyle:[{padding:"3px 4px 2px",borderBottom:"1px solid #ebebeb",backgroundColor:"#ffffff",color:"#666666"},{padding:"3px 4px 2px",borderBottom:"1px solid #ebebeb",backgroundColor:"#f8f8f8",color:"#666666"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#c7c7c7"},ht1stRowStyle:{padding:"3px 4px 2px",backgroundColor:"#333333",
color:"#ffffff",textAlign:"left",fontWeight:"normal"},ht1stColumnStyle:{padding:"3px 4px 2px",backgroundColor:"#f8f8f8",color:"#666666",textAlign:"left",fontWeight:"normal"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",color:"#666666"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#c7c7c7"},ht1stColumnStyle:{padding:"3px 4px 2px",backgroundColor:"#333333",color:"#ffffff",textAlign:"left",fontWeight:"normal"},aRowStyle:[{padding:"3px 4px 2px",
backgroundColor:"#ffffff",color:"#666666"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#a6bcd1"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",color:"#3d76ab"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#a6bcd1"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",color:"#3d76ab"},{padding:"3px 4px 2px",backgroundColor:"#f6f8fa",color:"#3d76ab"}]},{htTableProperty:{border:"0",
cellPadding:"0",cellSpacing:"0"},htTableStyle:{backgroundColor:"#ffffff",borderTop:"1px solid #a6bcd1"},aRowStyle:[{padding:"3px 4px 2px",borderBottom:"1px solid #a6bcd1",backgroundColor:"#ffffff",color:"#3d76ab"},{padding:"3px 4px 2px",borderBottom:"1px solid #a6bcd1",backgroundColor:"#f6f8fa",color:"#3d76ab"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"0"},htTableStyle:{border:"1px solid #a6bcd1"},ht1stRowStyle:{padding:"3px 4px 2px",backgroundColor:"#f6f8fa",color:"#3d76ab",borderRight:"1px solid #e1eef7",
textAlign:"left",fontWeight:"normal"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",borderTop:"1px solid #e1eef7",borderRight:"1px solid #e1eef7",color:"#3d76ab"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#a6bcd1"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#fafbfc",color:"#3d76ab"},{padding:"3px 4px 2px",backgroundColor:"#e6ecf2",color:"#3d76ab"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"0"},ht1stRowStyle:{padding:"3px 4px 2px",
borderTop:"1px solid #466997",borderBottom:"1px solid #466997",backgroundColor:"#6284ab",color:"#ffffff",textAlign:"left",fontWeight:"normal"},aRowStyle:[{padding:"3px 4px 2px",borderBottom:"1px solid #ebebeb",backgroundColor:"#ffffff",color:"#3d76ab"},{padding:"3px 4px 2px",borderBottom:"1px solid #ebebeb",backgroundColor:"#f6f8fa",color:"#3d76ab"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#a6bcd1"},ht1stRowStyle:{padding:"3px 4px 2px",backgroundColor:"#6284ab",
color:"#ffffff",textAlign:"left",fontWeight:"normal"},ht1stColumnStyle:{padding:"3px 4px 2px",backgroundColor:"#f6f8fa",color:"#3d76ab",textAlign:"left",fontWeight:"normal"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",color:"#3d76ab"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#a6bcd1"},ht1stColumnStyle:{padding:"3px 4px 2px",backgroundColor:"#6284ab",color:"#ffffff",textAlign:"left",fontWeight:"normal"},aRowStyle:[{padding:"3px 4px 2px",
backgroundColor:"#ffffff",color:"#3d76ab"}]}];"undefined"==typeof window.nhn&&(window.nhn={});nhn.husky||(nhn.husky={});nhn.husky.oMockDebugger={log_MessageStart:function(){},log_MessageEnd:function(){},log_MessageStepStart:function(){},log_MessageStepEnd:function(){},log_CallHandlerStart:function(){},log_CallHandlerEnd:function(){},handleException:function(){},setApp:function(){}};
nhn.husky.HuskyCore=jindo.$Class({name:"HuskyCore",aCallerStack:null,$init:function(a){this.htOptions=a||{};this.htOptions.oDebugger&&(nhn.husky.HuskyCore._cores||(nhn.husky.HuskyCore._cores=[],nhn.husky.HuskyCore.getCore=function(){return nhn.husky.HuskyCore._cores}),nhn.husky.HuskyCore._cores.push(this),this.htOptions.oDebugger.setApp(this));this.messageQueue=[];this.oMessageMap={};this.oDisabledMessage={};this.aPlugins=[];this.appStatus=nhn.husky.APP_STATUS.NOT_READY;this.aCallerStack=[];this._fnWaitForPluginReady=
jindo.$Fn(this._waitForPluginReady,this).bind();this.registerPlugin(this)},setDebugger:function(a){this.htOptions.oDebugger=a;a.setApp(this)},exec:function(a,b,c){if(this.appStatus==nhn.husky.APP_STATUS.NOT_READY)return this.messageQueue[this.messageQueue.length]={msg:a,args:b,event:c},!0;this.exec=this._exec;this.exec(a,b,c)},delayedExec:function(a,b,c,d){a=jindo.$Fn(this.exec,this).bind(a,b,d);setTimeout(a,c)},_exec:function(a,b,c){return(this._exec=this.htOptions.oDebugger?this._execWithDebugger:
this._execWithoutDebugger).call(this,a,b,c)},_execWithDebugger:function(a,b,c){this.htOptions.oDebugger.log_MessageStart(a,b);c=this._doExec(a,b,c);this.htOptions.oDebugger.log_MessageEnd(a,b);return c},_execWithoutDebugger:function(a,b,c){return this._doExec(a,b,c)},_doExec:function(a,b,c){var d=!1;if(!this.oDisabledMessage[a]){var e=[];if(b&&b.length)for(var d=b.length,f=0;f<d;f++)e[f]=b[f];c&&(e[e.length]=c);(d=this._execMsgStep("BEFORE",a,e))&&(d=this._execMsgStep("ON",a,e));d&&(d=this._execMsgStep("AFTER",
a,e))}return d},registerPlugin:function(a){if(!a)throw"An error occured in registerPlugin(): invalid plug-in";a.nIdx=this.aPlugins.length;a.oApp=this;this.aPlugins[a.nIdx]=a;a.status!=nhn.husky.PLUGIN_STATUS.NOT_READY&&(a.status=nhn.husky.PLUGIN_STATUS.READY);if(this.appStatus!=nhn.husky.APP_STATUS.NOT_READY)for(var b in a)b.match(/^\$(LOCAL|BEFORE|ON|AFTER)_/)&&this.addToMessageMap(b,a);this.exec("MSG_PLUGIN_REGISTERED",[a]);return a.nIdx},disableMessage:function(a,b){this.oDisabledMessage[a]=b},
registerBrowserEvent:function(a,b,c,d,e){d=d||[];c=e?jindo.$Fn(this.delayedExec,this).bind(c,d,e):jindo.$Fn(this.exec,this).bind(c,d);return jindo.$Fn(c,this).attach(a,b)},run:function(a){this.htRunOptions=a||{};this._changeAppStatus(nhn.husky.APP_STATUS.WAITING_FOR_PLUGINS_READY);a=this.messageQueue.length;for(var b=0;b<a;b++){var c=this.messageQueue[b];this.exec(c.msg,c.args,c.event)}this._fnWaitForPluginReady()},acceptLocalBeforeFirstAgain:function(a,b){a._husky_bRun=!b},createMessageMap:function(a){this.oMessageMap[a]=
[];for(var b=this.aPlugins.length,c=0;c<b;c++)this._doAddToMessageMap(a,this.aPlugins[c])},addToMessageMap:function(a,b){this.oMessageMap[a]&&this._doAddToMessageMap(a,b)},_changeAppStatus:function(a){this.appStatus=a;this.appStatus==nhn.husky.APP_STATUS.READY&&this.exec("MSG_APP_READY")},_execMsgStep:function(a,b,c){return(this._execMsgStep=this.htOptions.oDebugger?this._execMsgStepWithDebugger:this._execMsgStepWithoutDebugger).call(this,a,b,c)},_execMsgStepWithDebugger:function(a,b,c){this.htOptions.oDebugger.log_MessageStepStart(a,
b,c);var d=this._execMsgHandler("$"+a+"_"+b,c);this.htOptions.oDebugger.log_MessageStepEnd(a,b,c);return d},_execMsgStepWithoutDebugger:function(a,b,c){return this._execMsgHandler("$"+a+"_"+b,c)},_execMsgHandler:function(a,b){var c;this.oMessageMap[a]||this.createMessageMap(a);var d=this.oMessageMap[a],e=d.length;if(0===e)return!0;var f=!0;if(a.match(/^\$(BEFORE|ON|AFTER)_MSG_APP_READY$/))for(c=0;c<e;c++){if(!1===this._execHandler(d[c],a,b)){f=!1;break}}else for(c=0;c<e;c++){if(!d[c]._husky_bRun&&
(d[c]._husky_bRun=!0,"function"==typeof d[c].$LOCAL_BEFORE_FIRST&&!1===this._execHandler(d[c],"$LOCAL_BEFORE_FIRST",[a,b])))continue;if(!("function"==typeof d[c].$LOCAL_BEFORE_ALL&&!1===this._execHandler(d[c],"$LOCAL_BEFORE_ALL",[a,b]))&&!1===this._execHandler(d[c],a,b)){f=!1;break}}return f},_execHandler:function(a,b,c){return(this._execHandler=this.htOptions.oDebugger?this._execHandlerWithDebugger:this._execHandlerWithoutDebugger).call(this,a,b,c)},_execHandlerWithDebugger:function(a,b,c){this.htOptions.oDebugger.log_CallHandlerStart(a,
b,c);var d;try{this.aCallerStack.push(a),d=a[b].apply(a,c),this.aCallerStack.pop()}catch(e){this.htOptions.oDebugger.handleException(e),d=!1}this.htOptions.oDebugger.log_CallHandlerEnd(a,b,c);return d},_execHandlerWithoutDebugger:function(a,b,c){this.aCallerStack.push(a);a=a[b].apply(a,c);this.aCallerStack.pop();return a},_doAddToMessageMap:function(a,b){if("function"==typeof b[a]){for(var c=0,d=this.oMessageMap[a].length;c<d;c++)if(this.oMessageMap[a][c]==b)return;this.oMessageMap[a][c]=b}},_waitForPluginReady:function(){for(var a=
!0,b=0;b<this.aPlugins.length;b++)if(this.aPlugins[b].status==nhn.husky.PLUGIN_STATUS.NOT_READY){a=!1;break}a?this._changeAppStatus(nhn.husky.APP_STATUS.READY):setTimeout(this._fnWaitForPluginReady,100)}});nhn.husky.APP_STATUS={NOT_READY:0,WAITING_FOR_PLUGINS_READY:1,READY:2};nhn.husky.PLUGIN_STATUS={NOT_READY:0,READY:1};"undefined"==typeof window.nhn&&(window.nhn={});
nhn.CurrentSelection_IE=function(){this.getCommonAncestorContainer=function(){try{return this._oSelection=this._document.selection,"Control"==this._oSelection.type?this._oSelection.createRange().item(0):this._oSelection.createRangeCollection().item(0).parentElement()}catch(a){return this._document.body}};this.isCollapsed=function(){this._oSelection=this._document.selection;return"None"==this._oSelection.type}};
nhn.CurrentSelection_FF=function(){this.getCommonAncestorContainer=function(){return this._getSelection().commonAncestorContainer};this.isCollapsed=function(){var a=this._window.getSelection();return 1>a.rangeCount?!0:a.getRangeAt(0).collapsed};this._getSelection=function(){try{return this._window.getSelection().getRangeAt(0)}catch(a){return this._document.createRange()}}};
nhn.CurrentSelection=new (jindo.$Class({$init:function(){jindo.$Agent().navigator().ie?nhn.CurrentSelection_IE.apply(this):nhn.CurrentSelection_FF.apply(this)},setWindow:function(a){this._window=a;this._document=a.document}}));
nhn.W3CDOMRange=jindo.$Class({$init:function(a){this.reset(a)},reset:function(a){this._window=a;this._document=this._window.document;this.collapsed=!0;this.endContainer=this.commonAncestorContainer=this._document.body;this.endOffset=0;this.startContainer=this._document.body;this.startOffset=0;this.oBrowserSelection=new nhn.BrowserSelection(this._window);this.selectionLoaded=this.oBrowserSelection.selectionLoaded},cloneContents:function(){var a=this._document.createDocumentFragment(),b=this._document.createDocumentFragment(),
c=this._getNodesInRange();if(1>c.length)return a;c=this._constructClonedTree(c,b);if(b=b.firstChild)for(var b=b.firstChild,d;b;)d=b.nextSibling,a.appendChild(b),b=d;c=this._splitTextEndNodes({oStartContainer:c.oStartContainer,iStartOffset:this.startOffset,oEndContainer:c.oEndContainer,iEndOffset:this.endOffset});c.oStartContainer&&c.oStartContainer.previousSibling&&nhn.DOMFix.parentNode(c.oStartContainer).removeChild(c.oStartContainer.previousSibling);c.oEndContainer&&c.oEndContainer.nextSibling&&
nhn.DOMFix.parentNode(c.oEndContainer).removeChild(c.oEndContainer.nextSibling);return a},_constructClonedTree:function(a,b){var c=null,d=null,e=this.startContainer,f=this.endContainer;this._recurConstructClonedTree=function(a,b,j){if(0>b)return b;var k=b-1,m=a[b].cloneNode(!1);a[b]==e&&(c=m);for(a[b]==f&&(d=m);0<=k&&nhn.DOMFix.parentNode(a[k])==a[b];)k=this._recurConstructClonedTree(a,k,m);j.insertBefore(m,j.firstChild);return k};a[a.length]=nhn.DOMFix.parentNode(a[a.length-1]);this._recurConstructClonedTree(a,
a.length-1,b);return{oStartContainer:c,oEndContainer:d}},cloneRange:function(){return this._copyRange(new nhn.W3CDOMRange(this._window))},_copyRange:function(a){a.collapsed=this.collapsed;a.commonAncestorContainer=this.commonAncestorContainer;a.endContainer=this.endContainer;a.endOffset=this.endOffset;a.startContainer=this.startContainer;a.startOffset=this.startOffset;a._document=this._document;return a},collapse:function(a){a?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):
(this.startContainer=this.endContainer,this.startOffset=this.endOffset);this._updateRangeInfo()},compareBoundaryPoints:function(a,b){switch(a){case nhn.W3CDOMRange.START_TO_START:return this._compareEndPoint(this.startContainer,this.startOffset,b.startContainer,b.startOffset);case nhn.W3CDOMRange.START_TO_END:return this._compareEndPoint(this.endContainer,this.endOffset,b.startContainer,b.startOffset);case nhn.W3CDOMRange.END_TO_END:return this._compareEndPoint(this.endContainer,this.endOffset,b.endContainer,
b.endOffset);case nhn.W3CDOMRange.END_TO_START:return this._compareEndPoint(this.startContainer,this.startOffset,b.endContainer,b.endOffset)}},_findBody:function(a){if(!a)return null;for(;a;){if("BODY"==a.tagName)return a;a=nhn.DOMFix.parentNode(a)}return null},_compareEndPoint:function(a,b,c,d){return this.oBrowserSelection.compareEndPoints(a,b,c,d)},_getCommonAncestorContainer:function(a,b){a=a||this.startContainer;for(var c=b=b||this.endContainer;a;){for(;c;){if(a==c)return a;c=nhn.DOMFix.parentNode(c)}c=
b;a=nhn.DOMFix.parentNode(a)}return this._document.body},deleteContents:function(){if(!this.collapsed){this._splitTextEndNodesOfTheRange();var a=this._getNodesInRange();if(!(1>a.length)){for(var b=a[0].previousSibling;b&&this._isBlankTextNode(b);)b=b.previousSibling;var c,d=-1;b||(c=nhn.DOMFix.parentNode(a[0]),d=0);for(var e=0;e<a.length;e++){var f=a[e];!f.firstChild||this._isAllChildBlankText(f)?(c==f&&(d=this._getPosIdx(c),c=nhn.DOMFix.parentNode(f)),nhn.DOMFix.parentNode(f).removeChild(f)):c==
f&&0===d&&(d=this._getPosIdx(c),c=nhn.DOMFix.parentNode(f))}b?"BODY"==b.tagName?this.setStartBefore(b,!0):this.setStartAfter(b,!0):this.setStart(c,d,!0,!0);this.collapse(!0)}}},extractContents:function(){var a=this.cloneContents();this.deleteContents();return a},getInsertBeforeNodes:function(){var a=null,b;"3"==this.startContainer.nodeType?(b=nhn.DOMFix.parentNode(this.startContainer),a=this.startContainer.nodeValue.length<=this.startOffset?this.startContainer.nextSibling:this.startContainer.splitText(this.startOffset)):
(b=this.startContainer,a=nhn.DOMFix.childNodes(this.startContainer)[this.startOffset]);if(!a||!nhn.DOMFix.parentNode(a))a=null;return{elParent:b,elBefore:a}},insertNode:function(a){var b=this.getInsertBeforeNodes();b.elParent.insertBefore(a,b.elBefore);this.setStartBefore(a)},selectNode:function(a){this.reset(this._window);this.setStartBefore(a);this.setEndAfter(a)},selectNodeContents:function(a){this.reset(this._window);this.setStart(a,0,!0);this.setEnd(a,nhn.DOMFix.childNodes(a).length)},_endsNodeValidation:function(a,
b){if(!a||this._findBody(a)!=this._document.body)throw Error("INVALID_NODE_TYPE_ERR oNode is not part of current document");3==a.nodeType?b>a.nodeValue.length&&(b=a.nodeValue.length):b>nhn.DOMFix.childNodes(a).length&&(b=nhn.DOMFix.childNodes(a).length);return b},setEnd:function(a,b,c,d){c||(b=this._endsNodeValidation(a,b));this.endContainer=a;this.endOffset=b;d||(!this.startContainer||-1!=this._compareEndPoint(this.startContainer,this.startOffset,this.endContainer,this.endOffset)?this.collapse(!1):
this._updateRangeInfo())},setEndAfter:function(a,b){if(!a)throw Error("INVALID_NODE_TYPE_ERR in setEndAfter");"BODY"==a.tagName?this.setEnd(a,nhn.DOMFix.childNodes(a).length,!0,b):this.setEnd(nhn.DOMFix.parentNode(a),this._getPosIdx(a)+1,!0,b)},setEndBefore:function(a,b){if(!a)throw Error("INVALID_NODE_TYPE_ERR in setEndBefore");"BODY"==a.tagName?this.setEnd(a,0,!0,b):this.setEnd(nhn.DOMFix.parentNode(a),this._getPosIdx(a),!0,b)},setStart:function(a,b,c,d){c||(b=this._endsNodeValidation(a,b));this.startContainer=
a;this.startOffset=b;d||(!this.endContainer||-1!=this._compareEndPoint(this.startContainer,this.startOffset,this.endContainer,this.endOffset)?this.collapse(!0):this._updateRangeInfo())},setStartAfter:function(a,b){if(!a)throw Error("INVALID_NODE_TYPE_ERR in setStartAfter");"BODY"==a.tagName?this.setStart(a,nhn.DOMFix.childNodes(a).length,!0,b):this.setStart(nhn.DOMFix.parentNode(a),this._getPosIdx(a)+1,!0,b)},setStartBefore:function(a,b){if(!a)throw Error("INVALID_NODE_TYPE_ERR in setStartBefore");
"BODY"==a.tagName?this.setStart(a,0,!0,b):this.setStart(nhn.DOMFix.parentNode(a),this._getPosIdx(a),!0,b)},surroundContents:function(a){a.appendChild(this.extractContents());this.insertNode(a);this.selectNode(a)},toString:function(){var a=this._document.createElement("DIV");a.appendChild(this.cloneContents());return a.textContent||a.innerText||""},fixCommonAncestorContainer:function(){jindo.$Agent().navigator().ie&&(this.commonAncestorContainer=this._getCommonAncestorContainer())},_isBlankTextNode:function(a){return 3==
a.nodeType&&""==a.nodeValue?!0:!1},_isAllChildBlankText:function(a){for(var b=0,c=a.childNodes.length;b<c;b++)if(!this._isBlankTextNode(a.childNodes[b]))return!1;return!0},_getPosIdx:function(a){var b=0;for(a=a.previousSibling;a;a=a.previousSibling)b++;return b},_updateRangeInfo:function(){this.startContainer?(this.collapsed=this.oBrowserSelection.isCollapsed(this)||this.startContainer===this.endContainer&&this.startOffset===this.endOffset,this.commonAncestorContainer=this.oBrowserSelection.getCommonAncestorContainer(this)):
this.reset(this._window)},_isCollapsed:function(a,b,c,d){var e=!1;if(a==c&&b==d)e=!0;else if(a=this._getActualStartNode(a,b),c=this._getActualEndNode(c,d),a=this._getNextNode(this._getPrevNode(a)),c=this._getPrevNode(this._getNextNode(c)),a&&c&&"BODY"!=c.tagName&&(this._getNextNode(c)==a||c==a&&this._isBlankTextNode(c)))e=!0;return e},_splitTextEndNodesOfTheRange:function(){var a=this._splitTextEndNodes({oStartContainer:this.startContainer,iStartOffset:this.startOffset,oEndContainer:this.endContainer,
iEndOffset:this.endOffset});this.startContainer=a.oStartContainer;this.startOffset=a.iStartOffset;this.endContainer=a.oEndContainer;this.endOffset=a.iEndOffset},_splitTextEndNodes:function(a){a=this._splitStartTextNode(a);return a=this._splitEndTextNode(a)},_splitStartTextNode:function(a){var b=a.oStartContainer,c=a.iStartOffset,d=a.oEndContainer,e=a.iEndOffset;if(!b||3!=b.nodeType||0===c||b.nodeValue.length<=c)return a;a=b.splitText(c);b==d&&(e-=c,d=a);return{oStartContainer:a,iStartOffset:0,oEndContainer:d,
iEndOffset:e}},_splitEndTextNode:function(a){var b=a.oStartContainer,c=a.iStartOffset,d=a.oEndContainer,e=a.iEndOffset;if(!d||3!=d.nodeType||e>=d.nodeValue.length||0===e)return a;d.splitText(e);return{oStartContainer:b,iStartOffset:c,oEndContainer:d,iEndOffset:e}},_getNodesInRange:function(){if(this.collapsed)return[];var a=this._getActualStartNode(this.startContainer,this.startOffset),b=this._getActualEndNode(this.endContainer,this.endOffset);return this._getNodesBetween(a,b)},_getActualStartNode:function(a,
b){var c=a;3==a.nodeType?b>=a.nodeValue.length?(c=this._getNextNode(a),"BODY"==c.tagName&&(c=null)):c=a:b<nhn.DOMFix.childNodes(a).length?c=nhn.DOMFix.childNodes(a)[b]:(c=this._getNextNode(a),"BODY"==c.tagName&&(c=null));return c},_getActualEndNode:function(a,b){var c=a;0===b?(c=this._getPrevNode(a),"BODY"==c.tagName&&(c=null)):c=3==a.nodeType?a:nhn.DOMFix.childNodes(a)[b-1];return c},_getNextNode:function(a){return!a||"BODY"==a.tagName?this._document.body:a.nextSibling?a.nextSibling:this._getNextNode(nhn.DOMFix.parentNode(a))},
_getPrevNode:function(a){return!a||"BODY"==a.tagName?this._document.body:a.previousSibling?a.previousSibling:this._getPrevNode(nhn.DOMFix.parentNode(a))},_getNodesBetween:function(a,b){var c=[];this._nNodesBetweenLen=0;if(!a||!b)return c;try{this._recurGetNextNodesUntil(a,b,c)}catch(d){return[]}return c},_recurGetNextNodesUntil:function(a,b,c){if(!a||!this._recurGetChildNodesUntil(a,b,c))return!1;for(var d=a.nextSibling;!d;){if(!(a=nhn.DOMFix.parentNode(a)))return!1;c[this._nNodesBetweenLen++]=a;
if(a==b)return!1;d=a.nextSibling}return this._recurGetNextNodesUntil(d,b,c)},_recurGetChildNodesUntil:function(a,b,c){if(!a)return!1;var d=!1,e=a;if(e.firstChild)for(e=e.firstChild;e;){if(!this._recurGetChildNodesUntil(e,b,c)){d=!0;break}e=e.nextSibling}c[this._nNodesBetweenLen++]=a;return d||a==b?!1:!0}});nhn.W3CDOMRange.START_TO_START=0;nhn.W3CDOMRange.START_TO_END=1;nhn.W3CDOMRange.END_TO_END=2;nhn.W3CDOMRange.END_TO_START=3;
nhn.HuskyRange=jindo.$Class({setWindow:function(a){this.reset(a||window)},$init:function(a){this.HUSKY_BOOMARK_START_ID_PREFIX="husky_bookmark_start_";this.HUSKY_BOOMARK_END_ID_PREFIX="husky_bookmark_end_";this.sBlockElement="P|DIV|LI|H[1-6]|PRE";this.sBlockContainer="BODY|TABLE|TH|TR|TD|UL|OL|BLOCKQUOTE|FORM";this.rxBlockElement=RegExp("^("+this.sBlockElement+")$");this.rxBlockContainer=RegExp("^("+this.sBlockContainer+")$");this.rxLineBreaker=RegExp("^("+this.sBlockElement+"|"+this.sBlockContainer+
")$");this.setWindow(a)},select:function(){try{this.oBrowserSelection.selectRange(this)}catch(a){}},setFromSelection:function(a){this.setRange(this.oBrowserSelection.getRangeAt(a),!0)},setRange:function(a,b){this.reset(this._window);this.setStart(a.startContainer,a.startOffset,b,!0);this.setEnd(a.endContainer,a.endOffset,b)},setEndNodes:function(a,b){this.reset(this._window);this.setEndAfter(b,!0);this.setStartBefore(a)},splitTextAtBothEnds:function(){this._splitTextEndNodesOfTheRange()},getStartNode:function(){return this.collapsed?
3==this.startContainer.nodeType?0===this.startOffset||this.startContainer.nodeValue.length<=this.startOffset?null:this.startContainer:null:3==this.startContainer.nodeType?this.startOffset>=this.startContainer.nodeValue.length?this._getNextNode(this.startContainer):this.startContainer:this.startOffset>=nhn.DOMFix.childNodes(this.startContainer).length?this._getNextNode(this.startContainer):nhn.DOMFix.childNodes(this.startContainer)[this.startOffset]},getEndNode:function(){return this.collapsed?this.getStartNode():
3==this.endContainer.nodeType?0===this.endOffset?this._getPrevNode(this.endContainer):this.endContainer:0===this.endOffset?this._getPrevNode(this.endContainer):nhn.DOMFix.childNodes(this.endContainer)[this.endOffset-1]},getNodeAroundRange:function(a,b){if(!this.collapsed)return this.getStartNode();if(this.startContainer&&3==this.startContainer.nodeType)return this.startContainer;var c,d,e;d=this.startOffset>=nhn.DOMFix.childNodes(this.startContainer).length?this._getNextNode(this.startContainer):
nhn.DOMFix.childNodes(this.startContainer)[this.startOffset];c=0===this.endOffset?this._getPrevNode(this.endContainer):nhn.DOMFix.childNodes(this.endContainer)[this.endOffset-1];a?(e=c,!e&&!b&&(e=d)):(e=d,!e&&!b&&(e=c));return e},_getXPath:function(a){for(var b="";a&&1==a.nodeType;)b="/"+a.tagName+"["+this._getPosIdx4XPath(a)+"]"+b,a=nhn.DOMFix.parentNode(a);return b},_getPosIdx4XPath:function(a){for(var b=0,c=a.previousSibling;c;c=c.previousSibling)c.tagName==a.tagName&&b++;return b},_evaluateXPath:function(a,
b){a=a.substring(1,a.length-1);for(var c=a.split(/\//),d=b.body,e=2;e<c.length&&d;e++){c[e].match(/([^\[]+)\[(\d+)/i);for(var f=RegExp.$1,g=RegExp.$2,d=nhn.DOMFix.childNodes(d),h=[],j=d.length,k=0,m=0;m<j;m++)d[m].tagName==f&&(h[k++]=d[m]);d=h.length<g?null:h[g]}return d},_evaluateXPathBookmark:function(a){var b=a.nTextNodeIdx,c=a.nOffset;a=this._evaluateXPath(a.sXPath,this._document);if(-1<b&&a){for(var d=nhn.DOMFix.childNodes(a),e=null;(e=d[b])&&3==e.nodeType&&e.nodeValue.length<c;)c-=e.nodeValue.length,
b++;a=nhn.DOMFix.childNodes(a)[b]}a||(a=this._document.body,c=0);return{elContainer:a,nOffset:c}},getXPathBookmark:function(){var a=-1,b={elContainer:this.startContainer,nOffset:this.startOffset},c=this.startContainer;3==c.nodeType&&(b=this._getFixedStartTextNode(),a=this._getPosIdx(b.elContainer),c=nhn.DOMFix.parentNode(c));var d=this._getXPath(c),c={sXPath:d,nTextNodeIdx:a,nOffset:b.nOffset};this.collapsed?a={sXPath:d,nTextNodeIdx:a,nOffset:b.nOffset}:(a=-1,b={elContainer:this.endContainer,nOffset:this.endOffset},
d=this.endContainer,3==d.nodeType&&(b=this._getFixedEndTextNode(),a=this._getPosIdx(b.elContainer),d=nhn.DOMFix.parentNode(d)),a={sXPath:this._getXPath(d),nTextNodeIdx:a,nOffset:b.nOffset});return[c,a]},moveToXPathBookmark:function(a){if(!a)return!1;var b=this._evaluateXPathBookmark(a[0]);a=this._evaluateXPathBookmark(a[1]);if(b.elContainer&&a.elContainer)return this.startContainer=b.elContainer,this.startOffset=b.nOffset,this.endContainer=a.elContainer,this.endOffset=a.nOffset,!0},_getFixedTextContainer:function(a,
b){for(;a&&3==a.nodeType&&a.previousSibling&&3==a.previousSibling.nodeType;)b+=a.previousSibling.nodeValue.length,a=a.previousSibling;return{elContainer:a,nOffset:b}},_getFixedStartTextNode:function(){return this._getFixedTextContainer(this.startContainer,this.startOffset)},_getFixedEndTextNode:function(){return this._getFixedTextContainer(this.endContainer,this.endOffset)},placeStringBookmark:function(){return this.collapsed||jindo.$Agent().navigator().ie||jindo.$Agent().navigator().firefox?this.placeStringBookmark_NonWebkit():
this.placeStringBookmark_Webkit()},placeStringBookmark_NonWebkit:function(){var a=(new Date).getTime(),b=this.cloneRange();b.collapseToEnd();var c=this._document.createElement("SPAN");c.id=this.HUSKY_BOOMARK_END_ID_PREFIX+a;b.insertNode(c);b=this.cloneRange();b.collapseToStart();var d=this._document.createElement("SPAN");d.id=this.HUSKY_BOOMARK_START_ID_PREFIX+a;b.insertNode(d);if(jindo.$Agent().navigator().ie){try{d.innerHTML=unescape("%uFEFF")}catch(e){}try{c.innerHTML=unescape("%uFEFF")}catch(f){}}this.moveToBookmark(a);
return a},placeStringBookmark_Webkit:function(){var a=(new Date).getTime(),b,c;c=this.cloneRange();c.collapseToEnd();b=this._document.createTextNode("");c.insertNode(b);c=b.parentNode;b.previousSibling&&"TD"==b.previousSibling.tagName&&(c=b.previousSibling,b=null);var d=this._document.createElement("SPAN");d.id=this.HUSKY_BOOMARK_END_ID_PREFIX+a;c.insertBefore(d,b);c=this.cloneRange();c.collapseToStart();b=this._document.createTextNode("");c.insertNode(b);c=b.parentNode;b.nextSibling&&"TD"==b.nextSibling.tagName&&
(c=b.nextSibling,b=c.firstChild);d=this._document.createElement("SPAN");d.id=this.HUSKY_BOOMARK_START_ID_PREFIX+a;c.insertBefore(d,b);this.moveToBookmark(a);return a},cloneRange:function(){return this._copyRange(new nhn.HuskyRange(this._window))},moveToBookmark:function(a){return"object"!=typeof a?this.moveToStringBookmark(a):this.moveToXPathBookmark(a)},getStringBookmark:function(a,b){return b?this._document.getElementById(this.HUSKY_BOOMARK_END_ID_PREFIX+a):this._document.getElementById(this.HUSKY_BOOMARK_START_ID_PREFIX+
a)},moveToStringBookmark:function(a,b){var c=this.getStringBookmark(a),d=this.getStringBookmark(a,!0);if(!c||!d)return!1;this.reset(this._window);b?(this.setEndAfter(d),this.setStartBefore(c)):(this.setEndBefore(d),this.setStartAfter(c));return!0},removeStringBookmark:function(a){this._removeAll(this.HUSKY_BOOMARK_START_ID_PREFIX+a);this._removeAll(this.HUSKY_BOOMARK_END_ID_PREFIX+a)},_removeAll:function(a){for(var b;b=this._document.getElementById(a);)nhn.DOMFix.parentNode(b).removeChild(b)},collapseToStart:function(){this.collapse(!0)},
collapseToEnd:function(){this.collapse(!1)},createAndInsertNode:function(a){a=this._document.createElement(a);this.insertNode(a);return a},getNodes:function(a,b){a&&this._splitTextEndNodesOfTheRange();var c=this._getNodesInRange(),d=[];if(!b)return c;for(var e=0;e<c.length;e++)b(c[e])&&(d[d.length]=c[e]);return d},getTextNodes:function(a){return this.getNodes(a,function(a){return 3==a.nodeType&&"\n"!=a.nodeValue&&""!=a.nodeValue?!0:!1})},surroundContentsWithNewNode:function(a){a=this._document.createElement(a);
this.surroundContents(a);return a},isRangeinRange:function(a,b){var c=this.compareBoundaryPoints(this.W3CDOMRange.START_TO_START,a),d=this.compareBoundaryPoints(this.W3CDOMRange.START_TO_END,a),e=this.compareBoundaryPoints(this.W3CDOMRange.ND_TO_START,a),f=this.compareBoundaryPoints(this.W3CDOMRange.END_TO_END,a);return 0>=c&&0<=f?!0:b?1==d||-1==e?!1:!0:!1},isNodeInRange:function(a,b,c){var d=new nhn.HuskyRange(this._window);c&&a.firstChild?(d.setStartBefore(a.firstChild),d.setEndAfter(a.lastChild)):
d.selectNode(a);return this.isRangeInRange(d,b)},pasteText:function(a){this.pasteHTML(a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/"/g,"&quot;"))},pasteHTML:function(a){var b=this._document.createElement("DIV");b.innerHTML=a;if(b.firstChild){a=b.firstChild;var c=b.lastChild,d=this.cloneRange(),e=d.placeStringBookmark();for(this.collapseToStart();b.lastChild;)this.insertNode(b.lastChild);this.setEndNodes(a,c);d.moveToBookmark(e);d.deleteContents();
d.removeStringBookmark(e)}else this.deleteContents()},toString:function(){this.toString=nhn.W3CDOMRange.prototype.toString;return this.toString()},toHTMLString:function(){var a=this._document.createElement("DIV");a.appendChild(this.cloneContents());return a.innerHTML},findAncestorByTagName:function(a){for(var b=this.commonAncestorContainer;b&&b.tagName!=a;)b=nhn.DOMFix.parentNode(b);return b},selectNodeContents:function(a){if(a){var b=a.firstChild?a.firstChild:a;a=a.lastChild?a.lastChild:a;this.reset(this._window);
3==b.nodeType?this.setStart(b,0,!0):this.setStartBefore(b);3==a.nodeType?this.setEnd(a,a.nodeValue.length,!0):this.setEndAfter(a)}},_hasTextDecoration:function(a,b){return!a||!a.style?!1:-1<a.style.textDecoration.indexOf(b)||"underline"===b&&"U"===a.tagName||"line-through"===b&&("S"===a.tagName||"STRIKE"===a.tagName)?!0:!1},_setTextDecoration:function(a,b){jindo.$Agent().navigator().firefox?a.style.textDecoration=a.style.textDecoration?a.style.textDecoration+" "+b:b:"underline"===b?a.innerHTML="<U>"+
a.innerHTML+"</U>":"line-through"===b&&(a.innerHTML="<STRIKE>"+a.innerHTML+"</STRIKE>")},_checkTextDecoration:function(a){if("SPAN"===a.tagName){var b=!1,c=!1,d=null;for(oChildNode=a.firstChild;oChildNode;){1===oChildNode.nodeType&&(b=b||"U"===oChildNode.tagName,c=c||"S"===oChildNode.tagName||"STRIKE"===oChildNode.tagName);if(b&&c)return;oChildNode=oChildNode.nextSibling}for(d=nhn.DOMFix.parentNode(a);d&&"BODY"!==d.tagName&&!(1===d.nodeType&&(!b&&this._hasTextDecoration(d,"underline")&&(b=!0,this._setTextDecoration(a,
"underline")),!c&&this._hasTextDecoration(d,"line-through")&&(c=!0,this._setTextDecoration(a,"line-through")),b&&c));)d=nhn.DOMFix.parentNode(d)}},styleRange:function(a,b,c,d,e){c=this.aStyleParents=this._getStyleParentNodes(c,d);if(!(1>c.length)){for(var f,g=0;g<c.length;g++){for(var h in a)d=h,f=a[d],"string"==typeof f&&(e&&a.color&&this._checkTextDecoration(c[g]),c[g].style[d]=f);if(b)for(h in b)d=h,f=b[d],"string"==typeof f&&("class"==d?jindo.$Element(c[g]).addClass(f):c[g].setAttribute(d,f))}this.reset(this._window);
this.setStartBefore(c[0]);this.setEndAfter(c[c.length-1])}},expandBothEnds:function(){this.expandStart();this.expandEnd()},expandStart:function(){if(!(3==this.startContainer.nodeType&&0!==this.startOffset)){var a=this._getActualStartNode(this.startContainer,this.startOffset),a=this._getPrevNode(a);"BODY"==a.tagName?this.setStartBefore(a):this.setStartAfter(a)}},expandEnd:function(){if(!(3==this.endContainer.nodeType&&this.endOffset<this.endContainer.nodeValue.length)){var a=this._getActualEndNode(this.endContainer,
this.endOffset),a=this._getNextNode(a);"BODY"==a.tagName?this.setEndAfter(a):this.setEndBefore(a)}},_getStyleParentNodes:function(a,b){this._splitTextEndNodesOfTheRange();var c=this.getStartNode(),d=this.getEndNode(),e=this._getNodesInRange(),f=[],g=0,h,j,k=e.length,m=jindo.$A(e).filter(function(a){return!a.firstChild||b&&"LI"==a.tagName});h=this.commonAncestorContainer;if(b)for(;h;){if("LI"==h.tagName){this._isFullyContained(h,m)&&(f[g++]=h);break}h=h.parentNode}for(var l=0;l<k;l++)if(h=e[l])if(b&&
"LI"==h.tagName&&this._isFullyContained(h,m))f[g++]=h;else if(3==h.nodeType&&!(""==h.nodeValue||h.nodeValue.match(/^(\r|\n)+$/))){var n=nhn.DOMFix.parentNode(h);"SPAN"==n.tagName&&this._isFullyContained(n,m,h)?f[g++]=n:(j=this._document.createElement("SPAN"),n.insertBefore(j,h),j.appendChild(h),f[g++]=j,a&&j.setAttribute(a,"true"))}this.setStartBefore(c);this.setEndAfter(d);return f},_isFullyContained:function(a,b,c){var d,e,f=this._getVeryFirstRealChild(a);d=c&&f==c?1:b.indexOf(f);-1!=d&&(f=this._getVeryLastRealChild(a),
e=c&&f==c?1:b.indexOf(f));return-1!=d&&-1!=e},_getVeryFirstChild:function(a){return a.firstChild?this._getVeryFirstChild(a.firstChild):a},_getVeryLastChild:function(a){return a.lastChild?this._getVeryLastChild(a.lastChild):a},_getFirstRealChild:function(a){for(a=a.firstChild;a&&3==a.nodeType&&""==a.nodeValue;)a=a.nextSibling;return a},_getLastRealChild:function(a){for(a=a.lastChild;a&&3==a.nodeType&&""==a.nodeValue;)a=a.previousSibling;return a},_getVeryFirstRealChild:function(a){var b=this._getFirstRealChild(a);
return b?this._getVeryFirstRealChild(b):a},_getVeryLastRealChild:function(a){var b=this._getLastRealChild(a);return b?this._getVeryLastChild(b):a},_getLineStartInfo:function(a){function b(a){a&&!d&&(h.test(a.tagName)?(f=a,d=e,g=!0):(e=a,c(a.previousSibling),d||b(nhn.DOMFix.parentNode(a))))}function c(a){if(a&&!d)if(h.test(a.tagName))f=a,d=e,g=!1;else{if(a.firstChild&&"TABLE"!=a.tagName)for(var b=a.lastChild;b&&!d;)c(b),b=b.previousSibling;else e=a;d||c(a.previousSibling)}}var d=null,e=a,f=a,g=!1,
h=this.rxLineBreaker;h.test(a.tagName)?d=a:b(a);return{oNode:d,oLineBreaker:f,bParentBreak:g}},_getLineEndInfo:function(a){function b(a){a&&!d&&(h.test(a.tagName)?(f=a,d=e,g=!0):(e=a,c(a.nextSibling),d||b(nhn.DOMFix.parentNode(a))))}function c(a){if(a&&!d)if(h.test(a.tagName))f=a,d=e,g=!1;else{if(a.firstChild&&"TABLE"!=a.tagName)for(var b=a.firstChild;b&&!d;)c(b),b=b.nextSibling;else e=a;d||c(a.nextSibling)}}var d=null,e=a,f=a,g=!1,h=this.rxLineBreaker;h.test(a.tagName)?d=a:b(a);return{oNode:d,oLineBreaker:f,
bParentBreak:g}},getLineInfo:function(a){a=a||!1;var b=this.getStartNode(),c=this.getEndNode();b||(b=this.getNodeAroundRange(!a,!0));c||(c=this.getNodeAroundRange(!a,!0));a=this._getLineStartInfo(b);var d=a.oNode,e=this._getLineEndInfo(c),f=e.oNode;if(b!=d||c!=f)b=this._compareEndPoint(nhn.DOMFix.parentNode(d),this._getPosIdx(d),this.endContainer,this.endOffset),c=this._compareEndPoint(nhn.DOMFix.parentNode(f),this._getPosIdx(f)+1,this.startContainer,this.startOffset),0>=b&&0<=c||(b=this.getNodeAroundRange(!1,
!0),c=this.getNodeAroundRange(!1,!0),a=this._getLineStartInfo(b),e=this._getLineEndInfo(c));return{oStart:a,oEnd:e}}}).extend(nhn.W3CDOMRange);
nhn.BrowserSelection=function(a){this.init=function(a){this._window=a||window;this._document=this._window.document};this.init(a);this._document.createRange?nhn.BrowserSelectionImpl_FF.apply(this):nhn.BrowserSelectionImpl_IE.apply(this);this.selectRange=function(a){this.selectNone();this.addRange(a)};this.selectionLoaded=!0;this._oSelection||(this.selectionLoaded=!1)};
nhn.BrowserSelectionImpl_FF=function(){this._oSelection=this._window.getSelection();this.getRangeAt=function(a){try{var b=this._oSelection.getRangeAt(a||0)}catch(c){return new nhn.W3CDOMRange(this._window)}return this._FFRange2W3CRange(b)};this.addRange=function(a){a=this._W3CRange2FFRange(a);this._oSelection.addRange(a)};this.selectNone=function(){this._oSelection.removeAllRanges()};this.getCommonAncestorContainer=function(a){return this._W3CRange2FFRange(a).commonAncestorContainer};this.isCollapsed=
function(a){return this._W3CRange2FFRange(a).collapsed};this.compareEndPoints=function(a,b,c,d){var e=this._document.createRange(),f=this._document.createRange();e.setStart(a,b);f.setStart(c,d);e.collapse(!0);f.collapse(!0);try{return e.compareBoundaryPoints(1,f)}catch(g){return 1}};this._FFRange2W3CRange=function(a){var b=new nhn.W3CDOMRange(this._window);b.setStart(a.startContainer,a.startOffset,!0);b.setEnd(a.endContainer,a.endOffset,!0);return b};this._W3CRange2FFRange=function(a){var b=this._document.createRange();
b.setStart(a.startContainer,a.startOffset);b.setEnd(a.endContainer,a.endOffset);return b}};
nhn.BrowserSelectionImpl_IE=function(){this._oSelection=this._document.selection;this.oLastRange={oBrowserRange:null,elStartContainer:null,nStartOffset:-1,elEndContainer:null,nEndOffset:-1};this._updateLastRange=function(a,b){this.oLastRange.oBrowserRange=a;this.oLastRange.elStartContainer=b.startContainer;this.oLastRange.nStartOffset=b.startOffset;this.oLastRange.elEndContainer=b.endContainer;this.oLastRange.nEndOffset=b.endOffset};this.getRangeAt=function(a){a=a||0;var b;if("Control"==this._oSelection.type){b=
new nhn.W3CDOMRange(this._window);a=this._oSelection.createRange().item(a);if(!a||a.ownerDocument!=this._document)return b;b.selectNode(a)}else{b=this._oSelection.createRange();a=b.parentElement();if(!a||a.ownerDocument!=this._document)return b=new nhn.W3CDOMRange(this._window);b=this._IERange2W3CRange(b)}return b};this.addRange=function(a){this._W3CRange2IERange(a).select()};this.selectNone=function(){this._oSelection.empty()};this.getCommonAncestorContainer=function(a){return this._W3CRange2IERange(a).parentElement()};
this.isCollapsed=function(a){a=this._W3CRange2IERange(a);var b=a.duplicate();b.collapse();return a.isEqual(b)};this.compareEndPoints=function(a,b,c,d){a===this.oLastRange.elStartContainer&&b===this.oLastRange.nStartOffset?(a=this.oLastRange.oBrowserRange.duplicate(),a.collapse(!0)):a===this.oLastRange.elEndContainer&&b===this.oLastRange.nEndOffset?(a=this.oLastRange.oBrowserRange.duplicate(),a.collapse(!1)):a=this._getIERangeAt(a,b);c===this.oLastRange.elStartContainer&&d===this.oLastRange.nStartOffset?
(c=this.oLastRange.oBrowserRange.duplicate(),c.collapse(!0)):c===this.oLastRange.elEndContainer&&d===this.oLastRange.nEndOffset?(c=this.oLastRange.oBrowserRange.duplicate(),c.collapse(!1)):c=this._getIERangeAt(c,d);return a.compareEndPoints("StartToStart",c)};this._W3CRange2IERange=function(a){if(this.oLastRange.elStartContainer===a.startContainer&&this.oLastRange.nStartOffset===a.startOffset&&this.oLastRange.elEndContainer===a.endContainer&&this.oLastRange.nEndOffset===a.endOffset)return this.oLastRange.oBrowserRange;
var b=this._getIERangeAt(a.startContainer,a.startOffset),c=this._getIERangeAt(a.endContainer,a.endOffset);b.setEndPoint("EndToEnd",c);this._updateLastRange(b,a);return b};this._getIERangeAt=function(a,b){var c=this._document.body.createTextRange(),d=this._getSelectableNodeAndOffsetForIE(a,b),e=d.iOffsetForIE;c.moveToElementText(d.oSelectableNodeForIE);c.collapse(d.bCollapseToStart);c.moveStart("character",e);return c};this._getSelectableNodeAndOffsetForIE=function(a,b){var c=null,d=null,e=0;3==a.nodeType?
(c=nhn.DOMFix.parentNode(a),d=nhn.DOMFix.childNodes(c),e=d.length):(c=a,d=nhn.DOMFix.childNodes(c),e=b<d.length?b:d.length);for(var f=null,g=0,h=!0,j=0;j<e;j++)if(f=d[j],3==f.nodeType){if(f==a)break;g+=f.nodeValue.length}else c=f,g=0,h=!1;3==a.nodeType&&(g+=b);return{oSelectableNodeForIE:c,iOffsetForIE:g,bCollapseToStart:h}};this._IERange2W3CRange=function(a){var b=new nhn.W3CDOMRange(this._window),c=null,c=null,c=a.duplicate();c.collapse(!0);c=this._getW3CContainerAndOffset(c,!0);b.setStart(c.oContainer,
c.iOffset,!0,!0);c=a.duplicate();c.collapse(!0);c.isEqual(a)?b.collapse(!0):(c=a.duplicate(),c.collapse(!1),c=this._getW3CContainerAndOffset(c),b.setEnd(c.oContainer,c.iOffset,!0));this._updateLastRange(a,b);return b};this._getW3CContainerAndOffset=function(a,b){for(var c=a.parentElement(),d=-1,e=this._document.body.createTextRange(),f=nhn.DOMFix.childNodes(c),d=null,g=0,g=0;g<f.length;g++)if(3!=f[g].nodeType){e.moveToElementText(f[g]);if(0<=e.compareEndPoints("StartToStart",a))break;d=f[g]}if(0!==
g&&3==f[g-1].nodeType){f=this._document.body.createTextRange();e=null;d?(f.moveToElementText(d),f.collapse(!1),e=d.nextSibling):(f.moveToElementText(c),f.collapse(!0),e=c.firstChild);c=a.duplicate();c.setEndPoint("StartToStart",f);for(d=c.text.replace(/[\r\n]/g,"").length;d>e.nodeValue.length&&e.nextSibling;)d-=e.nodeValue.length,e=e.nextSibling;b&&(e.nextSibling&&3==e.nextSibling.nodeType&&d==e.nodeValue.length)&&(d-=e.nodeValue.length,e=e.nextSibling);c=e}else c=a.parentElement(),d=g;return{oContainer:c,
iOffset:d}}};
nhn.DOMFix=new (jindo.$Class({$init:function(){jindo.$Agent().navigator().ie||jindo.$Agent().navigator().opera?(this.childNodes=this._childNodes_Fix,this.parentNode=this._parentNode_Fix):(this.childNodes=this._childNodes_Native,this.parentNode=this._parentNode_Native)},_parentNode_Native:function(a){return a.parentNode},_parentNode_Fix:function(a){if(!a)return a;for(;a.previousSibling;)a=a.previousSibling;return a.parentNode},_childNodes_Native:function(a){return a.childNodes},_childNodes_Fix:function(a){var b=null,
c=0;if(a){b=[];for(a=a.firstChild;a;)b[c++]=a,a=a.nextSibling}return b}}));
nhn.husky.CorePlugin=jindo.$Class({name:"CorePlugin",htLazyLoadRequest_plugins:{},htLazyLoadRequest_allFiles:{},htHTMLLoaded:{},$AFTER_MSG_APP_READY:function(){this.oApp.exec("EXEC_ON_READY_FUNCTION",[])},$ON_ADD_APP_PROPERTY:function(a,b){this.oApp[a]=b},$ON_REGISTER_BROWSER_EVENT:function(a,b,c,d,e){this.oApp.registerBrowserEvent(a,b,c,d,e)},$ON_DISABLE_MESSAGE:function(a){this.oApp.disableMessage(a,!0)},$ON_ENABLE_MESSAGE:function(a){this.oApp.disableMessage(a,!1)},$ON_LOAD_FULL_PLUGIN:function(a,
b,c,d,e){var f=a[0];this.htLazyLoadRequest_plugins[f]||(this.htLazyLoadRequest_plugins[f]={nStatus:1,sContents:""});2===this.htLazyLoadRequest_plugins[f].nStatus?this.oApp.exec("MSG_FULL_PLUGIN_LOADED",[f,b,c,d,e,!1]):this._loadFullPlugin(a,b,c,d,e,0)},_loadFullPlugin:function(a,b,c,d,e,f){jindo.LazyLoading.load(nhn.husky.SE2M_Configuration.LazyLoad.sJsBaseURI+"/"+a[f],jindo.$Fn(function(a,b,c,d,e,f){var n=a[0];f==a.length-1?(this.htLazyLoadRequest_plugins[n].nStatus=2,this.oApp.exec("MSG_FULL_PLUGIN_LOADED",
[a,b,c,d,e])):this._loadFullPlugin(a,b,c,d,e,f+1)},this).bind(a,b,c,d,e,f),"utf-8")},$ON_MSG_FULL_PLUGIN_LOADED:function(a,b,c,d,e){a=d.$this||d;for(var f=0,g=d._huskyFLT.length;f<g;f++){var h="$BEFORE_"+d._huskyFLT[f];(d.$this&&d[h]?d:a)[h]=null;this.oApp.createMessageMap(h)}b=eval(b+".prototype");"function"!==typeof a.$LOCAL_BEFORE_FIRST&&this.oApp.acceptLocalBeforeFirstAgain(a,!0);for(var j in b){if(d.$this&&(!d[j]||"function"===typeof b[j]&&"constructor"!=j))d[j]=jindo.$Fn(b[j],a).bind();if(b[j]&&
(!a[j]||"function"===typeof b[j]&&"constructor"!=j))a[j]=b[j],j.match(/^\$(LOCAL|BEFORE|ON|AFTER)_/)&&this.oApp.addToMessageMap(j,a)}d.$this||this.oApp.exec(c,e)},$ON_LOAD_HTML:function(a){if(!this.htHTMLLoaded[a]){var b=jindo.$("_llh_"+a);if(b){this.htHTMLLoaded[a]=!0;a=document.createElement("DIV");for(a.innerHTML=b.value;a.firstChild;)b.parentNode.insertBefore(a.firstChild,b)}}},$ON_EXEC_ON_READY_FUNCTION:function(){"function"==typeof this.oApp.htRunOptions.fnOnAppReady&&this.oApp.htRunOptions.fnOnAppReady()}});
nhn.husky.HuskyRangeManager=jindo.$Class({name:"HuskyRangeManager",oWindow:null,$init:function(a){this.oWindow=a||window},$BEFORE_MSG_APP_READY:function(){this.oWindow&&"IFRAME"==this.oWindow.tagName&&(this.oWindow=this.oWindow.contentWindow,nhn.CurrentSelection.setWindow(this.oWindow));this.oApp.exec("ADD_APP_PROPERTY",["getSelection",jindo.$Fn(this.getSelection,this).bind()]);this.oApp.exec("ADD_APP_PROPERTY",["getEmptySelection",jindo.$Fn(this.getEmptySelection,this).bind()])},$ON_SET_EDITING_WINDOW:function(a){this.oWindow=
a},getEmptySelection:function(a){return new nhn.HuskyRange(a||this.oWindow)},getSelection:function(a){this.oApp.exec("RESTORE_IE_SELECTION",[]);a=this.getEmptySelection(a);try{a.setFromSelection()}catch(b){}return a}});
nhn.husky.SE2M_Toolbar=jindo.$Class({name:"SE2M_Toolbar",toolbarArea:null,toolbarButton:null,uiNameTag:"uiName",nUIStatus:1,sUIClassPrefix:"husky_seditor_ui_",aUICmdMap:null,_assignHTMLElements:function(a){a=jindo.$(a)||document;this.rxUI=RegExp(this.sUIClassPrefix+"([^ ]+)");this.toolbarArea=jindo.$$.getSingle(".se2_tool",a);this.aAllUI=jindo.$$("[class*="+this.sUIClassPrefix+"]",this.toolbarArea);this.elTextTool=jindo.$$.getSingle("div.husky_seditor_text_tool",this.toolbarArea);this.welToolbarArea=
jindo.$Element(this.toolbarArea);a=0;for(var b=this.aAllUI.length;a<b;a++)if(this.rxUI.test(this.aAllUI[a].className)){var c=RegExp.$1;void 0===this.htUIList[c]&&(this.htUIList[c]=this.aAllUI[a],this.htWrappedUIList[c]=jindo.$Element(this.htUIList[c]))}},$init:function(a){this.htUIList={};this.htWrappedUIList={};this.aUICmdMap={};this._assignHTMLElements(a);this._setRoundedCornerButton()},$ON_MSG_APP_READY:function(){this.oApp.registerBrowserEvent(this.toolbarArea,"mouseover","EVENT_TOOLBAR_MOUSEOVER",
[]);this.oApp.registerBrowserEvent(this.toolbarArea,"mouseout","EVENT_TOOLBAR_MOUSEOUT",[]);this.oApp.registerBrowserEvent(this.toolbarArea,"mousedown","EVENT_TOOLBAR_MOUSEDOWN",[]);this.oApp.exec("ADD_APP_PROPERTY",["getToolbarButtonByUIName",jindo.$Fn(this.getToolbarButtonByUIName,this).bind()]);var a=jindo.$$.getSingle(".se2_tool");this.oApp.exec("REGISTER_HOTKEY",["esc","FOCUS_EDITING_AREA",[],a])},$ON_FOCUS_EDITING_AREA:function(){this.oApp.exec("FOCUS")},$ON_TOGGLE_TOOLBAR_ACTIVE_LAYER:function(a,
b,c,d,e,f){this.oApp.exec("TOGGLE_ACTIVE_LAYER",[a,"MSG_TOOLBAR_LAYER_SHOWN",[a,b,c,d],e,f])},$ON_MSG_TOOLBAR_LAYER_SHOWN:function(a,b,c,d){this.oApp.exec("POSITION_TOOLBAR_LAYER",[a,b]);c&&this.oApp.exec(c,d)},$ON_SHOW_TOOLBAR_ACTIVE_LAYER:function(a,b,c,d){this.oApp.exec("SHOW_ACTIVE_LAYER",[a,b,c]);this.oApp.exec("POSITION_TOOLBAR_LAYER",[a,d])},$ON_ENABLE_UI:function(a){this._enableUI(a)},$ON_DISABLE_UI:function(a){this._disableUI(a)},$ON_SELECT_UI:function(a){if(a=this.htWrappedUIList[a])a.removeClass("hover"),
a.addClass("active")},$ON_DESELECT_UI:function(a){(a=this.htWrappedUIList[a])&&a.removeClass("active")},$ON_ENABLE_ALL_UI:function(a){if(1!==this.nUIStatus){var b;a=a||{};a=jindo.$A(a.aExceptions||[]);for(b in this.htUIList)b&&!a.has(b)&&this._enableUI(b);this.nUIStatus=1}},$ON_DISABLE_ALL_UI:function(a){if(2!==this.nUIStatus){var b;a=a||{};var c=jindo.$A(a.aExceptions||[]);a.bLeaveActiveLayer||this.oApp.exec("HIDE_ACTIVE_LAYER",[]);for(b in this.htUIList)b&&!c.has(b)&&this._disableUI(b);this.nUIStatus=
2}},$ON_MSG_STYLE_CHANGED:function(a,b){"@^"===b?this.oApp.exec("SELECT_UI",[a]):this.oApp.exec("DESELECT_UI",[a])},$ON_POSITION_TOOLBAR_LAYER:function(a,b){var c,d,e,f;a=jindo.$(a);b=b||{};var g=jindo.$(b.elBtn);c=b.sAlign;a&&(g&&(g.tagName&&"BUTTON"==g.tagName)&&g.parentNode.appendChild(a),g=jindo.$Element(a),"right"!=c?(a.style.left="0",c=g.offset().left,d=c+a.offsetWidth,e=this.welToolbarArea.offset().left,f=e+this.toolbarArea.offsetWidth,d>f&&g.css("left",f-d- -1+"px"),c<e&&g.css("left",e-c+
-1+"px")):(a.style.right="0",c=g.offset().left,d=c+a.offsetWidth,e=this.welToolbarArea.offset().left,f=e+this.toolbarArea.offsetWidth,d>f&&g.css("right",-1*(f-d- -1)+"px"),c<e&&g.css("right",-1*(e-c+-1)+"px")))},$ON_EVENT_TOOLBAR_MOUSEOVER:function(a){if(2!==this.nUIStatus){a=this._getAffectedElements(a.element);for(var b=0;b<a.length;b++)a[b].hasClass("active")||a[b].addClass("hover")}},$ON_EVENT_TOOLBAR_MOUSEOUT:function(a){if(2!==this.nUIStatus){a=this._getAffectedElements(a.element);for(var b=
0;b<a.length;b++)a[b].removeClass("hover")}},$ON_EVENT_TOOLBAR_MOUSEDOWN:function(a){for(var b=a.element;b;){if(b.className&&b.className.match(/active/)&&(2<b.childNodes.length||b.parentNode.className.match(/se2_pair/)))return;b=b.parentNode}this.oApp.exec("HIDE_ACTIVE_LAYER_IF_NOT_CHILD",[a.element])},_enableUI:function(a){var b,c;this.nUIStatus=0;b=this.htWrappedUIList[a];c=this.htUIList[a];if(b){b.removeClass("off");var d=c.getElementsByTagName("BUTTON");b=0;for(c=d.length;b<c;b++)d[b].disabled=
!1;c="";if(this.aUICmdMap[a])for(b=0;b<this.aUICmdMap[a].length;b++)c=this.aUICmdMap[a][b],this.oApp.exec("ENABLE_MESSAGE",[c])}},_disableUI:function(a){var b,c;this.nUIStatus=0;b=this.htWrappedUIList[a];c=this.htUIList[a];if(b){b.addClass("off");b.removeClass("hover");var d=c.getElementsByTagName("BUTTON");b=0;for(c=d.length;b<c;b++)d[b].disabled=!0;c="";if(this.aUICmdMap[a])for(b=0;b<this.aUICmdMap[a].length;b++)c=this.aUICmdMap[a][b],this.oApp.exec("DISABLE_MESSAGE",[c])}},_getAffectedElements:function(a){var b,
c;if(!a.bSE2_MDCancelled){a.bSE2_MDCancelled=!0;b=a.getElementsByTagName("BUTTON");for(var d=0,e=b.length;d<e;d++)b[d].onmousedown=function(){return!1}}if(!a||!a.tagName)return[];if("BUTTON"==(b=a).tagName){if((b=b.parentNode)&&"LI"==b.tagName&&this.rxUI.test(b.className))return[jindo.$Element(b)];b=a;return(b=b.parentNode.parentNode)&&"LI"==b.tagName&&(c=jindo.$Element(b)).hasClass("se2_pair")?[c,jindo.$Element(a.parentNode)]:[]}if("SPAN"==(b=a).tagName)if((b=b.parentNode.parentNode)&&"LI"==b.tagName&&
this.rxUI.test(b.className)||(b=b.parentNode)&&"LI"==b.tagName&&this.rxUI.test(b.className))return[jindo.$Element(b)];return[]},_setRoundedCornerButton:function(){var a,b,c,d,e;e=jindo.$$(">ul>li[class*="+this.sUIClassPrefix+"]:only-child",this.elTextTool);a=0;for(b=e.length;a<b;a++)c=e[a],d=jindo.$Element(c),!d.hasClass("husky_seditor_ui_text_more")&&(!d.hasClass("husky_seditor_ui_photo_attach")&&!d.hasClass("husky_seditor_ui_map_attach"))&&(d.addClass("single_child"),jindo.$Element(jindo.$$.getSingle("button>span._buttonRound",
c)).addClass("tool_bg"));e=jindo.$$("ul>li[class*="+this.sUIClassPrefix+"]:first-child",this.elTextTool);a=0;for(b=e.length;a<b;a++)c=e[a],d=jindo.$Element(c),!d.hasClass("husky_seditor_ui_fontName")&&(!d.hasClass("husky_seditor_ui_text_more")&&!d.hasClass("husky_seditor_ui_photo_attach")&&!d.hasClass("husky_seditor_ui_map_attach")&&!d.hasClass("single_child"))&&(d.addClass("first_child"),jindo.$Element(jindo.$$.getSingle("button>span._buttonRound",c)).addClass("tool_bg"));e=jindo.$$("ul>li[class*="+
this.sUIClassPrefix+"]:last-child",this.elTextTool);a=0;for(b=e.length;a<b;a++)c=e[a],d=jindo.$Element(c),!d.hasClass("husky_seditor_ui_fontSize")&&(!d.hasClass("husky_seditor_ui_text_more")&&!d.hasClass("husky_seditor_ui_photo_attach")&&!d.hasClass("husky_seditor_ui_map_attach")&&!d.hasClass("single_child"))&&(d.addClass("last_child"),jindo.$Element(jindo.$$.getSingle("button>span._buttonRound",c)).addClass("tool_bg"))},$ON_REGISTER_UI_EVENT:function(a,b,c,d){this.htUIList[a]&&(this.aUICmdMap[a]||
(this.aUICmdMap[a]=[]),this.aUICmdMap[a][this.aUICmdMap[a].length]=c,(a=jindo.$$.getSingle("button",this.htUIList[a]))&&this.oApp.registerBrowserEvent(a,b,c,d))},getToolbarButtonByUIName:function(a){return jindo.$$.getSingle("BUTTON",this.htUIList[a])}});
nhn.husky.SE2M_EditingModeChanger=jindo.$Class({name:"SE2M_EditingModeChanger",htConversionMode:null,$init:function(a,b){this._assignHTMLElements(a,b)},_assignHTMLElements:function(a,b){a=jindo.$(a)||document;this.elWYSIWYGButton=jindo.$$.getSingle("BUTTON.se2_to_editor",a);this.elHTMLSrcButton=jindo.$$.getSingle("BUTTON.se2_to_html",a);this.elTEXTButton=jindo.$$.getSingle("BUTTON.se2_to_text",a);this.elModeToolbar=jindo.$$.getSingle("DIV.se2_conversion_mode",a);this.welWYSIWYGButtonLi=jindo.$Element(this.elWYSIWYGButton.parentNode);
this.welHTMLSrcButtonLi=jindo.$Element(this.elHTMLSrcButton.parentNode);this.welTEXTButtonLi=jindo.$Element(this.elTEXTButton.parentNode);"undefined"===typeof b||"undefined"===typeof b.bUseModeChanger||!0===b.bUseModeChanger?(this.elWYSIWYGButton.style.display="block",this.elHTMLSrcButton.style.display="block",this.elTEXTButton.style.display="block"):"undefined"!==typeof b.bUseVerticalResizer||!1===b.bUseVerticalResizer?this.elModeToolbar.style.display="none":(this.elWYSIWYGButton.style.display="none",
this.elHTMLSrcButton.style.display="none",this.elTEXTButton.style.display="none")},$ON_MSG_APP_READY:function(){this.oApp.registerBrowserEvent(this.elWYSIWYGButton,"click","EVENT_CHANGE_EDITING_MODE_CLICKED",["WYSIWYG"]);this.oApp.registerBrowserEvent(this.elHTMLSrcButton,"click","EVENT_CHANGE_EDITING_MODE_CLICKED",["HTMLSrc"]);this.oApp.registerBrowserEvent(this.elTEXTButton,"click","EVENT_CHANGE_EDITING_MODE_CLICKED",["TEXT",!1])},$ON_EVENT_CHANGE_EDITING_MODE_CLICKED:function(a,b){if("TEXT"==a&&
0<this.oApp.getIR().length&&!b&&!confirm(this.oApp.$MSG("SE2M_EditingModeChanger.confirmTextMode")))return!1;this.oApp.exec("CHANGE_EDITING_MODE",[a]);"HTMLSrc"==a?this.oApp.exec("MSG_NOTIFY_CLICKCR",["htmlmode"]):"TEXT"==a?this.oApp.exec("MSG_NOTIFY_CLICKCR",["textmode"]):this.oApp.exec("MSG_NOTIFY_CLICKCR",["editormode"])},$ON_DISABLE_ALL_UI:function(a){a=a||{};jindo.$A(a.aExceptions||[]).has("mode_switcher")||("WYSIWYG"==this.oApp.getEditingMode()?(this.welWYSIWYGButtonLi.removeClass("active"),
this.elHTMLSrcButton.disabled=!0,this.elTEXTButton.disabled=!0):"TEXT"==this.oApp.getEditingMode()?(this.welTEXTButtonLi.removeClass("active"),this.elWYSIWYGButton.disabled=!0,this.elHTMLSrcButton.disabled=!0):(this.welHTMLSrcButtonLi.removeClass("active"),this.elWYSIWYGButton.disabled=!0,this.elTEXTButton.disabled=!0))},$ON_ENABLE_ALL_UI:function(){"WYSIWYG"==this.oApp.getEditingMode()?(this.welWYSIWYGButtonLi.addClass("active"),this.elHTMLSrcButton.disabled=!1,this.elTEXTButton.disabled=!1):"TEXT"==
this.oApp.getEditingMode()?(this.welTEXTButtonLi.addClass("active"),this.elWYSIWYGButton.disabled=!1,this.elHTMLSrcButton.disabled=!1):(this.welHTMLSrcButtonLi.addClass("active"),this.elWYSIWYGButton.disabled=!1,this.elTEXTButton.disabled=!1)},$ON_CHANGE_EDITING_MODE:function(a){"HTMLSrc"==a?(this.welWYSIWYGButtonLi.removeClass("active"),this.welHTMLSrcButtonLi.addClass("active"),this.welTEXTButtonLi.removeClass("active"),this.elWYSIWYGButton.disabled=!1,this.elHTMLSrcButton.disabled=!0,this.elTEXTButton.disabled=
!1,this.oApp.exec("HIDE_ALL_DIALOG_LAYER"),this.oApp.exec("DISABLE_ALL_UI",[{aExceptions:["mode_switcher"]}])):"TEXT"==a?(this.welWYSIWYGButtonLi.removeClass("active"),this.welHTMLSrcButtonLi.removeClass("active"),this.welTEXTButtonLi.addClass("active"),this.elWYSIWYGButton.disabled=!1,this.elHTMLSrcButton.disabled=!1,this.elTEXTButton.disabled=!0,this.oApp.exec("HIDE_ALL_DIALOG_LAYER"),this.oApp.exec("DISABLE_ALL_UI",[{aExceptions:["mode_switcher"]}])):(this.welWYSIWYGButtonLi.addClass("active"),
this.welHTMLSrcButtonLi.removeClass("active"),this.welTEXTButtonLi.removeClass("active"),this.elWYSIWYGButton.disabled=!0,this.elHTMLSrcButton.disabled=!1,this.elTEXTButton.disabled=!1,this.oApp.exec("RESET_STYLE_STATUS"),this.oApp.exec("ENABLE_ALL_UI",[]))}});
nhn.husky.SE_EditingAreaManager=jindo.$Class({name:"SE_EditingAreaManager",oActivePlugin:null,elContentsField:null,bIsDirty:!1,bAutoResize:!1,$init:function(a,b,c,d,e){this.sDefaultEditingMode=a;this.elContentsField=jindo.$(b);this._assignHTMLElements(e);this.fOnBeforeUnload=d;this.oEditingMode={};this.elContentsField.style.display="none";this.nMinWidth=parseInt(c.nMinWidth||60,10);this.nMinHeight=parseInt(c.nMinHeight||60,10);a=this._getSize([c.nWidth,c.width,this.elEditingAreaContainer.offsetWidth],
this.nMinWidth);c=this._getSize([c.nHeight,c.height,this.elEditingAreaContainer.offsetHeight],this.nMinHeight);this.elEditingAreaContainer.style.width=a.nSize+a.sUnit;this.elEditingAreaContainer.style.height=c.nSize+c.sUnit;"px"===a.sUnit?e.style.width=a.nSize+2+"px":"%"===a.sUnit&&(e.style.minWidth=this.nMinWidth+"px")},_getSize:function(a,b){var c,d,e,f,g;b=parseInt(b,10);c=0;for(d=a.length;c<d;c++)if(a[c]){if(!isNaN(a[c])){f=parseInt(a[c],10);g="px";break}if((e=/([0-9]+)(.*)/i.exec(a[c]))&&!(2>
e.length||0>=e[1])){f=parseInt(e[1],10);(g=e[2])||(g="px");f<b&&"px"===g&&(f=b);break}}g||(g="px");if(isNaN(f)||f<b&&"px"===g)f=b;return{nSize:f,sUnit:g}},_assignHTMLElements:function(a){this.elEditingAreaContainer=jindo.$$.getSingle("DIV.husky_seditor_editing_area_container",a)},$BEFORE_MSG_APP_READY:function(){this.oNavigator=jindo.$Agent().navigator();this.oApp.exec("ADD_APP_PROPERTY",["elEditingAreaContainer",this.elEditingAreaContainer]);this.oApp.exec("ADD_APP_PROPERTY",["welEditingAreaContainer",
jindo.$Element(this.elEditingAreaContainer)]);this.oApp.exec("ADD_APP_PROPERTY",["getEditingAreaHeight",jindo.$Fn(this.getEditingAreaHeight,this).bind()]);this.oApp.exec("ADD_APP_PROPERTY",["getEditingAreaWidth",jindo.$Fn(this.getEditingAreaWidth,this).bind()]);this.oApp.exec("ADD_APP_PROPERTY",["getRawContents",jindo.$Fn(this.getRawContents,this).bind()]);this.oApp.exec("ADD_APP_PROPERTY",["getContents",jindo.$Fn(this.getContents,this).bind()]);this.oApp.exec("ADD_APP_PROPERTY",["getIR",jindo.$Fn(this.getIR,
this).bind()]);this.oApp.exec("ADD_APP_PROPERTY",["setContents",this.setContents]);this.oApp.exec("ADD_APP_PROPERTY",["setIR",this.setIR]);this.oApp.exec("ADD_APP_PROPERTY",["getEditingMode",jindo.$Fn(this.getEditingMode,this).bind()])},$ON_MSG_APP_READY:function(){this.htOptions=this.oApp.htOptions[this.name]||{};this.sDefaultEditingMode=this.htOptions.sDefaultEditingMode||this.sDefaultEditingMode;this.iframeWindow=this.oApp.getWYSIWYGWindow();this.oApp.exec("REGISTER_CONVERTERS",[]);this.oApp.exec("CHANGE_EDITING_MODE",
[this.sDefaultEditingMode,!0]);this.oApp.exec("LOAD_CONTENTS_FIELD",[!1]);this.oApp.exec("REGISTER_HOTKEY",["esc","CLOSE_LAYER_POPUP",[],document]);window.onbeforeunload=this.fOnBeforeUnload?this.fOnBeforeUnload:jindo.$Fn(function(){this.oApp.exec("MSG_BEFOREUNLOAD_FIRED");if(this.getRawContents()!=this.sCurrentRawContents||this.bIsDirty)return this.oApp.$MSG("SE_EditingAreaManager.onExit")},this).bind()},$ON_CLOSE_LAYER_POPUP:function(){this.oApp.exec("ENABLE_ALL_UI");this.oApp.exec("DESELECT_UI",
["helpPopup"]);this.oApp.exec("HIDE_ALL_DIALOG_LAYER",[]);this.oApp.exec("HIDE_EDITING_AREA_COVER");this.oApp.exec("FOCUS")},$AFTER_MSG_APP_READY:function(){this.oApp.exec("UPDATE_RAW_CONTENTS");this.oApp.htOptions[this.name]&&this.oApp.htOptions[this.name].bAutoResize&&(this.bAutoResize=this.oApp.htOptions[this.name].bAutoResize);this.startAutoResize()},$ON_LOAD_CONTENTS_FIELD:function(a){var b=this.elContentsField.value,b=b.replace(/^\s+/,"");this.oApp.exec("SET_CONTENTS",[b,a])},$ON_UPDATE_IR_FIELD:function(){this.elContentsField.value=
this.oApp.getContents();this.oApp.exec("UPDATE_RAW_CONTENTS")},$ON_UPDATE_RAW_CONTENTS:function(){this.sCurrentRawContents=this.oApp.getRawContents()},$BEFORE_CHANGE_EDITING_MODE:function(a){if(!this.oEditingMode[a])return!1;this.stopAutoResize();this._oPrevActivePlugin=this.oActivePlugin;this.oActivePlugin=this.oEditingMode[a]},$AFTER_CHANGE_EDITING_MODE:function(a,b){if(this._oPrevActivePlugin){var c=this._oPrevActivePlugin.getIR();this.oApp.exec("SET_IR",[c]);this._setEditingAreaDimension()}this.startAutoResize();
b||this.oApp.delayedExec("FOCUS",[],0)},$ON_SET_IS_DIRTY:function(a){this.bIsDirty=a},$ON_FOCUS:function(){this.oActivePlugin&&"function"==typeof this.oActivePlugin.setIR&&(this.oNavigator.msafari&&(this.iframeWindow&&!this.iframeWindow.document.hasFocus()&&"WYSIWYG"==this.oActivePlugin.sMode)&&this.iframeWindow.focus(),this.oActivePlugin.focus())},$ON_IE_FOCUS:function(){this.oApp.oNavigator.ie&&this.oApp.exec("FOCUS")},$ON_SET_CONTENTS:function(a,b){this.setContents(a,b)},$BEFORE_SET_IR:function(a,
b){b||this.oApp.exec("RECORD_UNDO_ACTION",["BEFORE SET CONTENTS",{sSaveTarget:"BODY"}])},$ON_SET_IR:function(a){this.oActivePlugin&&"function"==typeof this.oActivePlugin.setIR&&this.oActivePlugin.setIR(a)},$AFTER_SET_IR:function(a,b){b||this.oApp.exec("RECORD_UNDO_ACTION",["AFTER SET CONTENTS",{sSaveTarget:"BODY"}])},$ON_REGISTER_EDITING_AREA:function(a){this.oEditingMode[a.sMode]=a;"WYSIWYG"==a.sMode&&this.attachDocumentEvents(a.oEditingArea);this._setEditingAreaDimension(a)},$ON_MSG_EDITING_AREA_RESIZE_STARTED:function(){this._fitElementInEditingArea(this.elEditingAreaContainer);
this.oApp.exec("STOP_AUTORESIZE_EDITING_AREA");this.oApp.exec("SHOW_EDITING_AREA_COVER");this.elEditingAreaContainer.style.overflow="hidden";this.iStartingHeight=parseInt(this.elEditingAreaContainer.style.height,10)},$ON_STOP_AUTORESIZE_EDITING_AREA:function(){this.bAutoResize&&(this.stopAutoResize(),this.bAutoResize=!1)},startAutoResize:function(){this.bAutoResize&&(this.oActivePlugin&&"function"==typeof this.oActivePlugin.startAutoResize)&&this.oActivePlugin.startAutoResize()},stopAutoResize:function(){this.bAutoResize&&
(this.oActivePlugin&&"function"==typeof this.oActivePlugin.stopAutoResize)&&this.oActivePlugin.stopAutoResize()},$ON_RESIZE_EDITING_AREA:function(a,b){null!==a&&"undefined"!==typeof a&&this._resizeWidth(a,"px");null!==b&&"undefined"!==typeof b&&this._resizeHeight(b,"px");this._fitElementInEditingArea(this.elResizingBoard);this._setEditingAreaDimension()},_resizeWidth:function(a,b){var c=parseInt(a,10);c<this.nMinWidth&&(c=this.nMinWidth);a&&(this.elEditingAreaContainer.style.width=c+b)},_resizeHeight:function(a,
b){var c=parseInt(a,10);c<this.nMinHeight&&(c=this.nMinHeight);a&&(this.elEditingAreaContainer.style.height=c+b)},$ON_RESIZE_EDITING_AREA_BY:function(a,b){var c=parseInt(a,10),d=parseInt(b,10),e,f;0!==a&&-1===this.elEditingAreaContainer.style.width.indexOf("%")&&(e=this.elEditingAreaContainer.style.width?parseInt(this.elEditingAreaContainer.style.width,10)+c:null);0!==d&&(f=this.elEditingAreaContainer.style.height?this.iStartingHeight+d:null);(a||d)&&this.oApp.exec("RESIZE_EDITING_AREA",[e,f])},$ON_MSG_EDITING_AREA_RESIZE_ENDED:function(){this.oApp.exec("HIDE_EDITING_AREA_COVER");
this.elEditingAreaContainer.style.overflow="";this._setEditingAreaDimension()},$ON_SHOW_EDITING_AREA_COVER:function(){this.elResizingBoard||this.createCoverDiv();this.elResizingBoard.style.display="block"},$ON_HIDE_EDITING_AREA_COVER:function(){this.elResizingBoard&&(this.elResizingBoard.style.display="none")},$ON_KEEP_WITHIN_EDITINGAREA:function(a,b){var c=parseInt(a.style.top,10);c+a.offsetHeight>this.oApp.elEditingAreaContainer.offsetHeight&&(a.style.top="number"==typeof b?c-a.offsetHeight-b+"px":
this.oApp.elEditingAreaContainer.offsetHeight-a.offsetHeight+"px");parseInt(a.style.left,10)+a.offsetWidth>this.oApp.elEditingAreaContainer.offsetWidth&&(a.style.left=this.oApp.elEditingAreaContainer.offsetWidth-a.offsetWidth+"px")},$ON_EVENT_EDITING_AREA_KEYDOWN:function(){this.oApp.exec("HIDE_ACTIVE_LAYER",[])},$ON_EVENT_EDITING_AREA_MOUSEDOWN:function(){this.oApp.exec("HIDE_ACTIVE_LAYER",[])},$ON_EVENT_EDITING_AREA_SCROLL:function(){this.oApp.exec("HIDE_ACTIVE_LAYER",[])},_setEditingAreaDimension:function(a){a=
a||this.oActivePlugin;this._fitElementInEditingArea(a.elEditingArea)},_fitElementInEditingArea:function(a){a.style.height=this.elEditingAreaContainer.offsetHeight+"px"},attachDocumentEvents:function(a){this.oApp.registerBrowserEvent(a,"click","EVENT_EDITING_AREA_CLICK");this.oApp.registerBrowserEvent(a,"dblclick","EVENT_EDITING_AREA_DBLCLICK");this.oApp.registerBrowserEvent(a,"mousedown","EVENT_EDITING_AREA_MOUSEDOWN");this.oApp.registerBrowserEvent(a,"mousemove","EVENT_EDITING_AREA_MOUSEMOVE");this.oApp.registerBrowserEvent(a,
"mouseup","EVENT_EDITING_AREA_MOUSEUP");this.oApp.registerBrowserEvent(a,"mouseout","EVENT_EDITING_AREA_MOUSEOUT");this.oApp.registerBrowserEvent(a,"mousewheel","EVENT_EDITING_AREA_MOUSEWHEEL");this.oApp.registerBrowserEvent(a,"keydown","EVENT_EDITING_AREA_KEYDOWN");this.oApp.registerBrowserEvent(a,"keypress","EVENT_EDITING_AREA_KEYPRESS");this.oApp.registerBrowserEvent(a,"keyup","EVENT_EDITING_AREA_KEYUP");this.oApp.registerBrowserEvent(a,"scroll","EVENT_EDITING_AREA_SCROLL")},createCoverDiv:function(){this.elResizingBoard=
document.createElement("DIV");this.elEditingAreaContainer.insertBefore(this.elResizingBoard,this.elEditingAreaContainer.firstChild);this.elResizingBoard.style.position="absolute";this.elResizingBoard.style.background="#000000";this.elResizingBoard.style.zIndex=100;this.elResizingBoard.style.border=1;this.elResizingBoard.style.opacity=0;this.elResizingBoard.style.filter="alpha(opacity=0.0)";this.elResizingBoard.style.MozOpacity=0;this.elResizingBoard.style["-moz-opacity"]=0;this.elResizingBoard.style["-khtml-opacity"]=
0;this._fitElementInEditingArea(this.elResizingBoard);this.elResizingBoard.style.width=this.elEditingAreaContainer.offsetWidth+"px";this.elResizingBoard.style.display="none"},$ON_GET_COVER_DIV:function(a,b){this.elResizingBoard&&(b[a]=this.elResizingBoard)},getIR:function(){return!this.oActivePlugin?"":this.oActivePlugin.getIR()},setIR:function(a,b){this.oApp.exec("SET_IR",[a,b])},getRawContents:function(){return!this.oActivePlugin?"":this.oActivePlugin.getRawContents()},getContents:function(){var a=
this.oApp.getIR(),a=this.oApp.applyConverter?this.oApp.applyConverter("IR_TO_DB",a,this.oApp.getWYSIWYGDocument()):a;return a=this._cleanContents(a)},_cleanContents:function(a){return a.replace(RegExp("(<img [^>]*>)"+unescape("%uFEFF")+"","ig"),"$1")},setContents:function(a,b){var c;c=this.oApp.applyConverter?this.oApp.applyConverter("DB_TO_IR",a,this.oApp.getWYSIWYGDocument()):a;this.oApp.exec("SET_IR",[c,b])},getEditingMode:function(){return this.oActivePlugin.sMode},getEditingAreaWidth:function(){return this.elEditingAreaContainer.offsetWidth},
getEditingAreaHeight:function(){return this.elEditingAreaContainer.offsetHeight}});
nhn.husky.SE_EditingAreaVerticalResizer=jindo.$Class({name:"SE_EditingAreaVerticalResizer",oResizeGrip:null,sCookieNotice:"bHideResizeNotice",nEditingAreaMinHeight:null,htConversionMode:null,$init:function(a,b){this._assignHTMLElements(a,b)},$ON_MSG_APP_READY:function(){jindo.$Agent().navigator().msafari?(jindo.$Element(this.oResizeGrip).first().text("\uc785\ub825\ucc3d \ub192\uc774 \uc790\ub3d9 \uc870\uc815 \ubc14"),this.oResizeGrip.disabled=!0):(this.$FnMouseDown=jindo.$Fn(this._mousedown,this),
this.$FnMouseMove=jindo.$Fn(this._mousemove,this),this.$FnMouseUp=jindo.$Fn(this._mouseup,this),this.$FnMouseOver=jindo.$Fn(this._mouseover,this),this.$FnMouseOut=jindo.$Fn(this._mouseout,this),this.$FnMouseDown.attach(this.oResizeGrip,"mousedown"),this.$FnMouseOver.attach(this.oResizeGrip,"mouseover"),this.$FnMouseOut.attach(this.oResizeGrip,"mouseout"),jindo.$Fn(this._closeNotice,this).attach(this.elCloseLayerBtn,"click"),this.oApp.exec("REGISTER_HOTKEY",["shift+esc","FOCUS_RESIZER"]),this.oApp.exec("ADD_APP_PROPERTY",
["checkResizeGripPosition",jindo.$Fn(this.checkResizeGripPosition,this).bind()]),this.welNoticeLayer&&!Number(jindo.$Cookie().get(this.sCookieNotice))&&this.welNoticeLayer.show(),this.oApp.getEditingAreaHeight&&(this.nEditingAreaMinHeight=this.oApp.getEditingAreaHeight()))},checkResizeGripPosition:function(a){var b=jindo.$Document(),b=jindo.$Element(this.oResizeGrip).offset().top-b.scrollPosition().top+25-b.clientSize().height;0>=b||(a&&(this.nEditingAreaMinHeight>this.oApp.getEditingAreaHeight()-
b&&(b=-1*(this.nEditingAreaMinHeight-this.oApp.getEditingAreaHeight())),this.oApp.exec("MSG_EDITING_AREA_RESIZE_STARTED"),this.oApp.exec("RESIZE_EDITING_AREA_BY",[0,-1*b]),this.oApp.exec("MSG_EDITING_AREA_RESIZE_ENDED")),this.oApp.exec("STOP_AUTORESIZE_EDITING_AREA"))},$ON_FOCUS_RESIZER:function(){this.oApp.exec("IE_HIDE_CURSOR");this.oResizeGrip.focus()},_assignHTMLElements:function(a,b){this.oResizeGrip=jindo.$$.getSingle("BUTTON.husky_seditor_editingArea_verticalResizer",a);this.elNoticeLayer=
jindo.$$.getSingle("DIV.husky_seditor_resize_notice",a);this.elModeToolbar=jindo.$$.getSingle("DIV.se2_conversion_mode",a);this.welConversionMode=jindo.$Element(this.oResizeGrip.parentNode);this.elNoticeLayer&&(this.welNoticeLayer=jindo.$Element(this.elNoticeLayer),this.elCloseLayerBtn=jindo.$$.getSingle("BUTTON.bt_clse",this.elNoticeLayer));"undefined"===typeof b||"undefined"===typeof b.bUseVerticalResizer||!0===b.bUseVerticalResizer?this.oResizeGrip.style.display="block":"undefined"!==typeof b.bUseModeChanger&&
!1===b.bUseModeChanger?this.elModeToolbar.style.display="none":this.oResizeGrip.style.display="none"},_mouseover:function(a){a.stopBubble();this.welConversionMode.addClass("controller_on")},_mouseout:function(a){a.stopBubble();this.welConversionMode.removeClass("controller_on")},_mousedown:function(a){this.iStartHeight=a.pos().clientY;this.iStartHeightOffset=a.pos().layerY;this.$FnMouseMove.attach(document,"mousemove");this.$FnMouseUp.attach(document,"mouseup");this.iStartHeight=a.pos().clientY;this.oApp.exec("HIDE_ACTIVE_LAYER");
this.oApp.exec("HIDE_ALL_DIALOG_LAYER");this.oApp.exec("MSG_EDITING_AREA_RESIZE_STARTED",[this.$FnMouseDown,this.$FnMouseMove,this.$FnMouseUp])},_mousemove:function(a){a=a.pos().clientY-this.iStartHeight;this.oApp.exec("RESIZE_EDITING_AREA_BY",[0,a])},_mouseup:function(){this.$FnMouseMove.detach(document,"mousemove");this.$FnMouseUp.detach(document,"mouseup");this.oApp.exec("MSG_EDITING_AREA_RESIZE_ENDED",[this.$FnMouseDown,this.$FnMouseMove,this.$FnMouseUp])},_closeNotice:function(){this.welNoticeLayer.hide();
jindo.$Cookie().set(this.sCookieNotice,1,3650)}});
nhn.husky.SE_EditingArea_HTMLSrc=jindo.$Class({name:"SE_EditingArea_HTMLSrc",sMode:"HTMLSrc",bAutoResize:!1,nMinHeight:null,$init:function(a){this.elEditingArea=jindo.$(a)},$BEFORE_MSG_APP_READY:function(){this.oNavigator=jindo.$Agent().navigator();this.oApp.exec("REGISTER_EDITING_AREA",[this])},$ON_MSG_APP_READY:function(){this.oApp.getEditingAreaHeight&&(this.nMinHeight=this.oApp.getEditingAreaHeight())},$ON_CHANGE_EDITING_MODE:function(a){this.elEditingArea.style.display=a==this.sMode?"block":
"none"},$AFTER_CHANGE_EDITING_MODE:function(a){a==this.sMode&&(new TextRange(this.elEditingArea)).setSelection(0,0)},startAutoResize:function(){var a={nMinHeight:this.nMinHeight,wfnCallback:jindo.$Fn(this.oApp.checkResizeGripPosition,this).bind()};this.oNavigator.msafari&&(a.wfnCallback=function(){});this.bAutoResize=!0;this.AutoResizer=new nhn.husky.AutoResizer(this.elEditingArea,a);this.AutoResizer.bind()},stopAutoResize:function(){this.AutoResizer.unbind()},getIR:function(){var a=this.getRawContents();
this.oApp.applyConverter&&(a=this.oApp.applyConverter(this.sMode+"_TO_IR",a,this.oApp.getWYSIWYGDocument()));return a},setIR:function(a){if("<br>"===a.toLowerCase()||"<p>&nbsp;</p>"===a.toLowerCase()||"<p><br></p>"===a.toLowerCase())a="";this.oApp.applyConverter&&(a=this.oApp.applyConverter("IR_TO_"+this.sMode,a,this.oApp.getWYSIWYGDocument()));this.setRawContents(a)},setRawContents:function(a){"undefined"!==typeof a&&(this.elEditingArea.value=a)},getRawContents:function(){return this.elEditingArea.value},
focus:function(){this.elEditingArea.focus()}});"undefined"==typeof window.TextRange&&(window.TextRange={});TextRange=function(a,b){this._o=a;this._oDoc=b||document};
TextRange.prototype.getSelection=function(){var a=this._o,b=[-1,-1];if(isNaN(this._o.selectionStart)){a.focus();var c=this._oDoc.body.createTextRange(),d=null,d=this._oDoc.selection.createRange().duplicate();c.moveToElementText(a);d.collapse(!0);c.setEndPoint("EndToEnd",d);b[0]=c.text.length;d=this._oDoc.selection.createRange().duplicate();c.moveToElementText(a);d.collapse(!1);c.setEndPoint("EndToEnd",d);b[1]=c.text.length;a.blur()}else b[0]=a.selectionStart,b[1]=a.selectionEnd;return b};
TextRange.prototype.setSelection=function(a,b){var c=this._o;"undefined"==typeof b&&(b=a);if(c.setSelectionRange)c.setSelectionRange(a,b);else if(c.createTextRange){var d=c.createTextRange();d.collapse(!0);d.moveStart("character",a);d.moveEnd("character",b-a);d.select();c.blur()}};TextRange.prototype.copy=function(){var a=this.getSelection();return this._o.value.substring(a[0],a[1])};
TextRange.prototype.paste=function(a){var b=this._o,c=this.getSelection(),d=b.value,e=d.substr(0,c[0]),d=d.substr(c[1]);b.value=e+a+d;b=0;"undefined"==typeof this._oDoc.body.style.maxHeight&&(e=e.match(/\n/gi),b=null!==e?e.length:0);this.setSelection(c[0]+a.length-b)};TextRange.prototype.cut=function(){var a=this.copy();this.paste("");return a};
nhn.husky.SE_EditingArea_TEXT=jindo.$Class({name:"SE_EditingArea_TEXT",sMode:"TEXT",sRxConverter:"@[0-9]+@",bAutoResize:!1,nMinHeight:null,$init:function(a){this.elEditingArea=jindo.$(a)},$BEFORE_MSG_APP_READY:function(){this.oNavigator=jindo.$Agent().navigator();this.oApp.exec("REGISTER_EDITING_AREA",[this]);this.oApp.exec("ADD_APP_PROPERTY",["getTextAreaContents",jindo.$Fn(this.getRawContents,this).bind()])},$ON_MSG_APP_READY:function(){this.oApp.getEditingAreaHeight&&(this.nMinHeight=this.oApp.getEditingAreaHeight())},
$ON_REGISTER_CONVERTERS:function(){this.oApp.exec("ADD_CONVERTER",["IR_TO_TEXT",jindo.$Fn(this.irToText,this).bind()]);this.oApp.exec("ADD_CONVERTER",["TEXT_TO_IR",jindo.$Fn(this.textToIr,this).bind()])},$ON_CHANGE_EDITING_MODE:function(a){this.elEditingArea.style.display=a==this.sMode?"block":"none"},$AFTER_CHANGE_EDITING_MODE:function(a){a==this.sMode&&(new TextRange(this.elEditingArea)).setSelection(0,0)},irToText:function(a){var b=0,c=a.match(RegExp(this.sRxConverter));null!==c&&(a=a.replace(RegExp(this.sRxConverter),
""));a=a.replace(/\r/g,"");a=a.replace(/[\n|\t]/g,"");a=a.replace(/[\v|\f]/g,"");a=a.replace(/<p><br><\/p>/gi,"\n");a=a.replace(/<P>&nbsp;<\/P>/gi,"\n");a=a.replace(/<br(\s)*\/?>/gi,"\n");a=a.replace(/<br(\s[^\/]*)?>/gi,"\n");a=a.replace(/<\/p(\s[^\/]*)?>/gi,"\n");a=a.replace(/<\/li(\s[^\/]*)?>/gi,"\n");a=a.replace(/<\/tr(\s[^\/]*)?>/gi,"\n");b=a.lastIndexOf("\n");-1<b&&"\n"==a.substring(b)&&(a=a.substring(0,b));a=jindo.$S(a).stripTags().toString();a=this.unhtmlSpecialChars(a);null!==c&&(a=c[0]+a);
return a},textToIr:function(a){if(a){var b=null,b=a.match(RegExp(this.sRxConverter));null!==b&&(a=a.replace(b[0],""));a=this.htmlSpecialChars(a);a=this._addLineBreaker(a);null!==b&&(a=b[0]+a);return a}},_addLineBreaker:function(a){if("BR"===this.oApp.sLineBreaker)return a.replace(/\r?\n/g,"<BR>");var b=new StringBuffer;a=a.split("\n");for(var c=a.length,d="",e=0;e<c;e++){d=jindo.$S(a[e]).trim().$value();if(e===c-1&&""===d)break;null!==d&&""!==d?(b.append("<P>"),b.append(a[e]),b.append("</P>")):jindo.$Agent().navigator().ie?
b.append("<P>&nbsp;</P>"):b.append("<P><BR></P>")}return b.toString()},startAutoResize:function(){var a={nMinHeight:this.nMinHeight,wfnCallback:jindo.$Fn(this.oApp.checkResizeGripPosition,this).bind()};this.oNavigator.msafari&&(a.wfnCallback=function(){});this.bAutoResize=!0;this.AutoResizer=new nhn.husky.AutoResizer(this.elEditingArea,a);this.AutoResizer.bind()},stopAutoResize:function(){this.AutoResizer.unbind()},getIR:function(){var a=this.getRawContents();this.oApp.applyConverter&&(a=this.oApp.applyConverter(this.sMode+
"_TO_IR",a,this.oApp.getWYSIWYGDocument()));return a},setIR:function(a){this.oApp.applyConverter&&(a=this.oApp.applyConverter("IR_TO_"+this.sMode,a,this.oApp.getWYSIWYGDocument()));this.setRawContents(a)},setRawContents:function(a){"undefined"!==typeof a&&(this.elEditingArea.value=a)},getRawContents:function(){return this.elEditingArea.value},focus:function(){this.elEditingArea.focus()},htmlSpecialChars:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,
"&nbsp;")},unhtmlSpecialChars:function(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;/g,"&")}});
nhn.husky.SE_EditingArea_WYSIWYG=jindo.$Class({name:"SE_EditingArea_WYSIWYG",status:nhn.husky.PLUGIN_STATUS.NOT_READY,sMode:"WYSIWYG",iframe:null,doc:null,bStopCheckingBodyHeight:!1,bAutoResize:!1,nBodyMinHeight:0,nScrollbarWidth:0,iLastUndoRecorded:0,_nIFrameReadyCount:50,bWYSIWYGEnabled:!1,$init:function(a){this.iframe=jindo.$(a);var b=jindo.$Agent().navigator();b.ie&&(this.iframe.style.display="none");this.sBlankPageURL="wysiwyg.blank.html";this.sBlankPageURL_EmulateIE7="wysiwyg.blank.ie8.html";
this.aAddtionalEmulateIE7=[];if(this.htOptions=nhn.husky.SE2M_Configuration.SE_EditingAreaManager)this.sBlankPageURL=this.htOptions.sBlankPageURL||this.sBlankPageURL,this.sBlankPageURL_EmulateIE7=this.htOptions.sBlankPageURL_EmulateIE7||this.sBlankPageURL_EmulateIE7,this.aAddtionalEmulateIE7=this.htOptions.aAddtionalEmulateIE7||this.aAddtionalEmulateIE7;this.aAddtionalEmulateIE7.push(8);this.sIFrameSrc=this.sBlankPageURL;b.ie&&jindo.$A(this.aAddtionalEmulateIE7).has(b.nativeVersion)&&(this.sIFrameSrc=
this.sBlankPageURL_EmulateIE7);var c=this.sIFrameSrc;a=this.iframe;var d=jindo.$Fn(this.initIframe,this).bind(),e=jindo.$Fn(function(){this.iframe.src=c},this).bind();!b.ie||9<=b.version&&document.addEventListener?(a.addEventListener("load",d,!1),a.addEventListener("error",e,!1)):(a.attachEvent("onload",d),a.attachEvent("onerror",e));a.src=c;this.elEditingArea=a},$BEFORE_MSG_APP_READY:function(){this.oEditingArea=this.iframe.contentWindow.document;this.oApp.exec("REGISTER_EDITING_AREA",[this]);this.oApp.exec("ADD_APP_PROPERTY",
["getWYSIWYGWindow",jindo.$Fn(this.getWindow,this).bind()]);this.oApp.exec("ADD_APP_PROPERTY",["getWYSIWYGDocument",jindo.$Fn(this.getDocument,this).bind()]);this.oApp.exec("ADD_APP_PROPERTY",["isWYSIWYGEnabled",jindo.$Fn(this.isWYSIWYGEnabled,this).bind()]);this.oApp.exec("ADD_APP_PROPERTY",["getRawHTMLContents",jindo.$Fn(this.getRawHTMLContents,this).bind()]);this.oApp.exec("ADD_APP_PROPERTY",["setRawHTMLContents",jindo.$Fn(this.setRawHTMLContents,this).bind()]);this.isWYSIWYGEnabled()&&this.oApp.exec("ENABLE_WYSIWYG_RULER",
[]);this.oApp.registerBrowserEvent(this.getDocument().body,"paste","EVENT_EDITING_AREA_PASTE")},$ON_MSG_APP_READY:function(){this.oApp.hasOwnProperty("saveSnapShot")||(this.$ON_EVENT_EDITING_AREA_MOUSEUP=function(){},this._recordUndo=function(){});this._bIERangeReset=!0;jindo.$Agent().navigator().ie&&(jindo.$Fn(function(a){"control"===this.iframe.contentWindow.document.selection.type.toLowerCase()&&8===a.key().keyCode&&(this.oApp.exec("EXECCOMMAND",["delete",!1,!1]),a.stop());this._bIERangeReset=
!1},this).attach(this.iframe.contentWindow.document,"keydown"),jindo.$Fn(function(){this._oIERange=null;this._bIERangeReset=!0},this).attach(this.iframe.contentWindow.document.body,"mousedown"),jindo.$Fn(this._onIEBeforeDeactivate,this).attach(this.iframe.contentWindow.document.body,"beforedeactivate"),jindo.$Fn(function(){this._bIERangeReset=!1},this).attach(this.iframe.contentWindow.document.body,"mouseup"));this.fnSetBodyHeight=jindo.$Fn(this._setBodyHeight,this).bind();this.fnCheckBodyChange=
jindo.$Fn(this._checkBodyChange,this).bind();this.fnSetBodyHeight();this._setScrollbarWidth()},_setScrollbarWidth:function(){var a=this.getDocument(),b=a.createElement("div");b.style.width="100px";b.style.height="100px";b.style.overflow="scroll";b.style.position="absolute";b.style.top="-9999px";a.body.appendChild(b);this.nScrollbarWidth=b.offsetWidth-b.clientWidth;a.body.removeChild(b)},$AFTER_EVENT_EDITING_AREA_KEYUP:function(a){this.bAutoResize&&(a=a.key(),33<=a.keyCode&&40>=a.keyCode||(a.alt||
a.ctrl||16===a.keyCode)||this._setAutoResize())},$AFTER_PASTE_HTML:function(){this.bAutoResize&&this._setAutoResize()},startAutoResize:function(){this.oApp.exec("STOP_CHECKING_BODY_HEIGHT");this.bAutoResize=!0;var a=this.oApp.oNavigator;a.ie&&9>a.version?jindo.$Element(this.getDocument().body).css({overflow:"visible"}):jindo.$Element(this.getDocument().body).css({overflowX:"visible",overflowY:"hidden"});this._setAutoResize();this.nCheckBodyInterval=setInterval(this.fnCheckBodyChange,500);this.oApp.exec("START_FLOAT_TOOLBAR")},
stopAutoResize:function(){this.bAutoResize=!1;clearInterval(this.nCheckBodyInterval);this.oApp.exec("STOP_FLOAT_TOOLBAR");jindo.$Element(this.getDocument().body).css({overflow:"visible",overflowY:"visible"});this.oApp.exec("START_CHECKING_BODY_HEIGHT")},_checkBodyChange:function(){if(this.bAutoResize){var a=this.getDocument().body.innerHTML.length;a!==this.nBodyLength&&(this.nBodyLength=a,this._setAutoResize())}},_getResizeHeight:function(){var a=this.getDocument().body,b,c="width fontFamily fontSize fontWeight fontStyle lineHeight letterSpacing textTransform wordSpacing".split(" "),
d,e;if(!this.oApp.oNavigator.firefox&&!this.oApp.oNavigator.safari)return this.oApp.oNavigator.ie&&(8===this.oApp.oNavigator.version&&8===document.documentMode)&&jindo.$Element(a).css("height","0px"),a=parseInt(a.scrollHeight,10),a<this.nBodyMinHeight&&(a=this.nBodyMinHeight),a;this.elDummy||(this.elDummy=document.createElement("div"),this.elDummy.className="se2_input_wysiwyg",this.oApp.elEditingAreaContainer.appendChild(this.elDummy),this.elDummy.style.cssText="position:absolute !important; left:-9999px !important; top:-9999px !important; z-index: -9999 !important; overflow: auto !important;",
this.elDummy.style.height=this.nBodyMinHeight+"px");b=jindo.$Element(a);e=c.length;for(d={};e--;)d[c[e]]=b.css(c[e]);-1<d.lineHeight.indexOf("px")&&(d.lineHeight=parseInt(d.lineHeight,10)/parseInt(d.fontSize,10));jindo.$Element(this.elDummy).css(d);this.elDummy.innerHTML=a.innerHTML;return a=this.elDummy.scrollHeight},_setAutoResize:function(){var a=this.getDocument().body,a=jindo.$Element(a),b,c,d=!1,e=this.oApp.oNavigator;this.nTopBottomMargin=this.nTopBottomMargin||parseInt(a.css("marginTop"),
10)+parseInt(a.css("marginBottom"),10);this.nBodyMinHeight=this.nBodyMinHeight||this.oApp.getEditingAreaHeight()-this.nTopBottomMargin;if(e.ie&&9<=e.nativeVersion||e.chrome)a.css("height","0px"),this.iframe.style.height="0px";b=this._getResizeHeight();e.ie?b>this.nBodyMinHeight?(c=this.oApp.getCurrentStyle(),c=parseInt(c.fontSize,10)*c.lineHeight,c<this.nTopBottomMargin&&(c=this.nTopBottomMargin),c=b+c+18,d=!0):(b=this.nBodyMinHeight,c=this.nBodyMinHeight+this.nTopBottomMargin):b>this.nBodyMinHeight?
(c=this.oApp.getCurrentStyle(),c=parseInt(c.fontSize,10)*c.lineHeight,c<this.nTopBottomMargin&&(c=this.nTopBottomMargin),c=b+c,d=!0):(b=this.nBodyMinHeight,c=this.nBodyMinHeight+this.nTopBottomMargin);e.firefox||a.css("height",b+"px");this.iframe.style.height=c+"px";this.oApp.welEditingAreaContainer.height(c);this.oApp.oNavigator.msafari||this.oApp.checkResizeGripPosition(d)},_setBodyHeight:function(){if(!this.bStopCheckingBodyHeight){var a=this.getDocument().body,b=jindo.$Element(a),c=parseInt(b.css("marginTop"),
10)+parseInt(b.css("marginBottom"),10),d=this.oApp.getEditingAreaHeight(),e=d-c,f=b.height();this.nTopBottomMargin=c;0===f?b.css("height",e+"px"):(b.css("height","0px"),a=parseInt(a.scrollHeight,10),c=a>d?a-c:e,this._isHorizontalScrollbarVisible()&&(c-=this.nScrollbarWidth),b.css("height",c+"px"));setTimeout(this.fnSetBodyHeight,500)}},_isHorizontalScrollbarVisible:function(){var a=this.getDocument();return a.documentElement.clientWidth<a.documentElement.scrollWidth?!0:!1},$ON_STOP_CHECKING_BODY_HEIGHT:function(){this.bStopCheckingBodyHeight||
(this.bStopCheckingBodyHeight=!0)},$ON_START_CHECKING_BODY_HEIGHT:function(){this.bStopCheckingBodyHeight&&(this.bStopCheckingBodyHeight=!1,this.fnSetBodyHeight())},$ON_IE_CHECK_EXCEPTION_FOR_SELECTION_PRESERVATION:function(){"Control"===this.getDocument().selection.type&&(this._oIERange=null)},_onIEBeforeDeactivate:function(){this.oApp.delayedExec("IE_CHECK_EXCEPTION_FOR_SELECTION_PRESERVATION",[],0);!this._oIERange&&!this._bIERangeReset&&(this._oIERange=this.oApp.getSelection().cloneRange())},$ON_CHANGE_EDITING_MODE:function(a){a===
this.sMode?(this.iframe.style.display="block",this.oApp.exec("REFRESH_WYSIWYG",[]),this.oApp.exec("SET_EDITING_WINDOW",[this.getWindow()]),this.oApp.exec("START_CHECKING_BODY_HEIGHT")):(this.iframe.style.display="none",this.oApp.exec("STOP_CHECKING_BODY_HEIGHT"))},$AFTER_CHANGE_EDITING_MODE:function(){this._oIERange=null},$ON_REFRESH_WYSIWYG:function(){jindo.$Agent().navigator().firefox&&(this._disableWYSIWYG(),this._enableWYSIWYG())},$ON_ENABLE_WYSIWYG:function(){this._enableWYSIWYG()},$ON_DISABLE_WYSIWYG:function(){this._disableWYSIWYG()},
$ON_IE_HIDE_CURSOR:function(){if(this.oApp.oNavigator.ie)if(this._onIEBeforeDeactivate(),this.oApp.getWYSIWYGDocument().selection.createRange)try{this.oApp.getWYSIWYGDocument().selection.empty()}catch(a){var b=this.oApp.getSelection();b.select();b.oBrowserSelection.selectNone()}else this.oApp.getEmptySelection().oBrowserSelection.selectNone()},$AFTER_SHOW_ACTIVE_LAYER:function(){this.oApp.exec("IE_HIDE_CURSOR",[]);this.bActiveLayerShown=!0},$BEFORE_EVENT_EDITING_AREA_KEYDOWN:function(){this._bKeyDown=
!0},$ON_EVENT_EDITING_AREA_KEYDOWN:function(a){if(this.oApp.getEditingMode()===this.sMode){var b=a.key();if(this.oApp.oNavigator.ie)switch(b.keyCode){case 33:this._pageUp(a);break;case 34:this._pageDown(a);break;case 8:this._backspaceTable(a)}else this.oApp.oNavigator.firefox&&8===b.keyCode&&this._backspaceTable(a);this._recordUndo(b)}},_backspaceTable:function(a){var b=this.oApp.getSelection(),c=null;if(b.collapsed){if((c=b.getNodeAroundRange(!0,!1))&&3===c.nodeType&&/^[\n]*$/.test(c.nodeValue))c=
c.previousSibling;c&&(1===c.nodeType&&"TABLE"===c.tagName)&&(jindo.$Element(c).leave(),a.stop(jindo.$Event.CANCEL_ALL))}},$BEFORE_EVENT_EDITING_AREA_KEYUP:function(){if(!this._bKeyDown)return!1;this._bKeyDown=!1},$ON_EVENT_EDITING_AREA_MOUSEUP:function(){this.oApp.saveSnapShot()},$BEFORE_PASTE_HTML:function(){this.oApp.getEditingMode()!==this.sMode&&this.oApp.exec("CHANGE_EDITING_MODE",[this.sMode])},$ON_PASTE_HTML:function(a,b,c){var d,e;if(this.oApp.getEditingMode()===this.sMode){c||this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",
["PASTE HTML"]);e=jindo.$Agent().navigator();d=b||this.oApp.getSelection();e.ie&&(8==e.nativeVersion&&8==document.documentMode)&&(a+=unescape("%uFEFF"));d.pasteHTML(a);e.ie?(d.collapseToEnd(),d.select(),this._oIERange=null,this._bIERangeReset=!1):(e=d.placeStringBookmark(),this.oApp.getWYSIWYGDocument().body.innerHTML=this.oApp.getWYSIWYGDocument().body.innerHTML,d.moveToBookmark(e),d.collapseToEnd(),d.select(),d.removeStringBookmark(e),d=this.oApp.getSelection(),b&&b.setRange(d));if(-1<a.indexOf("<img")&&
(a=d.startContainer,1===a.nodeType&&"P"===a.tagName&&(b=jindo.$Element(a).child(function(a){return 1===a.$value().nodeType&&"IMG"===a.$value().tagName},1),0<b.length))){b=b[b.length-1].$value();for(b=b.nextSibling;b;)d=b.nextSibling,3===b.nodeType&&("&nbsp;"===b.nodeValue||b.nodeValue===unescape("%u00A0"))&&a.removeChild(b),b=d}c||this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["PASTE HTML"])}},$ON_FOCUS_N_CURSOR:function(a,b){a=a||!0;var c=this.oApp.getSelection();jindo.$Agent().navigator().ie&&!c.collapsed?
(a?c.collapseToEnd():c.collapseToStart(),c.select()):c.collapsed&&!b?this.oApp.exec("FOCUS"):b&&setTimeout(jindo.$Fn(function(a){this._scrollIntoView(a);this.oApp.exec("FOCUS")},this).bind(this.getDocument().getElementById(b)),300)},_getElementVerticalPosition:function(a){var b=0,c=a,d={nTop:0,nBottom:0};if(!a)return d;for(;c;)b+=c.offsetTop,c=c.offsetParent;d.nTop=b;d.nBottom=b+jindo.$Element(a).height();return d},_getVisibleVerticalPosition:function(){var a,b,c,d={nTop:0,nBottom:0};a=this.getWindow();
b=this.getDocument();c=a.innerHeight?a.innerHeight:b.documentElement.clientHeight||b.body.clientHeight;d.nTop=a.pageYOffset||b.documentElement.scrollTop;d.nBottom=d.nTop+c;return d},_isElementVisible:function(a,b){return a.nTop>=b.nTop&&a.nBottom<=b.nBottom},_scrollIntoView:function(a){a=this._getElementVerticalPosition(a);var b=this._getVisibleVerticalPosition(),c=0;this._isElementVisible(a,b)||(0<(c=a.nBottom-b.nBottom)?this.getWindow().scrollTo(0,b.nTop+c):this.getWindow().scrollTo(0,a.nTop))},
$BEFORE_MSG_EDITING_AREA_RESIZE_STARTED:function(){if(!jindo.$Agent().navigator().ie){var a=null,a=this.oApp.getSelection();this.sBM=a.placeStringBookmark()}},$AFTER_MSG_EDITING_AREA_RESIZE_ENDED:function(){if(this.oApp.getEditingMode()===this.sMode&&(this.oApp.exec("REFRESH_WYSIWYG",[]),!jindo.$Agent().navigator().ie)){var a=this.oApp.getEmptySelection();a.moveToBookmark(this.sBM);a.select();a.removeStringBookmark(this.sBM)}},$ON_CLEAR_IE_BACKUP_SELECTION:function(){this._oIERange=null},$ON_RESTORE_IE_SELECTION:function(){if(this._oIERange)try{this._oIERange.select(),
this._oPrevIERange=this._oIERange,this._oIERange=null}catch(a){}},$ON_EVENT_EDITING_AREA_PASTE:function(a){this.oApp.delayedExec("EVENT_EDITING_AREA_PASTE_DELAY",[a],0)},$ON_EVENT_EDITING_AREA_PASTE_DELAY:function(a){this._replaceBlankToNbsp(a.element)},_replaceBlankToNbsp:function(a){var b=this.oApp.oNavigator;if(b.ie&&!(9!==b.nativeVersion||7!==document.documentMode)&&1===a.nodeType&&"BR"!==a.tagName)a=jindo.$$("p:empty()",this.oApp.getWYSIWYGDocument().body,{oneTimeOffCache:!0}),jindo.$A(a).forEach(function(a){a.innerHTML=
"&nbsp;"})},_pageUp:function(a){var b=this._getEditorHeight(),c=jindo.$Document(this.oApp.getWYSIWYGDocument()).scrollPosition(),b=c.top<=b?0:c.top-b;this.oApp.getWYSIWYGWindow().scrollTo(0,b);a.stop()},_pageDown:function(a){var b=this._getEditorHeight(),c=jindo.$Document(this.oApp.getWYSIWYGDocument()).scrollPosition(),d=this._getBodyHeight(),b=c.top+b>=d?d-b:c.top+b;this.oApp.getWYSIWYGWindow().scrollTo(0,b);a.stop()},_getEditorHeight:function(){return this.oApp.elEditingAreaContainer.offsetHeight-
this.nTopBottomMargin},_getBodyHeight:function(){return parseInt(this.getDocument().body.scrollHeight,10)},tidyNbsp:function(){var a,b;if(this.oApp.oNavigator.ie){b=this.oApp.getWYSIWYGDocument().body.getElementsByTagName("P");for(a=0;a<b.length;a++)1===b[a].childNodes.length&&"&nbsp;"===b[a].innerHTML&&(b[a].innerHTML="")}},initIframe:function(){try{if(!this.iframe.contentWindow.document||!this.iframe.contentWindow.document.body||"about:blank"===this.iframe.contentWindow.document.location.href)throw Error("Access denied");
var a=nhn.husky.SE2M_Configuration.SE2M_CSSLoader&&nhn.husky.SE2M_Configuration.SE2M_CSSLoader.sCSSBaseURI?nhn.husky.SE2M_Configuration.SE2M_CSSLoader.sCSSBaseURI:"";nhn.husky.SE2M_Configuration.SE_EditingAreaManager.sCSSBaseURI&&(a=nhn.husky.SE2M_Configuration.SE_EditingAreaManager.sCSSBaseURI);if(a){var b=this.getDocument(),c=b.getElementsByTagName("head")[0],d=b.createElement("link");d.type="text/css";d.rel="stylesheet";d.href=a+"/wysiwyg.in.css";c.appendChild(d)}this._enableWYSIWYG();this.status=
nhn.husky.PLUGIN_STATUS.READY}catch(e){if(0<this._nIFrameReadyCount--)setTimeout(jindo.$Fn(this.initIframe,this).bind(),100);else throw"iframe for WYSIWYG editing mode can't be initialized. Please check if the iframe document exists and is also accessable(cross-domain issues). ";}},getIR:function(){var a=this.iframe.contentWindow.document.body.innerHTML;return this.oApp.applyConverter?this.oApp.applyConverter(this.sMode+"_TO_IR",a,this.oApp.getWYSIWYGDocument()):a},setIR:function(a){var b=jindo.$Agent().navigator();
a=this.oApp.applyConverter?this.oApp.applyConverter("IR_TO_"+this.sMode,a,this.oApp.getWYSIWYGDocument()):a;b.ie&&(9<=b.nativeVersion&&9<=document.documentMode)&&(a=a.replace(/[\r\n]/g,""));this.iframe.contentWindow.document.body.innerHTML=a;b.ie?this.oApp.getEditingMode()===this.sMode&&this.tidyNbsp():""===this.iframe.contentWindow.document.body.innerHTML.replace(/[\r\n\t\s]*/,"")&&(this.iframe.contentWindow.document.body.innerHTML="<br>")},getRawContents:function(){return this.iframe.contentWindow.document.body.innerHTML},
getRawHTMLContents:function(){return this.getRawContents()},setRawHTMLContents:function(a){this.iframe.contentWindow.document.body.innerHTML=a},getWindow:function(){return this.iframe.contentWindow},getDocument:function(){return this.iframe.contentWindow.document},focus:function(){this.getDocument().body.focus();this.oApp.exec("RESTORE_IE_SELECTION",[])},_recordUndo:function(a){if(33<=a.keyCode&&40>=a.keyCode)this.oApp.saveSnapShot();else if(!a.alt&&!(a.ctrl||16===a.keyCode)&&this.oApp.getLastKey()!==
a.keyCode)this.oApp.setLastKey(a.keyCode),(a.enter||!(46!==a.keyCode&&8!==a.keyCode))&&this.oApp.exec("RECORD_UNDO_ACTION",["KEYPRESS("+a.keyCode+")",{bMustBlockContainer:!0}])},_enableWYSIWYG:function(){null!==this.iframe.contentWindow.document.body.contentEditable?this.iframe.contentWindow.document.body.contentEditable=!0:this.iframe.contentWindow.document.designMode="on";this.bWYSIWYGEnabled=!0;jindo.$Agent().navigator().firefox&&setTimeout(jindo.$Fn(function(){this.iframe.contentWindow.document.execCommand("enableInlineTableEditing",
!1,!1)},this).bind(),0)},_disableWYSIWYG:function(){null!==this.iframe.contentWindow.document.body.contentEditable?this.iframe.contentWindow.document.body.contentEditable=!1:this.iframe.contentWindow.document.designMode="off";this.bWYSIWYGEnabled=!1},isWYSIWYGEnabled:function(){return this.bWYSIWYGEnabled}});
nhn.husky.SE_WYSIWYGEnterKey=jindo.$Class({name:"SE_WYSIWYGEnterKey",$init:function(a){this.sLineBreaker="BR"==a?"BR":"P";this.htBrowser=jindo.$Agent().navigator();this.htBrowser.opera&&"P"==this.sLineBreaker&&(this.$ON_MSG_APP_READY=function(){});if(this.htBrowser.ie){if(this._addCursorHolder=this._addCursorHolderSpace,9>this.htBrowser.nativeVersion||9>document.documentMode)this._addExtraCursorHolder=function(){},this._addBlankTextAllSpan=function(){}}else this._addExtraCursorHolder=function(){},
this._addBlankText=function(){},this._addBlankTextAllSpan=function(){}},$ON_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["sLineBreaker",this.sLineBreaker]);this.oSelection=this.oApp.getEmptySelection();this.tmpTextNode=this.oSelection._document.createTextNode(unescape("%u00A0"));jindo.$Fn(this._onKeyDown,this).attach(this.oApp.getWYSIWYGDocument(),"keydown")},_onKeyDown:function(a){var b=a.key();b.shift||b.enter&&("BR"==this.sLineBreaker?this._insertBR(a):this._wrapBlock(a))},$ON_REGISTER_CONVERTERS:function(){this.oApp.exec("ADD_CONVERTER",
["IR_TO_DB",jindo.$Fn(this.onIrToDB,this).bind()])},onIrToDB:function(a){a=a.replace(/<br(\s[^>]*)?\/?>((?:<\/span>)?<\/p>)/gi,"&nbsp;$2");return a=a.replace(/(<p[^>]*>)(?:[\s^>]*)(<\/p>)/gi,"$1&nbsp;$2")},_addBlankText:function(a){var b=a.getNodes(),c,d,e,f;c=0;for(d=b.length;c<d;c++)if(e=b[c],!(1!==e.nodeType||"SPAN"!==e.tagName))if(!(-1<e.id.indexOf(a.HUSKY_BOOMARK_START_ID_PREFIX)||-1<e.id.indexOf(a.HUSKY_BOOMARK_END_ID_PREFIX)))if(f=e.firstChild,!f||3==f.nodeType&&nhn.husky.SE2M_Utils.isBlankTextNode(f)||
1==f.nodeType&&1==e.childNodes.length&&(-1<f.id.indexOf(a.HUSKY_BOOMARK_START_ID_PREFIX)||-1<f.id.indexOf(a.HUSKY_BOOMARK_END_ID_PREFIX)))f=a._document.createTextNode(unescape("%uFEFF")),e.appendChild(f)},_addCursorHolder:function(a){var b=a;if(""==a.innerHTML||(b=this._getStyleOnlyNode(a)))b.innerHTML="<br>";b||(b=this._getStyleNode(a));return b},_addCursorHolderSpace:function(a){this._addSpace(a);a=this._getStyleNode(a);""==a.innerHTML&&"param"!=a.nodeName.toLowerCase()&&(a.innerHTML=unescape("%uFEFF"));
return a},_wrapBlock:function(a){var b=this.oApp.getSelection(),c=b.placeStringBookmark(),d=b.getLineInfo(),e=d.oStart,d=d.oEnd;if(!e.bParentBreak||b.rxBlockContainer.test(e.oLineBreaker.tagName))if(a.stop(),b.deleteContents(),e.oNode.parentNode&&11!==e.oNode.parentNode.nodeType){a=this.oApp.getWYSIWYGDocument().createElement(this.sLineBreaker);b.moveToBookmark(c);b.setStartBefore(e.oNode);this._addBlankText(b);b.surroundContents(a);b.collapseToEnd();e=this.oApp.getWYSIWYGDocument().createElement(this.sLineBreaker);
b.setEndAfter(d.oNode);this._addBlankText(b);b.surroundContents(e);b.moveToStringBookmark(c,!0);b.collapseToEnd();b.removeStringBookmark(c);b.select();c=this._addCursorHolder(a);null!==e.lastChild&&"BR"==e.lastChild.tagName&&e.removeChild(e.lastChild);c=this._addCursorHolder(e);e.nextSibling&&"BR"==e.nextSibling.tagName&&e.parentNode.removeChild(e.nextSibling);b.selectNodeContents(c);b.collapseToStart();b.select();this.oApp.exec("CHECK_STYLE_CHANGE",[]);c=b.placeStringBookmark();setTimeout(jindo.$Fn(function(a){b.getStringBookmark(a)&&
(b.moveToStringBookmark(a),b.select(),b.removeStringBookmark(a))},this).bind(c),0);return}if(this.htBrowser.firefox)(e=b.getStringBookmark(c,!0))&&e.nextSibling&&"IFRAME"==e.nextSibling.tagName?setTimeout(jindo.$Fn(function(a){b.getStringBookmark(a)&&(b.moveToStringBookmark(a),b.select(),b.removeStringBookmark(a))},this).bind(c),0):b.removeStringBookmark(c);else if(this.htBrowser.ie){var e=b.getStringBookmark(c,!0),d=e.parentNode,f=a=!1;!e||!d?b.removeStringBookmark(c):(b.removeStringBookmark(c),
a="U"===d.tagName||null!==nhn.husky.SE2M_Utils.findAncestorByTagName("U",d),f="S"===d.tagName||"STRIKE"===d.tagName||null!==nhn.husky.SE2M_Utils.findAncestorByTagName("S",d)&&null!==nhn.husky.SE2M_Utils.findAncestorByTagName("STRIKE",d),a||f?setTimeout(jindo.$Fn(this._addTextDecorationTag,this).bind(a,f),0):setTimeout(jindo.$Fn(this._addExtraCursorHolder,this).bind(d),0))}else b.removeStringBookmark(c)},_addExtraCursorHolder:function(a){var b,c;if((a=this._getStyleOnlyNode(a))&&"SPAN"===a.tagName){for(b=
a.lastChild;b;)c=b.previousSibling,3===b.nodeType&&nhn.husky.SE2M_Utils.isBlankTextNode(b)&&b.parentNode.removeChild(b),b=c;c=a.innerHTML;if(""===c||""===c.replace(unescape("%uFEFF"),""))a.innerHTML=unescape("%uFEFF")}a=this.oApp.getSelection();var d;if(a.collapsed&&(a.fixCommonAncestorContainer(),b=a.commonAncestorContainer))if(b=a._getVeryFirstRealChild(b),3===b.nodeType&&(b=b.parentNode),b&&"SPAN"===b.tagName){c=b.innerHTML;if(""===c||""===c.replace(unescape("%uFEFF"),""))b.innerHTML=unescape("%uFEFF");
d=nhn.husky.SE2M_Utils.findAncestorByTagName("P",b);a.selectNodeContents(b);c=a.placeStringBookmark();this._addSpace(d.previousSibling);this._addSpace(d);a.moveToBookmark(c);a.selectNodeContents(b);a.collapseToStart();a.select();a.removeStringBookmark(c)}},_addSpace:function(a){var b,c,d;if(a){if(3===a.nodeType)return a.parentNode;if("P"!==a.tagName)return a;b=jindo.$Element(a).child(function(a){return 1===a.$value().nodeType&&"IMG"===a.$value().tagName},1);if(0<b.length){b=b[b.length-1].$value();
for(b=b.nextSibling;b;)c=b.nextSibling,3===b.nodeType&&("&nbsp;"===b.nodeValue||b.nodeValue===unescape("%u00A0"))&&a.removeChild(b),b=c;return a}c=b=a.firstChild;for(d=!1;b;){c=b.nextSibling;if(3===b.nodeType&&(b.nodeValue===unescape("%uFEFF")&&a.removeChild(b),!d&&("&nbsp;"===b.nodeValue||b.nodeValue===unescape("%u00A0"))))d=!0;b=c}d||(b=this.tmpTextNode.cloneNode(),a.appendChild(b));return a}},_addTextDecorationTag:function(a,b){var c,d,e=this.oApp.getSelection();if(e.collapsed){for(c=e.startContainer;c;){if(3===
c.nodeType){c=nhn.DOMFix.parentNode(c);break}if(!c.childNodes||0===c.childNodes.length){c.innerHTML=unescape("%uFEFF");break}c=c.firstChild}if(c&&!("U"===c.tagName||"S"===c.tagName||"STRIKE"===c.tagName)){var f;(""==c.innerHTML||(f=this._getStyleOnlyNode(c)))&&this._addSpace(f,c);a&&(d=e._document.createElement("U"),c.appendChild(d),c=d);b&&(d=e._document.createElement("STRIKE"),c.appendChild(d));d.innerHTML=unescape("%uFEFF");e.selectNodeContents(d);e.collapseToEnd();e.select()}}},_addBlankTextAllSpan:function(a){var b,
c,d;if(a){a=jindo.$Element(a).child(function(a){return 1===a.$value().nodeType&&"SPAN"===a.$value().tagName});b=a.length;for(d=0;d<b;d++)c=a[d].html(),""===c&&a[d].html(unescape("%uFEFF"))}},_getStyleNode:function(a){for(;a.firstChild&&this.oSelection._isBlankTextNode(a.firstChild);)a.removeChild(a.firstChild);var b=a.firstChild;return!b||3===b.nodeType||1===b.nodeType&&("IMG"==b.tagName||"BR"==b.tagName||"HR"==b.tagName||"IFRAME"==b.tagName)?a:this._getStyleNode(a.firstChild)},_getStyleOnlyNode:function(a){if(!a||
!a.insertBefore||"IMG"==a.tagName||"BR"==a.tagName||"HR"==a.tagName||"IFRAME"==a.tagName)return null;for(;a.firstChild&&this.oSelection._isBlankTextNode(a.firstChild);)a.removeChild(a.firstChild);return 1<a.childNodes.length?null:!a.firstChild?a:3===a.firstChild.nodeType?nhn.husky.SE2M_Utils.isBlankTextNode(a.firstChild)?a:null:this._getStyleOnlyNode(a.firstChild)},_insertBR:function(a){a.stop();a=this.oApp.getSelection();var b=this.oApp.getWYSIWYGDocument().createElement("BR");a.insertNode(b);a.selectNode(b);
a.collapseToEnd();if(!this.htBrowser.ie){var c=a.getLineInfo().oEnd;if(c.bParentBreak){for(;c.oNode&&3==c.oNode.nodeType&&""==c.oNode.nodeValue;)c.oNode=c.oNode.previousSibling;var d=1;if(c.oNode==b||c.oNode.nextSibling==b)d=0;0===d&&(a.pasteHTML("<br type='_moz'/>"),a.collapseToEnd())}}a.insertNode(this.oApp.getWYSIWYGDocument().createTextNode(""));a.select()}});
nhn.ColorPicker=jindo.$Class({elem:null,huePanel:null,canvasType:"Canvas",_hsvColor:null,$init:function(a,b){this.elem=jindo.$Element(a).empty();this.huePanel=null;this.cursor=jindo.$Element("<div>").css("overflow","hidden");this.canvasType=jindo.$(a).filters?"Filter":jindo.$("<canvas>").getContext?"Canvas":null;if(!this.canvasType)return!1;this.option({huePanel:null,huePanelType:"horizontal"});this.option(b);this.option("huePanel")&&(this.huePanel=jindo.$Element(this.option("huePanel")).empty());
this._hsvColor=this._hsv(0,100,100);for(var c in this)/^_on[A-Z][a-z]+[A-Z][a-z]+$/.test(c)&&(this[c+"Fn"]=jindo.$Fn(this[c],this));this._onDownColorFn.attach(this.elem,"mousedown");this.huePanel&&this._onDownHueFn.attach(this.huePanel,"mousedown");this.paint()},rgb:function(a){this.hsv(this._rgb2hsv(a.r,a.g,a.b))},hsv:function(a){if("undefined"==typeof a)return this._hsvColor;var b=null,c=this.elem.width(),d=this.elem.height(),e=this.cursor.width(),f=this.cursor.height(),g=b=0;this.huePanel?(b=this._hsv2rgb(a.h,
100,100),this.elem.css("background","#"+this._rgb2hex(b.r,b.g,b.b)),b=a.s/100*c,g=(100-a.v)/100*d):(b=c/2,a.v>a.s?(a.v=100,b*=a.s/100):(a.s=100,b=(100-a.v)/100*b+b),g=a.h/360*d);b=Math.max(Math.min(b-1,c-e),1);g=Math.max(Math.min(g-1,d-f),1);this.cursor.css({left:b+"px",top:g+"px"});this._hsvColor=a;b=this._hsv2rgb(a.h,a.s,a.v);this.fireEvent("colorchange",{type:"colorchange",element:this,currentElement:this,rgbColor:b,hexColor:"#"+this._rgb2hex(b.r,b.g,b.b),hsvColor:a})},paint:function(){if(this.huePanel)this["_paintColWith"+
this.canvasType](),this["_paintHueWith"+this.canvasType]();else this["_paintOneWith"+this.canvasType]();this.cursor.appendTo(this.elem);this.cursor.css({position:"absolute",top:"1px",left:"1px",background:"white",border:"1px solid black"}).width(3).height(3);this.hsv(this._hsvColor)},_paintColWithFilter:function(){jindo.$Element("<div>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%",filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType=1,StartColorStr='#FFFFFFFF',EndColorStr='#00FFFFFF')"}).appendTo(this.elem);
jindo.$Element("<div>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%",filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType=0,StartColorStr='#00000000',EndColorStr='#FF000000')"}).appendTo(this.elem)},_paintColWithCanvas:function(){var a=jindo.$Element("<canvas>").css({width:"100%",height:"100%"});a.appendTo(this.elem.empty());var b=a.attr("width",a.width()).attr("height",a.height()).$value().getContext("2d"),c=null,d=a.width(),a=a.height(),c=b.createLinearGradient(0,
0,d,0);c.addColorStop(0,"rgba(255,255,255,1)");c.addColorStop(1,"rgba(255,255,255,0)");b.fillStyle=c;b.fillRect(0,0,d,a);c=b.createLinearGradient(0,0,0,a);c.addColorStop(0,"rgba(0,0,0,0)");c.addColorStop(1,"rgba(0,0,0,1)");b.fillStyle=c;b.fillRect(0,0,d,a)},_paintOneWithFilter:function(){for(var a,b,c,d,e=this.elem.height(),f=1;7>f;f++)a=Math.floor((f-1)/6*e),b=Math.floor(f/6*e),c=this._hsv2rgb(360*((f-1)/6),100,100),d=this._hsv2rgb(360*(f/6),100,100),c="#FF"+this._rgb2hex(c.r,c.g,c.b),d="#FF"+this._rgb2hex(d.r,
d.g,d.b),jindo.$Element("<div>").css({position:"absolute",left:0,width:"100%",top:a+"px",height:b-a+"px",filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType=0,StartColorStr='"+c+"',EndColorStr='"+d+"')"}).appendTo(this.elem);jindo.$Element("<div>").css({position:"absolute",top:0,left:0,width:"50%",height:"100%",filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType=1,StartColorStr='#FFFFFFFF',EndColorStr='#00FFFFFF')"}).appendTo(this.elem);jindo.$Element("<div>").css({position:"absolute",
top:0,right:0,width:"50%",height:"100%",filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType=1,StartColorStr='#00000000',EndColorStr='#FF000000')"}).appendTo(this.elem)},_paintOneWithCanvas:function(){var a={r:0,g:0,b:0},a=jindo.$Element("<canvas>").css({width:"100%",height:"100%"});a.appendTo(this.elem.empty());for(var b=a.attr("width",a.width()).attr("height",a.height()).$value().getContext("2d"),c=a.width(),d=a.height(),e=b.createLinearGradient(0,0,0,d),f=0;7>f;f++)a=this._hsv2rgb(360*
(f/6),100,100),e.addColorStop(f/6,"rgb("+a.join(",")+")");b.fillStyle=e;b.fillRect(0,0,c,d);e=b.createLinearGradient(0,0,c,0);e.addColorStop(0,"rgba(255,255,255,1)");e.addColorStop(0.5,"rgba(255,255,255,0)");e.addColorStop(0.5,"rgba(0,0,0,0)");e.addColorStop(1,"rgba(0,0,0,1)");b.fillStyle=e;b.fillRect(0,0,c,d)},_paintHueWithFilter:function(){var a,b,c,d,e="vertical"==this.option().huePanelType,f=this.huePanel.width(),g=this.huePanel.height();d=null;a=parseInt(this.huePanel.css("borderWidth"),10);
isNaN(a)&&(a=0);for(var f=f-2*a,h=1;7>h;h++)a=Math.floor((h-1)/6*(e?g:f)),b=Math.floor(h/6*(e?g:f)),c=this._hsv2rgb(360*((h-1)/6),100,100),d=this._hsv2rgb(360*(h/6),100,100),c="#FF"+this._rgb2hex(c.r,c.g,c.b),d="#FF"+this._rgb2hex(d.r,d.g,d.b),d=jindo.$Element("<div>").css({position:"absolute",filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType="+(e?0:1)+",StartColorStr='"+c+"',EndColorStr='"+d+"')"}),b=b-a+1,d.appendTo(this.huePanel),d.css(e?"left":"top",0).css(e?"width":"height","100%"),
d.css(e?"top":"left",a+"px").css(e?"height":"width",b+"px")},_paintHueWithCanvas:function(){var a;a="vertical"==this.option().huePanelType;var b=jindo.$Element("<canvas>").css({width:"100%",height:"100%"});b.appendTo(this.huePanel.empty());for(var c=b.attr("width",b.width()).attr("height",b.height()).$value().getContext("2d"),d=c.createLinearGradient(0,0,a?0:b.width(),a?b.height():0),e=0;7>e;e++)a=this._hsv2rgb(360*(e/6),100,100),d.addColorStop(e/6,"rgb("+a.join(",")+")");c.fillStyle=d;c.fillRect(0,
0,b.width(),b.height())},_rgb2hsv:function(a,b,c){var d=0,e=0,f=Math.max(a,b,c),e=Math.min(a,b,c),g=f-e;if(e=f?g/f:0)a==f?d=60*(b-c)/g:b==f?d=120+60*(c-a)/g:c==f&&(d=240+60*(a-b)/g),0>d&&(d+=360);d=Math.floor(d);e=Math.floor(100*e);f=Math.floor(100*(f/255));return this._hsv(d,e,f)},_hsv2rgb:function(a,b,c){a=a%360/60;b/=100;c/=100;var d=0,e=0,f=0,g=Math.floor(a),h=a-g;a=c*(1-b);var j=c*(1-b*h);b=c*(1-b*(1-h));switch(g){case 0:d=c;e=b;f=a;break;case 1:d=j;e=c;f=a;break;case 2:d=a;e=c;f=b;break;case 3:d=
a;e=j;f=c;break;case 4:d=b;e=a;f=c;break;case 5:d=c,e=a,f=j}d=Math.floor(255*d);e=Math.floor(255*e);f=Math.floor(255*f);return this._rgb(d,e,f)},_rgb2hex:function(a,b,c){a=a.toString(16);1==a.length&&(a="0"+a);b=b.toString(16);1==b.length&&(b="0"+b);c=c.toString(16);1==c.length&&(c="0"+c);return a+b+c},_hex2rgb:function(a){a=a.match(/#?([0-9a-f]{6}|[0-9a-f]{3})/i);a=3==a[1].length?a[1].match(/./g).filter(function(a){return a+a}):a[1].match(/../g);return{r:Number("0x"+a[0]),g:Number("0x"+a[1]),b:Number("0x"+
a[2])}},_rgb:function(a,b,c){var d=[a,b,c];d.r=a;d.g=b;d.b=c;return d},_hsv:function(a,b,c){var d=[a,b,c];d.h=a;d.s=b;d.v=c;return d},_onDownColor:function(a){if(!a.mouse().left)return!1;var b=a.pos();this._colPagePos=[b.pageX,b.pageY];this._colLayerPos=[b.layerX,b.layerY];this._onUpColorFn.attach(document,"mouseup");this._onMoveColorFn.attach(document,"mousemove");this._onMoveColor(a)},_onUpColor:function(){this._onUpColorFn.detach(document,"mouseup");this._onMoveColorFn.detach(document,"mousemove")},
_onMoveColor:function(a){var b=this._hsvColor,c=a.pos(),d=this._colLayerPos[0]+(c.pageX-this._colPagePos[0]),e=this._colLayerPos[1]+(c.pageY-this._colPagePos[1]),c=this.elem.width(),f=this.elem.height(),d=Math.max(Math.min(d,c),0),e=Math.max(Math.min(e,f),0);this.huePanel?(b.s=b[1]=100*(d/c),b.v=b[2]=100*((f-e)/f)):(b.h=360*(e/f),e=c/2,d<e?(b.s=100*(d/e),b.v=100):(b.s=100,b.v=100*((c-d)/e)));this.hsv(b);a.stop()},_onDownHue:function(a){if(!a.mouse().left)return!1;var b=a.pos();this._huePagePos=[b.pageX,
b.pageY];this._hueLayerPos=[b.layerX,b.layerY];this._onUpHueFn.attach(document,"mouseup");this._onMoveHueFn.attach(document,"mousemove");this._onMoveHue(a)},_onUpHue:function(){this._onUpHueFn.detach(document,"mouseup");this._onMoveHueFn.detach(document,"mousemove")},_onMoveHue:function(a){var b=this._hsvColor,c=a.pos(),d=0,e=0,d=this._hueLayerPos[0]+(c.pageX-this._huePagePos[0]),c=this._hueLayerPos[1]+(c.pageY-this._huePagePos[1]);"vertical"==this.option().huePanelType?(d=c,e=this.huePanel.height()):
e=this.huePanel.width();b.h=b[0]=360*(Math.min(Math.max(d,0),e)/e)%360;this.hsv(b);a.stop()}}).extend(jindo.Component);
nhn.husky.SE2M_Accessibility=jindo.$Class({name:"SE2M_Accessibility",htAccessOption:nhn.husky.SE2M_Configuration.SE2M_Accessibility,$init:function(a,b,c){this._assignHTMLElements(a);b&&(this.sLang=b);c&&(this.sType=c)},_assignHTMLElements:function(a){this.elHelpPopupLayer=jindo.$$.getSingle("DIV.se2_accessibility",a);this.welHelpPopupLayer=jindo.$Element(this.elHelpPopupLayer);this.oCloseButton=jindo.$$.getSingle("BUTTON.se2_close",this.elHelpPopupLayer);this.oCloseButton2=jindo.$$.getSingle("BUTTON.se2_close2",
this.elHelpPopupLayer);this.nDefaultTop=150},$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_HOTKEY",["alt+F10","FOCUS_TOOLBAR_AREA",[]]);this.oApp.exec("REGISTER_HOTKEY",["alt+COMMA","FOCUS_BEFORE_ELEMENT",[]]);this.oApp.exec("REGISTER_HOTKEY",["alt+PERIOD","FOCUS_NEXT_ELEMENT",[]]);("basic"==this.sType||"light"==this.sType)&&"ko_KR"!=this.sLang||(this.oApp.exec("REGISTER_HOTKEY",["alt+0","OPEN_HELP_POPUP",[]]),this.oApp.exec("REGISTER_HOTKEY",["esc","CLOSE_HELP_POPUP",[]]))},$LOCAL_BEFORE_FIRST:function(){jindo.$Fn(jindo.$Fn(this.oApp.exec,
this.oApp).bind("CLOSE_HELP_POPUP",[this.oCloseButton]),this).attach(this.oCloseButton,"click");jindo.$Fn(jindo.$Fn(this.oApp.exec,this.oApp).bind("CLOSE_HELP_POPUP",[this.oCloseButton2]),this).attach(this.oCloseButton2,"click");var a=this.oApp.getWYSIWYGWindow().frameElement;this.htOffsetPos=jindo.$Element(a).offset();this.nEditorWidth=a.offsetWidth;this.htInitialPos=this.welHelpPopupLayer.offset();this.oApp.oUtils.getScrollXY();this.nLayerWidth=590;this.nLayerHeight=480;this.htTopLeftCorner={x:parseInt(this.htOffsetPos.left,
10),y:parseInt(this.htOffsetPos.top,10)}},$ON_FOCUS_NEXT_ELEMENT:function(){if(this.htAccessOption.sNextElementId){var a=this.htAccessOption.sNextElementId;document.getElementById(a)&&document.getElementById(a).focus()}},$ON_FOCUS_BEFORE_ELEMENT:function(){if(this.htAccessOption.sBeforeElementId){var a=this.htAccessOption.sBeforeElementId;document.getElementById(a)&&document.getElementById(a).focus()}},$ON_FOCUS_TOOLBAR_AREA:function(){this.oButton=jindo.$$.getSingle("BUTTON.se2_font_family",this.oAppContainer);
jindo.$Agent().navigator().ie&&7==jindo.$Agent().navigator().version&&window.focus();this.oButton.focus()},$ON_OPEN_HELP_POPUP:function(){this.oApp.exec("DISABLE_ALL_UI",[{aExceptions:["se2_accessibility"]}]);this.oApp.exec("SHOW_EDITING_AREA_COVER");this.oApp.exec("SELECT_UI",["se2_accessibility"]);this.elHelpPopupLayer.style.top=this.nDefaultTop+"px";this.nCalcX=this.htTopLeftCorner.x+this.oApp.getEditingAreaWidth()-this.nLayerWidth;this.nCalcY=this.htTopLeftCorner.y;this.oApp.exec("SHOW_DIALOG_LAYER",
[this.elHelpPopupLayer,{elHandle:this.elTitle,nMinX:this.htTopLeftCorner.x+0,nMinY:this.nDefaultTop+77,nMaxX:this.nCalcX,nMaxY:this.nCalcY}]);this.welHelpPopupLayer.offset(this.nCalcY,this.nCalcX/2);jindo.$Agent().navigator().ie&&window.focus();var a=this;setTimeout(function(){try{a.oCloseButton2.focus()}catch(b){}},500)},$ON_CLOSE_HELP_POPUP:function(){this.oApp.exec("ENABLE_ALL_UI");this.oApp.exec("DESELECT_UI",["helpPopup"]);this.oApp.exec("HIDE_ALL_DIALOG_LAYER",[]);this.oApp.exec("HIDE_EDITING_AREA_COVER");
this.oApp.exec("FOCUS")}});
nhn.husky.SE2M_BGColor=jindo.$Class({name:"SE2M_BGColor",rxColorPattern:/^#?[0-9a-fA-F]{6}$|^rgb\(\d+, ?\d+, ?\d+\)$/i,$init:function(a){this._assignHTMLElements(a)},_assignHTMLElements:function(a){this.elLastUsed=jindo.$$.getSingle("SPAN.husky_se2m_BGColor_lastUsed",a);this.elDropdownLayer=jindo.$$.getSingle("DIV.husky_se2m_BGColor_layer",a);this.elBGColorList=jindo.$$.getSingle("UL.husky_se2m_bgcolor_list",a);this.elPaletteHolder=jindo.$$.getSingle("DIV.husky_se2m_BGColor_paletteHolder",this.elDropdownLayer);
this._setLastUsedBGColor("#777777")},$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_UI_EVENT",["BGColorA","click","APPLY_LAST_USED_BGCOLOR"]);this.oApp.exec("REGISTER_UI_EVENT",["BGColorB","click","TOGGLE_BGCOLOR_LAYER"]);this.oApp.registerBrowserEvent(this.elBGColorList,"click","EVENT_APPLY_BGCOLOR",[])},$ON_TOGGLE_BGCOLOR_LAYER:function(){this.oApp.exec("TOGGLE_TOOLBAR_ACTIVE_LAYER",[this.elDropdownLayer,null,"BGCOLOR_LAYER_SHOWN",[],"BGCOLOR_LAYER_HIDDEN",[]]);this.oApp.exec("MSG_NOTIFY_CLICKCR",
["bgcolor"])},$ON_BGCOLOR_LAYER_SHOWN:function(){this.oApp.exec("SELECT_UI",["BGColorB"]);this.oApp.exec("SHOW_COLOR_PALETTE",["APPLY_BGCOLOR",this.elPaletteHolder])},$ON_BGCOLOR_LAYER_HIDDEN:function(){this.oApp.exec("DESELECT_UI",["BGColorB"]);this.oApp.exec("RESET_COLOR_PALETTE",[])},$ON_EVENT_APPLY_BGCOLOR:function(a){for(a=a.element;"SPAN"==a.tagName;)a=a.parentNode;"BUTTON"==a.tagName&&this.oApp.exec("APPLY_BGCOLOR",[a.style.backgroundColor,a.style.color])},$ON_APPLY_LAST_USED_BGCOLOR:function(){this.oApp.exec("APPLY_BGCOLOR",
[this.sLastUsedColor]);this.oApp.exec("MSG_NOTIFY_CLICKCR",["bgcolor"])},$ON_APPLY_BGCOLOR:function(a,b){if(this.rxColorPattern.test(a)){this._setLastUsedBGColor(a);var c={backgroundColor:a};b&&(c.color=b);this.oApp.exec("SET_WYSIWYG_STYLE",[c]);this.oApp.exec("HIDE_ACTIVE_LAYER")}else alert(this.oApp.$MSG("SE_Color.invalidColorCode"))},_setLastUsedBGColor:function(a){this.sLastUsedColor=a;this.elLastUsed.style.backgroundColor=this.sLastUsedColor}});
nhn.husky.SE2M_ColorPalette=jindo.$Class({name:"SE2M_ColorPalette",elAppContainer:null,bUseRecentColor:!1,nLimitRecentColor:17,rxRGBColorPattern:/rgb\((\d+), ?(\d+), ?(\d+)\)/i,rxColorPattern:/^#?[0-9a-fA-F]{6}$|^rgb\(\d+, ?\d+, ?\d+\)$/i,aRecentColor:[],URL_COLOR_LIST:"",URL_COLOR_ADD:"",URL_COLOR_UPDATE:"",sRecentColorTemp:'<li><button type="button" title="{RGB_CODE}" style="background:{RGB_CODE}"><span><span>{RGB_CODE}</span></span></button></li>',$init:function(a){this.elAppContainer=a},$ON_MSG_APP_READY:function(){},
_assignHTMLElements:function(a){var b=nhn.husky.SE2M_Configuration.SE2M_ColorPalette;b&&(this.bUseRecentColor=b.bUseRecentColor||!1,this.URL_COLOR_ADD=b.addColorURL||"http://api.se2.naver.com/1/colortable/TextAdd.nhn",this.URL_COLOR_UPDATE=b.updateColorURL||"http://api.se2.naver.com/1/colortable/TextUpdate.nhn",this.URL_COLOR_LIST=b.colorListURL||"http://api.se2.naver.com/1/colortable/TextList.nhn");this.elColorPaletteLayer=jindo.$$.getSingle("DIV.husky_se2m_color_palette",a);this.elColorPaletteLayerColorPicker=
jindo.$$.getSingle("DIV.husky_se2m_color_palette_colorpicker",this.elColorPaletteLayer);this.elRecentColorForm=jindo.$$.getSingle("form",this.elColorPaletteLayerColorPicker);this.elBackgroundColor=jindo.$$.getSingle("ul.husky_se2m_bgcolor_list",a);this.elInputColorCode=jindo.$$.getSingle("INPUT.husky_se2m_cp_colorcode",this.elColorPaletteLayerColorPicker);this.elPreview=jindo.$$.getSingle("SPAN.husky_se2m_cp_preview",this.elColorPaletteLayerColorPicker);this.elCP_ColPanel=jindo.$$.getSingle("DIV.husky_se2m_cp_colpanel",
this.elColorPaletteLayerColorPicker);this.elCP_HuePanel=jindo.$$.getSingle("DIV.husky_se2m_cp_huepanel",this.elColorPaletteLayerColorPicker);this.elCP_ColPanel.style.position="relative";this.elCP_HuePanel.style.position="relative";this.elColorPaletteLayerColorPicker.style.display="none";this.elMoreBtn=jindo.$$.getSingle("BUTTON.husky_se2m_color_palette_more_btn",this.elColorPaletteLayer);this.welMoreBtn=jindo.$Element(this.elMoreBtn);this.elOkBtn=jindo.$$.getSingle("BUTTON.husky_se2m_color_palette_ok_btn",
this.elColorPaletteLayer);this.bUseRecentColor&&(this.elColorPaletteLayerRecent=jindo.$$.getSingle("DIV.husky_se2m_color_palette_recent",this.elColorPaletteLayer),this.elRecentColor=jindo.$$.getSingle("ul.se2_pick_color",this.elColorPaletteLayerRecent),this.elDummyNode=jindo.$$.getSingle("ul.se2_pick_color > li",this.elColorPaletteLayerRecent)||null,this.elColorPaletteLayerRecent.style.display="none")},$LOCAL_BEFORE_FIRST:function(){this._assignHTMLElements(this.elAppContainer);this.elDummyNode&&
jindo.$Element(jindo.$$.getSingle("ul.se2_pick_color > li",this.elColorPaletteLayerRecent)).leave();this.bUseRecentColor&&this._ajaxRecentColor(this._ajaxRecentColorCallback);this.oApp.registerBrowserEvent(this.elColorPaletteLayer,"click","EVENT_CLICK_COLOR_PALETTE");this.oApp.registerBrowserEvent(this.elBackgroundColor,"mouseover","EVENT_MOUSEOVER_COLOR_PALETTE");this.oApp.registerBrowserEvent(this.elColorPaletteLayer,"mouseover","EVENT_MOUSEOVER_COLOR_PALETTE");this.oApp.registerBrowserEvent(this.elBackgroundColor,
"mouseout","EVENT_MOUSEOUT_COLOR_PALETTE");this.oApp.registerBrowserEvent(this.elColorPaletteLayer,"mouseout","EVENT_MOUSEOUT_COLOR_PALETTE")},$ON_EVENT_MOUSEOVER_COLOR_PALETTE:function(a){for(a=a.element;a&&a.tagName&&"li"!=a.tagName.toLowerCase();)a=a.parentNode;a&&a.nodeType&&9!=a.nodeType&&(""==a.className||!a.className||"undefined"==typeof a.className)&&jindo.$Element(a).addClass("hover")},$ON_EVENT_MOUSEOUT_COLOR_PALETTE:function(a){for(a=a.element;a&&a.tagName&&"li"!=a.tagName.toLowerCase();)a=
a.parentNode;a&&"hover"==a.className&&jindo.$Element(a).removeClass("hover")},$ON_EVENT_CLICK_COLOR_PALETTE:function(a){for(a=a.element;"SPAN"==a.tagName;)a=a.parentNode;a.tagName&&"BUTTON"==a.tagName&&(a==this.elMoreBtn?this.oApp.exec("TOGGLE_COLOR_PICKER"):this.oApp.exec("APPLY_COLOR",[a]))},$ON_APPLY_COLOR:function(a){var b=this.elInputColorCode.value,c=null;-1==b.indexOf("#")&&(b="#"+b,this.elInputColorCode.value=b);a==this.elOkBtn?this._verifyColorCode(b)?this.oApp.exec("COLOR_PALETTE_APPLY_COLOR",
[b,!0]):(this.elInputColorCode.value="",alert(this.oApp.$MSG("SE_Color.invalidColorCode")),this.elInputColorCode.focus()):(c=jindo.$Element(a.parentNode.parentNode.parentNode),b=a.title,c.hasClass("husky_se2m_color_palette")?this.oApp.exec("COLOR_PALETTE_APPLY_COLOR",[b,!1]):c.hasClass("husky_se2m_color_palette_recent")&&this.oApp.exec("COLOR_PALETTE_APPLY_COLOR",[b,!0]))},$ON_RESET_COLOR_PALETTE:function(){this._initColor()},$ON_TOGGLE_COLOR_PICKER:function(){"none"==this.elColorPaletteLayerColorPicker.style.display?
this.oApp.exec("SHOW_COLOR_PICKER"):this.oApp.exec("HIDE_COLOR_PICKER")},$ON_SHOW_COLOR_PICKER:function(){this.elColorPaletteLayerColorPicker.style.display="";this.cpp=new nhn.ColorPicker(this.elCP_ColPanel,{huePanel:this.elCP_HuePanel});var a=jindo.$Fn(function(a){this.elPreview.style.backgroundColor=a.hexColor;this.elInputColorCode.value=a.hexColor},this).bind();this.cpp.attach("colorchange",a);this.$ON_SHOW_COLOR_PICKER=this._showColorPickerMain;this.$ON_SHOW_COLOR_PICKER()},$ON_HIDE_COLOR_PICKER:function(){this.elColorPaletteLayerColorPicker.style.display=
"none";this.welMoreBtn.addClass("se2_view_more");this.welMoreBtn.removeClass("se2_view_more2")},$ON_SHOW_COLOR_PALETTE:function(a,b){this.sCallbackCmd=a;this.oLayerContainer=b;this.oLayerContainer.insertBefore(this.elColorPaletteLayer,null);this.elColorPaletteLayer.style.display="block";this.oApp.delayedExec("POSITION_TOOLBAR_LAYER",[this.elColorPaletteLayer.parentNode.parentNode],0)},$ON_HIDE_COLOR_PALETTE:function(){this.elColorPaletteLayer.style.display="none"},$ON_COLOR_PALETTE_APPLY_COLOR:function(a,
b){b=!b?!1:b;a=this._getHexColorCode(a);this.bUseRecentColor&&b&&this.oApp.exec("ADD_RECENT_COLOR",[a]);this.oApp.exec(this.sCallbackCmd,[a])},$ON_EVENT_MOUSEUP_COLOR_PALETTE:function(a){a=a.element;a.style.backgroundColor&&this.oApp.exec("COLOR_PALETTE_APPLY_COLOR",[a.style.backgroundColor,!1])},$ON_ADD_RECENT_COLOR:function(a){var b=0===this.aRecentColor.length;this._addRecentColor(a);b?this._ajaxAddColor():this._ajaxUpdateColor();this._redrawRecentColorElement()},_verifyColorCode:function(a){return this.rxColorPattern.test(a)},
_getHexColorCode:function(a){if(this.rxRGBColorPattern.test(a)){var b=function(a){a=parseInt(a,10).toString(16);2>a.length&&(a="0"+a);return a.toUpperCase()};a=b(RegExp.$1);var c=b(RegExp.$2),b=b(RegExp.$3);a="#"+a+c+b}return a},_addRecentColor:function(a){var b=jindo.$A(this.aRecentColor),b=b.refuse(a);b.unshift(a);b.length()>this.nLimitRecentColor&&b.length(this.nLimitRecentColor);this.aRecentColor=b.$value()},_redrawRecentColorElement:function(){var a=[],b=this.aRecentColor.length,c;if(0!==b){for(c=
0;c<b;c++)a.push(this.sRecentColorTemp.replace(/\{RGB_CODE\}/gi,this.aRecentColor[c]));this.elRecentColor.innerHTML=a.join("");this.elColorPaletteLayerRecent.style.display="block"}},_ajaxAddColor:function(){jindo.$Ajax(this.URL_COLOR_ADD,{type:"jsonp",onload:function(){}}).request({text_key:"colortable",text_data:this.aRecentColor.join(",")})},_ajaxUpdateColor:function(){jindo.$Ajax(this.URL_COLOR_UPDATE,{type:"jsonp",onload:function(){}}).request({text_key:"colortable",text_data:this.aRecentColor.join(",")})},
_showColorPickerMain:function(){this._initColor();this.elColorPaletteLayerColorPicker.style.display="";this.welMoreBtn.removeClass("se2_view_more");this.welMoreBtn.addClass("se2_view_more2")},_initColor:function(){this.cpp&&this.cpp.rgb({r:0,g:0,b:0});this.elPreview.style.backgroundColor="#000000";this.elInputColorCode.value="#000000";this.oApp.exec("HIDE_COLOR_PICKER")},_ajaxRecentColor:function(a){jindo.$Ajax(this.URL_COLOR_LIST,{type:"jsonp",onload:jindo.$Fn(a,this).bind()}).request()},_ajaxRecentColorCallback:function(a){a=
a.json().result;var b,c;if(a&&!a.error){a=jindo.$A(a).filter(this._verifyColorCode,this);a.length()>this.nLimitRecentColor&&a.length(this.nLimitRecentColor);a=a.reverse().$value();b=0;for(c=a.length;b<c;b++)this._addRecentColor(this._getHexColorCode(a[b]));this._redrawRecentColorElement()}}}).extend(jindo.Component);
nhn.husky.SE2M_ExecCommand=jindo.$Class({name:"SE2M_ExecCommand",oEditingArea:null,oUndoOption:null,$init:function(a){this.oEditingArea=a;this.nIndentSpacing=40;this.rxClickCr=RegExp("^bold|underline|italic|strikethrough|justifyleft|justifycenter|justifyright|justifyfull|insertorderedlist|insertunorderedlist|outdent|indent$","i")},$BEFORE_MSG_APP_READY:function(){this.oEditingArea&&"IFRAME"==this.oEditingArea.tagName&&(this.oEditingArea=this.oEditingArea.contentWindow.document)},$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_HOTKEY",
["ctrl+b","EXECCOMMAND",["bold",!1,!1]]);this.oApp.exec("REGISTER_HOTKEY",["ctrl+u","EXECCOMMAND",["underline",!1,!1]]);this.oApp.exec("REGISTER_HOTKEY",["ctrl+i","EXECCOMMAND",["italic",!1,!1]]);this.oApp.exec("REGISTER_HOTKEY",["ctrl+d","EXECCOMMAND",["strikethrough",!1,!1]]);this.oApp.exec("REGISTER_HOTKEY",["tab","INDENT"]);this.oApp.exec("REGISTER_HOTKEY",["shift+tab","OUTDENT"]);this.oApp.exec("REGISTER_UI_EVENT",["bold","click","EXECCOMMAND",["bold",!1,!1]]);this.oApp.exec("REGISTER_UI_EVENT",
["underline","click","EXECCOMMAND",["underline",!1,!1]]);this.oApp.exec("REGISTER_UI_EVENT",["italic","click","EXECCOMMAND",["italic",!1,!1]]);this.oApp.exec("REGISTER_UI_EVENT",["lineThrough","click","EXECCOMMAND",["strikethrough",!1,!1]]);this.oApp.exec("REGISTER_UI_EVENT",["superscript","click","EXECCOMMAND",["superscript",!1,!1]]);this.oApp.exec("REGISTER_UI_EVENT",["subscript","click","EXECCOMMAND",["subscript",!1,!1]]);this.oApp.exec("REGISTER_UI_EVENT",["justifyleft","click","EXECCOMMAND",
["justifyleft",!1,!1]]);this.oApp.exec("REGISTER_UI_EVENT",["justifycenter","click","EXECCOMMAND",["justifycenter",!1,!1]]);this.oApp.exec("REGISTER_UI_EVENT",["justifyright","click","EXECCOMMAND",["justifyright",!1,!1]]);this.oApp.exec("REGISTER_UI_EVENT",["justifyfull","click","EXECCOMMAND",["justifyfull",!1,!1]]);this.oApp.exec("REGISTER_UI_EVENT",["orderedlist","click","EXECCOMMAND",["insertorderedlist",!1,!1]]);this.oApp.exec("REGISTER_UI_EVENT",["unorderedlist","click","EXECCOMMAND",["insertunorderedlist",
!1,!1]]);this.oApp.exec("REGISTER_UI_EVENT",["outdent","click","EXECCOMMAND",["outdent",!1,!1]]);this.oApp.exec("REGISTER_UI_EVENT",["indent","click","EXECCOMMAND",["indent",!1,!1]]);this.oNavigator=jindo.$Agent().navigator();!this.oNavigator.safari&&!this.oNavigator.chrome&&(this._getDocumentBR=function(){},this._fixDocumentBR=function(){});this.oNavigator.ie||(this._fixCorruptedBlockQuote=function(){},this.oNavigator.chrome||(this._insertBlankLine=function(){}));this.oNavigator.firefox||(this._extendBlock=
function(){})},$ON_INDENT:function(){this.oApp.delayedExec("EXECCOMMAND",["indent",!1,!1],0)},$ON_OUTDENT:function(){this.oApp.delayedExec("EXECCOMMAND",["outdent",!1,!1],0)},$BEFORE_EXECCOMMAND:function(a,b,c,d){this.oApp.exec("FOCUS");this._bOnlyCursorChanged=!1;c=this.oApp.getSelection();/^insertorderedlist|insertunorderedlist$/i.test(a)&&this._getDocumentBR();/^justify*/i.test(a)&&this._removeSpanAlign();a.match(/^bold|underline|italic|strikethrough|superscript|subscript$/i)&&(this.oUndoOption=
{bMustBlockElement:!0},nhn.CurrentSelection.isCollapsed()&&(this._bOnlyCursorChanged=!0,this.oNavigator.ie&&("BODY"==c.startContainer.tagName&&0===c.startOffset)&&(b=this.oApp.getWYSIWYGDocument().createElement("SPAN"),b.innerHTML=unescape("%uFEFF"),c.insertNode(b),c.select())));if("indent"==a||"outdent"==a)d||(d={}),d.bDontAddUndoHistory=!0;if((!d||!d.bDontAddUndoHistory)&&!this._bOnlyCursorChanged){if(/^justify*/i.test(a))this.oUndoOption={sSaveTarget:"BODY"};else if("insertorderedlist"===a||"insertunorderedlist"===
a)this.oUndoOption={bMustBlockContainer:!0};this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",[a,this.oUndoOption])}this.oNavigator.ie&&"Control"===this.oApp.getWYSIWYGDocument().selection.type&&(c=this.oApp.getSelection(),c.select());("insertorderedlist"==a||"insertunorderedlist"==a)&&this._insertBlankLine()},$ON_EXECCOMMAND:function(a,b,c){var d=!1,d={},e=this.oApp.getSelection();b=""==b||b?b:!1;c=""==c||c?c:!1;this.oApp.exec("IS_SELECTED_TD_BLOCK",["bIsSelectedTd",d]);if(d=d.bIsSelectedTd)"indent"==a?
this.oApp.exec("SET_LINE_BLOCK_STYLE",[null,jindo.$Fn(this._indentMargin,this).bind()]):"outdent"==a?this.oApp.exec("SET_LINE_BLOCK_STYLE",[null,jindo.$Fn(this._outdentMargin,this).bind()]):this._setBlockExecCommand(a,b,c);else switch(a){case "indent":case "outdent":this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",[a]);b=e.placeStringBookmark();"indent"===a?this.oApp.exec("SET_LINE_STYLE",[null,jindo.$Fn(this._indentMargin,this).bind(),{bDoNotSelect:!0,bDontAddUndoHistory:!0}]):this.oApp.exec("SET_LINE_STYLE",
[null,jindo.$Fn(this._outdentMargin,this).bind(),{bDoNotSelect:!0,bDontAddUndoHistory:!0}]);e.moveToStringBookmark(b);e.select();e.removeStringBookmark(b);setTimeout(jindo.$Fn(function(a){this.oApp.exec("RECORD_UNDO_AFTER_ACTION",[a])},this).bind(a),25);break;case "justifyleft":case "justifycenter":case "justifyright":case "justifyfull":e=this._extendBlock();this.oEditingArea.execCommand(a,b,c);e&&e.select();break;default:this.oEditingArea.execCommand(a,b,c)}this._countClickCr(a)},$AFTER_EXECCOMMAND:function(a,
b,c,d){this.elP1&&this.elP1.parentNode&&this.elP1.parentNode.removeChild(this.elP1);this.elP2&&this.elP2.parentNode&&this.elP2.parentNode.removeChild(this.elP2);/^insertorderedlist|insertunorderedlist$/i.test(a)&&(this._fixDocumentBR(),this._fixCorruptedBlockQuote("insertorderedlist"===a?"OL":"UL"));/^justify*/i.test(a)&&this._fixAlign("justifyfull"===a?"justify":a.substring(7));if("indent"==a||"outdent"==a)d||(d={}),d.bDontAddUndoHistory=!0;(!d||!d.bDontAddUndoHistory)&&!this._bOnlyCursorChanged&&
this.oApp.exec("RECORD_UNDO_AFTER_ACTION",[a,this.oUndoOption]);this.oApp.exec("CHECK_STYLE_CHANGE",[])},_removeSpanAlign:function(){for(var a=this.oApp.getSelection().getNodes(),b=null,c=0,d=a.length;c<d;c++)b=a[c],b.tagName&&"SPAN"===b.tagName&&(b.style.textAlign="",b.removeAttribute("align"))},_getAlignNode:function(a){if(a.tagName&&("P"===a.tagName||"DIV"===a.tagName))return a;for(a=a.parentNode;a&&a.tagName;){if("P"===a.tagName||"DIV"===a.tagName)return a;a=a.parentNode}},_fixAlign:function(a){var b=
this.oApp.getSelection(),c=[],d=null,e=null;b.collapsed?c[0]=b.startContainer:c=b.getNodes();for(var b=0,f=c.length;b<f;b++)if(d=c[b],3===d.nodeType&&(d=d.parentNode),!e||!(d===e||jindo.$Element(d).isChildOf(e)))if((e=this._getAlignNode(d))&&e.align!==e.style.textAlign)e.style.textAlign=a,e.setAttribute("align",a)},_getDocumentBR:function(){var a,b;this.aBRs=this.oApp.getWYSIWYGDocument().getElementsByTagName("BR");this.aBeforeBRs=[];a=0;for(b=this.aBRs.length;a<b;a++)this.aBeforeBRs[a]=this.aBRs[a]},
_fixDocumentBR:function(){if(this.aBeforeBRs.length!==this.aBRs.length){var a=jindo.$A(this.aBeforeBRs),b;for(b=this.aBRs.length-1;0<=b;b--)0>a.indexOf(this.aBRs[b])&&this.aBRs[b].parentNode.removeChild(this.aBRs[b])}},_setBlockExecCommand:function(a,b,c){var d,e;d={};this.oSelection=this.oApp.getSelection();this.oApp.exec("GET_SELECTED_TD_BLOCK",["aTdCells",d]);d=d.aTdCells;for(var f=0;f<d.length;f++){this.oSelection.selectNodeContents(d[f]);this.oSelection.select();this.oNavigator.firefox&&this.oEditingArea.execCommand("styleWithCSS",
b,!1);e=this.oSelection.getNodes();for(var g=0;g<e.length;g++)("UL"==e[g].tagName||"OL"==e[g].tagName)&&jindo.$Element(e[g]).css("color",c);this.oEditingArea.execCommand(a,b,c)}},_indentMargin:function(a){for(var b=a,c,d,e;b;){if(b.tagName&&"LI"===b.tagName){a=b;break}b=b.parentNode}if("LI"===a.tagName)if(a.previousSibling&&a.previousSibling.tagName&&a.previousSibling.tagName===a.parentNode.tagName)if(a.nextSibling&&a.nextSibling.tagName&&a.nextSibling.tagName===a.parentNode.tagName){b=[a];c=0;for(d=
a.nextSibling.childNodes.length;c<d;c++)b.push(a.nextSibling.childNodes[c]);e=a.previousSibling;a=a.nextSibling;c=0;for(d=b.length;c<d;c++)e.insertBefore(b[c],null);a.parentNode.removeChild(a)}else a.previousSibling.insertBefore(a,null);else a.nextSibling&&a.nextSibling.tagName&&a.nextSibling.tagName===a.parentNode.tagName?a.nextSibling.insertBefore(a,a.nextSibling.firstChild):(b=a.parentNode.cloneNode(!1),a.parentNode.insertBefore(b,a),b.appendChild(a));else(b=parseInt(a.style.marginLeft,10))||(b=
0),b+=this.nIndentSpacing,a.style.marginLeft=b+"px"},_outdentMargin:function(a){for(var b=a,c;b;){if(b.tagName&&"LI"===b.tagName){a=b;break}b=b.parentNode}if("LI"===a.tagName){c=b=a.parentNode;if(a.previousSibling&&a.previousSibling.tagName&&a.previousSibling.tagName.match(/LI|UL|OL/))if(a.nextSibling&&a.nextSibling.tagName&&a.nextSibling.tagName.match(/LI|UL|OL/)){for(c=b.cloneNode(!1);a.nextSibling;)c.insertBefore(a.nextSibling,null);b.parentNode.insertBefore(c,b.nextSibling)}else c=b.nextSibling;
b.parentNode.insertBefore(a,c);b.innerHTML.match(/LI/i)||b.parentNode.removeChild(b);if(!a.parentNode.tagName.match(/OL|UL/)){b=this.oApp.getWYSIWYGDocument();b=b.createElement("P");c=null;for(a.parentNode.insertBefore(b,a);a.firstChild;)b.insertBefore(a.firstChild,c);a.parentNode.removeChild(a)}}else(b=parseInt(a.style.marginLeft,10))||(b=0),b-=this.nIndentSpacing,0>b&&(b=0),a.style.marginLeft=b+"px"},_insertBlankLine:function(){var a=this.oApp.getSelection().commonAncestorContainer;for(this.elP2=
this.elP1=null;a;){if("BLOCKQUOTE"==a.tagName){this.elP1=jindo.$("<p>&nbsp;</p>",this.oApp.getWYSIWYGDocument());a.parentNode.insertBefore(this.elP1,a);this.elP2=jindo.$("<p>&nbsp;</p>",this.oApp.getWYSIWYGDocument());a.parentNode.insertBefore(this.elP2,a.nextSibling);break}a=a.parentNode}},_fixCorruptedBlockQuote:function(a){var b=this.oApp.getWYSIWYGDocument().getElementsByTagName(a),c,d,e;d=0;for(e=b.length;d<e;d++)if(b[d].firstChild&&b[d].firstChild.tagName==a){c=b[d];break}if(c){d=c.parentNode;
e=this._getPosIdx(c);b=this.oApp.getWYSIWYGDocument().createElement("DIV");b.innerHTML=c.outerHTML.replace("<"+a,"<BLOCKQUOTE");c.parentNode.insertBefore(b.firstChild,c);c.parentNode.removeChild(c);c=d.childNodes[e];a=c.getElementsByTagName(a);d=0;for(e=a.length;d<e;d++)1>a[d].childNodes.length&&a[d].parentNode.removeChild(a[d]);a=this.oApp.getEmptySelection();a.selectNodeContents(c);a.collapseToEnd();a.select()}},_getPosIdx:function(a){var b=0;for(a=a.previousSibling;a;a=a.previousSibling)b++;return b},
_countClickCr:function(a){a.match(this.rxClickCr)&&this.oApp.exec("MSG_NOTIFY_CLICKCR",[a.replace(/^insert/i,"")])},_extendBlock:function(){var a=this.oApp.getSelection(),b=a.startContainer,c=a.endContainer,d=[],e=[],f=a.cloneRange();if(b===c&&(1===b.nodeType&&"P"===b.tagName)&&(d=jindo.$A(b.childNodes).filter(function(a){return 1===a.nodeType&&"IMG"===a.tagName}).$value(),e=jindo.$A(a.getNodes()).filter(function(a){return 1===a.nodeType&&"IMG"===a.tagName}).$value(),!(d.length<=e.length)))return a.selectNode(b),
a.select(),f}});
nhn.husky.SE2M_FontColor=jindo.$Class({name:"SE2M_FontColor",rxColorPattern:/^#?[0-9a-fA-F]{6}$|^rgb\(\d+, ?\d+, ?\d+\)$/i,$init:function(a){this._assignHTMLElements(a)},_assignHTMLElements:function(a){this.elLastUsed=jindo.$$.getSingle("SPAN.husky_se2m_fontColor_lastUsed",a);this.elDropdownLayer=jindo.$$.getSingle("DIV.husky_se2m_fontcolor_layer",a);this.elPaletteHolder=jindo.$$.getSingle("DIV.husky_se2m_fontcolor_paletteHolder",this.elDropdownLayer);this._setLastUsedFontColor("#000000")},$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_UI_EVENT",
["fontColorA","click","APPLY_LAST_USED_FONTCOLOR"]);this.oApp.exec("REGISTER_UI_EVENT",["fontColorB","click","TOGGLE_FONTCOLOR_LAYER"])},$ON_TOGGLE_FONTCOLOR_LAYER:function(){this.oApp.exec("TOGGLE_TOOLBAR_ACTIVE_LAYER",[this.elDropdownLayer,null,"FONTCOLOR_LAYER_SHOWN",[],"FONTCOLOR_LAYER_HIDDEN",[]]);this.oApp.exec("MSG_NOTIFY_CLICKCR",["fontcolor"])},$ON_FONTCOLOR_LAYER_SHOWN:function(){this.oApp.exec("SELECT_UI",["fontColorB"]);this.oApp.exec("SHOW_COLOR_PALETTE",["APPLY_FONTCOLOR",this.elPaletteHolder])},
$ON_FONTCOLOR_LAYER_HIDDEN:function(){this.oApp.exec("DESELECT_UI",["fontColorB"]);this.oApp.exec("RESET_COLOR_PALETTE",[])},$ON_APPLY_LAST_USED_FONTCOLOR:function(){this.oApp.exec("APPLY_FONTCOLOR",[this.sLastUsedColor]);this.oApp.exec("MSG_NOTIFY_CLICKCR",["fontcolor"])},$ON_APPLY_FONTCOLOR:function(a){this.rxColorPattern.test(a)?(this._setLastUsedFontColor(a),this.oApp.exec("SET_WYSIWYG_STYLE",[{color:a}]),this.oApp.exec("HIDE_ACTIVE_LAYER")):alert(this.oApp.$MSG("SE_FontColor.invalidColorCode"))},
_setLastUsedFontColor:function(a){this.sLastUsedColor=a;this.elLastUsed.style.backgroundColor=this.sLastUsedColor}});
nhn.husky.SE2M_FontNameWithLayerUI=jindo.$Class({name:"SE2M_FontNameWithLayerUI",$init:function(a){this.elLastHover=null;this._assignHTMLElements(a);this.htBrowser=jindo.$Agent().navigator()},addAllFonts:function(){var a,b,c,d,e;this.htFamilyName2DisplayName={};this.htAllFonts={};this.aBaseFontList=[];this.aDefaultFontList=[];this.aTempSavedFontList=[];if(this.htOptions=this.oApp.htOptions.SE2M_FontName){a=this.htOptions.aDefaultFontList||[];b=this.htOptions.aFontList;c=this.htOptions.htMainFont;
d=this.htOptions.aFontInUse;if(this.oApp.oNavigator.ie&&b)for(e=0;e<b.length;e++)this.addFont(b[e].id,b[e].name,b[e].size,b[e].url,b[e].cssUrl);for(e=0;e<a.length;e++)this.addFont(a[e][0],a[e][1],0,"","",1);c&&c.id&&this.setMainFont(c.id,c.name,c.size,c.url,c.cssUrl);if(this.oApp.oNavigator.ie&&d)for(e=0;e<d.length;e++)this.addFontInUse(d[e].id,d[e].name,d[e].size,d[e].url,d[e].cssUrl)}if(!this.htOptions||!this.htOptions.aDefaultFontList||0===this.htOptions.aDefaultFontList.length)this.addFont("NanumGothicWeb",
"\ub098\ub214\uace0\ub515",0,"","",1),this.addFont("\ub3cb\uc6c0,Dotum","\ub3cb\uc6c0",0,"","",1),this.addFont("\ub3cb\uc6c0\uccb4,DotumChe","\ub3cb\uc6c0\uccb4",0,"","",1),this.addFont("\uad74\ub9bc,Gulim","\uad74\ub9bc",0,"","",1),this.addFont("\uad74\ub9bc\uccb4,GulimChe","\uad74\ub9bc\uccb4",0,"","",1),this.addFont("\ubc14\ud0d5,Batang","\ubc14\ud0d5",0,"","",1),this.addFont("\ubc14\ud0d5\uccb4,BatangChe","\ubc14\ud0d5\uccb4",0,"","",1),this.addFont("\uad81\uc11c,Gungsuh","\uad81\uc11c",0,"",
"",1),this.addFont("Arial","Arial",0,"","",1),this.addFont("Tahoma","Tahoma",0,"","",1,"abcd"),this.addFont("Times New Roman","Times New Roman",0,"","",1,"abcd"),this.addFont("Verdana","Verdana",0,"","",1,"abcd")},$ON_MSG_APP_READY:function(){this.bDoNotRecordUndo=!1;this.oApp.exec("ADD_APP_PROPERTY",["addFont",jindo.$Fn(this.addFont,this).bind()]);this.oApp.exec("ADD_APP_PROPERTY",["addFontInUse",jindo.$Fn(this.addFontInUse,this).bind()]);this.oApp.exec("ADD_APP_PROPERTY",["setMainFont",jindo.$Fn(this.setMainFont,
this).bind()]);this.oApp.exec("ADD_APP_PROPERTY",["setDefaultFont",jindo.$Fn(this.setDefaultFont,this).bind()]);this.oApp.exec("REGISTER_UI_EVENT",["fontName","click","SE2M_TOGGLE_FONTNAME_LAYER"])},$AFTER_MSG_APP_READY:function(){this._initFontName();this._attachIEEvent()},_assignHTMLElements:function(a){this.oDropdownLayer=jindo.$$.getSingle("DIV.husky_se_fontName_layer",a);this.elFontNameLabel=jindo.$$.getSingle("SPAN.husky_se2m_current_fontName",a);this.elFontNameList=jindo.$$.getSingle("UL",
this.oDropdownLayer);this.elInnerLayer=this.elFontNameList.parentNode;this.elFontItemTemplate=jindo.$$.getSingle("LI",this.oDropdownLayer);this.aLIFontNames=jindo.$A(jindo.$$("LI",this.oDropdownLayer)).filter(function(a){return null!==a.firstChild})._array;this.elSeparator=jindo.$$.getSingle("LI.husky_seditor_font_separator",this.oDropdownLayer);this.elNanumgothic=jindo.$$.getSingle("LI.husky_seditor_font_nanumgothic",this.oDropdownLayer);this.elNanummyeongjo=jindo.$$.getSingle("LI.husky_seditor_font_nanummyeongjo",
this.oDropdownLayer);this.sDefaultText=this.elFontNameLabel.innerHTML},_initFontName:function(){this._addNanumFont();this.addAllFonts();this.oApp.registerBrowserEvent(this.oDropdownLayer,"mouseover","EVENT_FONTNAME_LAYER_MOUSEOVER",[]);this.oApp.registerBrowserEvent(this.oDropdownLayer,"click","EVENT_FONTNAME_LAYER_CLICKED",[])},_addNanumFont:function(){var a=!1,b=unescape("%uB098%uB214%uACE0%uB515"),c=unescape("%uB098%uB214%uBA85%uC870");jindo.$Agent().os().mac&&(b="NanumGothic",c="NanumMyeongjo");
this.elNanumgothic&&(IsInstalledFont(b)?(a=!0,this.elNanumgothic.style.display="block"):this.elNanumgothic.style.display="none");this.elNanummyeongjo&&(IsInstalledFont(c)?(a=!0,this.elNanummyeongjo.style.display="block"):this.elNanummyeongjo.style.display="none");this.elSeparator&&(this.elSeparator.style.display=a?"block":"none")},_attachIEEvent:function(){this.htBrowser.ie&&(9>this.htBrowser.nativeVersion?(this._wfOnPasteWYSIWYGBody=jindo.$Fn(this._onPasteWYSIWYGBody,this),this._wfOnPasteWYSIWYGBody.attach(this.oApp.getWYSIWYGDocument().body,
"paste")):9>document.documentMode?(this._wfOnFocusWYSIWYGBody=jindo.$Fn(this._onFocusWYSIWYGBody,this),this._wfOnFocusWYSIWYGBody.attach(this.oApp.getWYSIWYGDocument().body,"focus")):(this.welEditingAreaCover=jindo.$Element('<DIV style="width:100%; height:100%; position:absolute; top:0px; left:0px; z-index:1000;"></DIV>'),this.oApp.welEditingAreaContainer.prepend(this.welEditingAreaCover),jindo.$Fn(this._onMouseupCover,this).attach(this.welEditingAreaCover.$value(),"mouseup")))},_onFocusWYSIWYGBody:function(){this._wfOnFocusWYSIWYGBody.detach(this.oApp.getWYSIWYGDocument().body,
"focus");this._loadAllBaseFont()},_onPasteWYSIWYGBody:function(){this._wfOnPasteWYSIWYGBody.detach(this.oApp.getWYSIWYGDocument().body,"paste");this._loadAllBaseFont()},_onMouseupCover:function(a){a.stop();this.welEditingAreaCover.leave();a=a.mouse();var b=this.oApp.getWYSIWYGDocument().body,c=jindo.$Element(b),d=this.oApp.getEmptySelection();d.selectNode(b);d.collapseToStart();d.select();c.fireEvent("mousedown",{left:a.left,middle:a.middle,right:a.right});c.fireEvent("mouseup",{left:a.left,middle:a.middle,
right:a.right})},$ON_EVENT_TOOLBAR_MOUSEDOWN:function(){9>this.htBrowser.nativeVersion||9>document.documentMode||this.welEditingAreaCover.leave()},_loadAllBaseFont:function(){var a,b;if(this.htBrowser.ie){if(9>this.htBrowser.nativeVersion){a=0;for(b=this.aBaseFontList.length;a<b;a++)this.aBaseFontList[a].loadCSS(this.oApp.getWYSIWYGDocument())}else if(9>document.documentMode){a=0;for(b=this.aBaseFontList.length;a<b;a++)this.aBaseFontList[a].loadCSSToMenu()}this._loadAllBaseFont=function(){}}},_addFontToMenu:function(a,
b,c){var d=document.createElement("LI");d.innerHTML=this.elFontItemTemplate.innerHTML.replace("@DisplayName@",a).replace("FontFamily",b).replace("@SampleText@",c);this.elFontNameList.insertBefore(d,this.elFontItemTemplate);this.aLIFontNames[this.aLIFontNames.length]=d;20<this.aLIFontNames.length&&(this.oDropdownLayer.style.overflowX="hidden",this.oDropdownLayer.style.overflowY="auto",this.oDropdownLayer.style.height="400px",this.oDropdownLayer.style.width="204px")},$ON_EVENT_FONTNAME_LAYER_MOUSEOVER:function(a){if(a=
this._findLI(a.element))this._clearLastHover(),a.className="hover",this.elLastHover=a},$ON_EVENT_FONTNAME_LAYER_CLICKED:function(a){if(a=this._findLI(a.element)){a=this._getFontFamilyFromLI(a);var b=this.htAllFonts[a.replace(/\"/g,nhn.husky.SE2M_FontNameWithLayerUI.CUSTOM_FONT_MARKS)];this.oApp.exec("SET_FONTFAMILY",[a,b?b.defaultSize+"pt":0])}},_findLI:function(a){for(;"LI"!=a.tagName;){if(!a||a===this.oDropdownLayer)return null;a=a.parentNode}return/husky_seditor_font_separator/.test(a.className)?
null:a},_clearLastHover:function(){this.elLastHover&&(this.elLastHover.className="")},$ON_SE2M_TOGGLE_FONTNAME_LAYER:function(){this.oApp.exec("TOGGLE_TOOLBAR_ACTIVE_LAYER",[this.oDropdownLayer,null,"MSG_FONTNAME_LAYER_OPENED",[],"MSG_FONTNAME_LAYER_CLOSED",[]]);this.oApp.exec("MSG_NOTIFY_CLICKCR",["font"])},$ON_MSG_FONTNAME_LAYER_OPENED:function(){this.oApp.exec("SELECT_UI",["fontName"])},$ON_MSG_FONTNAME_LAYER_CLOSED:function(){this._clearLastHover();this.oApp.exec("DESELECT_UI",["fontName"])},
$ON_MSG_STYLE_CHANGED:function(a,b){if("fontFamily"==a){b=b.replace(/["']/g,"");var c=this._getMatchingLI(b);this._clearFontNameSelection();c?(this.elFontNameLabel.innerHTML=this._getFontNameLabelFromLI(c),jindo.$Element(c).addClass("active")):this.elFontNameLabel.innerHTML=this.sDefaultText}},$BEFORE_RECORD_UNDO_BEFORE_ACTION:function(){return!this.bDoNotRecordUndo},$BEFORE_RECORD_UNDO_AFTER_ACTION:function(){return!this.bDoNotRecordUndo},$BEFORE_RECORD_UNDO_ACTION:function(){return!this.bDoNotRecordUndo},
$ON_SET_FONTFAMILY:function(a,b){if(a){var c=this.htAllFonts[a.replace(/\"/g,nhn.husky.SE2M_FontNameWithLayerUI.CUSTOM_FONT_MARKS)];c&&c.loadCSS(this.oApp.getWYSIWYGDocument());this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["SET FONTFAMILY",{bMustBlockElement:!0}]);this.bDoNotRecordUndo=!0;0<parseInt(b,10)&&this.oApp.exec("SET_WYSIWYG_STYLE",[{fontSize:b}]);this.oApp.exec("SET_WYSIWYG_STYLE",[{fontFamily:a}]);this.bDoNotRecordUndo=!1;this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["SET FONTFAMILY",{bMustBlockElement:!0}]);
this.oApp.exec("HIDE_ACTIVE_LAYER",[]);this.oApp.exec("CHECK_STYLE_CHANGE",[])}},_getMatchingLI:function(a){a=a.toLowerCase();for(var b,c,d=0;d<this.aLIFontNames.length;d++){b=this.aLIFontNames[d];c=this._getFontFamilyFromLI(b).split(",");for(var e=0;e<c.length;e++)if(c[e]&&jindo.$S(c[e].replace(/['"]/ig,"")).trim().$value()==a)return b}return null},_getFontFamilyFromLI:function(a){return a.getElementsByTagName("EM")[0].style.fontFamily},_getFontNameLabelFromLI:function(a){return a.firstChild.firstChild.firstChild.nodeValue},
_clearFontNameSelection:function(){for(var a=0;a<this.aLIFontNames.length;a++)jindo.$Element(this.aLIFontNames[a]).removeClass("active")},addFont:function(a,b,c,d,e,f,g){if(!this.oApp.oNavigator.ie&&e)return null;a=a.toLowerCase();d=new fontProperty(a,b,c,d,e);0<c?(a=a+"_"+c,c=b+"_"+c):c=b;f||(a=nhn.husky.SE2M_FontNameWithLayerUI.CUSTOM_FONT_MARKS+a+nhn.husky.SE2M_FontNameWithLayerUI.CUSTOM_FONT_MARKS);if(this.htAllFonts[a])return this.htAllFonts[a];this.htAllFonts[a]=d;this.htBrowser.ie&&(9<=this.htBrowser.nativeVersion&&
9<=document.documentMode)&&d.loadCSSToMenu();this.htFamilyName2DisplayName[a]=b;g=g||this.oApp.$MSG("SE2M_FontNameWithLayerUI.sSampleText");this._addFontToMenu(c,a,g);f?1==f?this.aDefaultFontList[this.aDefaultFontList.length]=d:this.aTempSavedFontList[this.aTempSavedFontList.length]=d:this.aBaseFontList[this.aBaseFontList.length]=d;return d},addFontInUse:function(a,b,c,d,e,f){a=this.addFont(a,b,c,d,e,f);if(!a)return null;a.loadCSS(this.oApp.getWYSIWYGDocument());return a},setMainFont:function(a,b,
c,d,e,f){a=this.addFontInUse(a,b,c,d,e,f);if(!a)return null;this.setDefaultFont(a.fontFamily,c);return a},setDefaultFont:function(a,b){var c=this.oApp.getWYSIWYGDocument().body;c.style.fontFamily=a;0<b&&(c.style.fontSize=b+"pt")}});nhn.husky.SE2M_FontNameWithLayerUI.CUSTOM_FONT_MARKS="'";
function fontProperty(a,b,c,d,e){this.fontId=a;this.fontName=b;this.defaultSize=c;this.fontURL=d;this.fontCSSURL=e;this.displayName=b;this.isLoaded=!0;this.fontFamily=this.fontId;""!=this.fontCSSURL?(this.displayName+=""+c,this.fontFamily+="_"+c,this.isLoaded=!1,this.loadCSS=function(a){this.isLoaded||(this._importCSS(a),this.isLoaded=!0)},this.loadCSSToMenu=function(){this._importCSS(document)},this._importCSS=function(a){var b=a.styleSheets.length,c=a.styleSheets[b-1];if(0===b||30==c.imports.length)c=
a.createStyleSheet();c.addImport(this.fontCSSURL)}):(this.loadCSS=function(){},this.loadCSSToMenu=function(){});this.toStruct=function(){return{fontId:this.fontId,fontName:this.fontName,defaultSize:this.defaultSize,fontURL:this.fontURL,fontCSSURL:this.fontCSSURL}}}
nhn.husky.SE2M_FontSizeWithLayerUI=jindo.$Class({name:"SE2M_FontSizeWithLayerUI",$init:function(a){this._assignHTMLElements(a);this.mapPX2PT={};this.mapPX2PT["8"]="6";this.mapPX2PT["9"]="7";this.mapPX2PT["10"]="7.5";this.mapPX2PT["11"]="8";this.mapPX2PT["12"]="9";this.mapPX2PT["13"]="10";this.mapPX2PT["14"]="10.5";this.mapPX2PT["15"]="11";this.mapPX2PT["16"]="12";this.mapPX2PT["17"]="13";this.mapPX2PT["18"]="13.5";this.mapPX2PT["19"]="14";this.mapPX2PT["20"]="14.5";this.mapPX2PT["21"]="15";this.mapPX2PT["22"]=
"16";this.mapPX2PT["23"]="17";this.mapPX2PT["24"]="18";this.mapPX2PT["26"]="20";this.mapPX2PT["29"]="22";this.mapPX2PT["32"]="24";this.mapPX2PT["35"]="26";this.mapPX2PT["36"]="27";this.mapPX2PT["37"]="28";this.mapPX2PT["38"]="29";this.mapPX2PT["40"]="30";this.mapPX2PT["42"]="32";this.mapPX2PT["45"]="34";this.mapPX2PT["48"]="36"},_assignHTMLElements:function(a){this.oDropdownLayer=jindo.$$.getSingle("DIV.husky_se_fontSize_layer",a);this.elFontSizeLabel=jindo.$$.getSingle("SPAN.husky_se2m_current_fontSize",
a);this.aLIFontSizes=jindo.$A(jindo.$$("LI",this.oDropdownLayer)).filter(function(a){return null!=a.firstChild})._array;this.sDefaultText=this.elFontSizeLabel.innerHTML},$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_UI_EVENT",["fontSize","click","SE2M_TOGGLE_FONTSIZE_LAYER"]);this.oApp.exec("SE2_ATTACH_HOVER_EVENTS",[this.aLIFontSizes]);for(var a=0;a<this.aLIFontSizes.length;a++)this.oApp.registerBrowserEvent(this.aLIFontSizes[a],"click","SET_FONTSIZE",[this._getFontSizeFromLI(this.aLIFontSizes[a])])},
$ON_SE2M_TOGGLE_FONTSIZE_LAYER:function(){this.oApp.exec("TOGGLE_TOOLBAR_ACTIVE_LAYER",[this.oDropdownLayer,null,"SELECT_UI",["fontSize"],"DESELECT_UI",["fontSize"]]);this.oApp.exec("MSG_NOTIFY_CLICKCR",["size"])},$ON_MSG_STYLE_CHANGED:function(a,b){if("fontSize"==a){if(b.match(/px$/)){var c=parseFloat(b.replace("px","")).toFixed(0);b=this.mapPX2PT[c]?this.mapPX2PT[c]+"pt":0<b?c+"px":this.sDefaultText}b||(b=this.sDefaultText);c=this._getMatchingLI(b);this._clearFontSizeSelection();c?(this.elFontSizeLabel.innerHTML=
b,jindo.$Element(c).addClass("active")):this.elFontSizeLabel.innerHTML=b}},$ON_SET_FONTSIZE:function(a){a&&(this.oApp.exec("SET_WYSIWYG_STYLE",[{fontSize:a}]),this.oApp.exec("HIDE_ACTIVE_LAYER",[]),this.oApp.exec("CHECK_STYLE_CHANGE",[]))},_getMatchingLI:function(a){var b;a=a.toLowerCase();for(var c=0;c<this.aLIFontSizes.length;c++)if(b=this.aLIFontSizes[c],this._getFontSizeFromLI(b).toLowerCase()==a)return b;return null},_getFontSizeFromLI:function(a){return a.firstChild.firstChild.style.fontSize},
_clearFontSizeSelection:function(){for(var a=0;a<this.aLIFontSizes.length;a++)jindo.$Element(this.aLIFontSizes[a]).removeClass("active")}});
nhn.husky.SE2M_Hyperlink=jindo.$Class({name:"SE2M_Hyperlink",sATagMarker:"HTTP://HUSKY_TMP.MARKER/",_assignHTMLElements:function(a){this.oHyperlinkButton=jindo.$$.getSingle("li.husky_seditor_ui_hyperlink",a);this.oHyperlinkLayer=jindo.$$.getSingle("div.se2_layer",this.oHyperlinkButton);this.oLinkInput=jindo.$$.getSingle("INPUT[type=text]",this.oHyperlinkLayer);this.oBtnConfirm=jindo.$$.getSingle("button.se2_apply",this.oHyperlinkLayer);this.oBtnCancel=jindo.$$.getSingle("button.se2_cancel",this.oHyperlinkLayer)},
_generateAutoLink:function(a,b,c,d,e){return(b||"")+(d?'<a href="http://'+d+'">'+c+"</a>":'<a href="'+e+'">'+c+"</a>")},$ON_MSG_APP_READY:function(){this.bLayerShown=!1;this.oApp.exec("REGISTER_UI_EVENT",["hyperlink","click","TOGGLE_HYPERLINK_LAYER"]);this.oApp.exec("REGISTER_HOTKEY",["ctrl+k","TOGGLE_HYPERLINK_LAYER",[]])},$ON_REGISTER_CONVERTERS:function(){this.oApp.exec("ADD_CONVERTER_DOM",["IR_TO_DB",jindo.$Fn(this.irToDb,this).bind()])},$LOCAL_BEFORE_FIRST:function(a){if(a.match(/(REGISTER_CONVERTERS)/))return this.oApp.acceptLocalBeforeFirstAgain(this,
!0),!0;this._assignHTMLElements(this.oApp.htOptions.elAppContainer);this.sRXATagMarker=this.sATagMarker.replace(/\//g,"\\/").replace(/\./g,"\\.");this.oApp.registerBrowserEvent(this.oBtnConfirm,"click","APPLY_HYPERLINK");this.oApp.registerBrowserEvent(this.oBtnCancel,"click","HIDE_ACTIVE_LAYER");this.oApp.registerBrowserEvent(this.oLinkInput,"keydown","EVENT_HYPERLINK_KEYDOWN")},$ON_TOGGLE_HYPERLINK_LAYER:function(){this.bLayerShown||(this.oApp.exec("IE_FOCUS",[]),this.oSelection=this.oApp.getSelection());
this.oApp.delayedExec("TOGGLE_TOOLBAR_ACTIVE_LAYER",[this.oHyperlinkLayer,null,"MSG_HYPERLINK_LAYER_SHOWN",[],"MSG_HYPERLINK_LAYER_HIDDEN",[""]],0);this.oApp.exec("MSG_NOTIFY_CLICKCR",["hyperlink"])},$ON_MSG_HYPERLINK_LAYER_SHOWN:function(){this.bLayerShown=!0;var a=this.oSelection.findAncestorByTagName("A");a||(a=this._getSelectedNode());if(a&&!this.oSelection.collapsed){this.oSelection.selectNode(a);this.oSelection.select();try{var b=a.getAttribute("href");this.oLinkInput.value=b&&-1==b.indexOf("#")?
b:"http://"}catch(c){this.oLinkInput.value="http://"}this.bModify=!0}else this.oLinkInput.value="http://",this.bModify=!1;this.oApp.delayedExec("SELECT_UI",["hyperlink"],0);this.oLinkInput.focus();this.oLinkInput.value=this.oLinkInput.value;this.oLinkInput.select()},$ON_MSG_HYPERLINK_LAYER_HIDDEN:function(){this.bLayerShown=!1;this.oApp.exec("DESELECT_UI",["hyperlink"])},$ON_APPLY_HYPERLINK:function(){var a=this.oLinkInput.value;/^((http|https|ftp|mailto):(?:\/\/)?)/.test(a)||(a="http://"+a);var a=
a.replace(/\s+$/,""),b=jindo.$Agent().navigator(),c="";this.oApp.exec("IE_FOCUS",[]);b.ie&&(c='<span style="text-decoration:none;">&nbsp;</span>');if(this._validateURL(a)){sTarget="_self";this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["HYPERLINK",{sSaveTarget:this.bModify?"A":null}]);var d;if(this.oSelection.collapsed)this.oSelection.pasteHTML("<a href='"+a+"' target="+sTarget+">"+a+"</a>"+c),d=this.oSelection.placeStringBookmark();else{d=this.oSelection.placeStringBookmark();this.oSelection.select();
if(b.ie&&(8===b.version||8===b.nativeVersion))this.oApp.exec("IE_FOCUS",[]),this.oSelection.moveToBookmark(d),this.oSelection.select();var e=Math.ceil(1E4*Math.random());if(""==a)this.oApp.exec("EXECCOMMAND",["unlink"]);else if(this._isExceptional()){this.oApp.exec("EXECCOMMAND",["unlink",!1,"",{bDontAddUndoHistory:!0}]);var f="<a href='"+a+"' target="+sTarget+">";jindo.$A(this.oSelection.getNodes(!0)).forEach(function(a){var b=this.oApp.getEmptySelection();3===a.nodeType?(b.selectNode(a),b.pasteHTML(f+
a.nodeValue+"</a>")):1===a.nodeType&&"IMG"===a.tagName&&(b.selectNode(a),b.pasteHTML(f+jindo.$Element(a).outerHTML()+"</a>"))},this)}else this.oApp.exec("EXECCOMMAND",["createLink",!1,this.sATagMarker+e+encodeURIComponent(a),{bDontAddUndoHistory:!0}]);for(var a=this.oApp.getWYSIWYGDocument().body.getElementsByTagName("A"),c=a.length,e=RegExp(this.sRXATagMarker+e,"gi"),g,h=0;h<c;h++){g=a[h];var j="";try{j=g.getAttribute("href")}catch(k){}if(j&&j.match(e))if(j=j.replace(e,""),j=decodeURIComponent(j),
b.ie)jindo.$Element(g).attr({href:j,target:sTarget});else{var m=jindo.$Element(g).html();jindo.$Element(g).attr({href:j,target:sTarget});this._validateURL(m)&&jindo.$Element(g).html(jindo.$Element(g).attr("href"))}}}this.oApp.exec("HIDE_ACTIVE_LAYER");setTimeout(jindo.$Fn(function(){var a=this.oApp.getEmptySelection();a.moveToBookmark(d);a.collapseToEnd();a.select();a.removeStringBookmark(d);this.oApp.exec("FOCUS");this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["HYPERLINK",{sSaveTarget:this.bModify?"A":
null}])},this).bind(),17)}else alert(this.oApp.$MSG("SE_Hyperlink.invalidURL")),this.oLinkInput.focus()},_isExceptional:function(){var a=jindo.$Agent().navigator(),b=!1,b=!1;return!a.ie?!1:"None"===this.oApp.getWYSIWYGDocument().selection.type&&(b=jindo.$A(this.oSelection.getNodes()).some(function(a){if(1===a.nodeType&&"IMG"===a.tagName)return!0},this))?!0:8<a.nativeVersion?!1:(b=jindo.$A(this.oSelection.getTextNodes()).some(function(a){if(1<=a.nodeValue.indexOf("@"))return!0},this))?!0:!1},$ON_EVENT_HYPERLINK_KEYDOWN:function(a){a.key().enter&&
(this.oApp.exec("APPLY_HYPERLINK"),a.stop())},irToDb:function(a){for(var b=a.cloneNode(!0),c=this.oApp.getEmptySelection(),d=c._getFirstRealChild(b),e=c._getLastRealChild(b),c=jindo.$A(c._getNodesBetween(d,e)),f=c.filter(function(a){return a&&3===a.nodeType}).$value(),c=f,d=this.oApp.getWYSIWYGDocument().createElement("DIV"),g,e="@"+(new Date).getTime()+"@",h=RegExp(e,"g"),j=0,k=f.length;j<k;j++){f=c[j].parentNode;for(g=!1;f;){if("A"===f.tagName||"PRE"===f.tagName){g=!0;break}f=f.parentNode}if(!g){d.innerHTML=
"";d.appendChild(c[j].cloneNode(!0));d.innerHTML=(e+d.innerHTML).replace(/(&nbsp|\s)?(((?!http:\/\/)www\.(?:(?!\&nbsp;|\s|"|').)+)|(http:\/\/(?:(?!&nbsp;|\s|"|').)+))/ig,this._generateAutoLink);c[j].parentNode.insertBefore(d,c[j]);for(c[j].parentNode.removeChild(c[j]);d.firstChild;)d.parentNode.insertBefore(d.firstChild,d);d.parentNode.removeChild(d)}}d=c=d=e=c=f=c=f=null;b.innerHTML=b.innerHTML.replace(h,"");a.innerHTML=b.innerHTML;b=null},_getSelectedNode:function(){for(var a=this.oSelection.getNodes(),
b=0;b<a.length;b++)if(a[b].tagName&&"A"==a[b].tagName)return a[b]},_validateURL:function(a){if(!a)return!1;try{var b=a.split("?");b[0]=b[0].replace(/%[a-z0-9]{2}/gi,"U");decodeURIComponent(b[0])}catch(c){return!1}return/^(http|https|ftp|mailto):(\/\/)?(([-\uac00-\ud7a3]|\w)+(?:[\/\.:@]([-\uac00-\ud7a3]|\w)+)+)\/?(.*)?\s*$/i.test(a)}});
nhn.husky.SE2M_LineHeightWithLayerUI=jindo.$Class({name:"SE2M_LineHeightWithLayerUI",$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_UI_EVENT",["lineHeight","click","SE2M_TOGGLE_LINEHEIGHT_LAYER"])},_assignHTMLObjects:function(a){this.oDropdownLayer=jindo.$$.getSingle("DIV.husky_se2m_lineHeight_layer",a);this.aLIOptions=jindo.$A(jindo.$$("LI",this.oDropdownLayer)).filter(function(a){return null!==a.firstChild})._array;this.oInput=jindo.$$.getSingle("INPUT",this.oDropdownLayer);a=jindo.$$.getSingle(".husky_se2m_lineHeight_direct_input",
this.oDropdownLayer);a=jindo.$$("BUTTON",a);this.oBtn_up=a[0];this.oBtn_down=a[1];this.oBtn_ok=a[2];this.oBtn_cancel=a[3]},$LOCAL_BEFORE_FIRST:function(){this._assignHTMLObjects(this.oApp.htOptions.elAppContainer);this.oApp.exec("SE2_ATTACH_HOVER_EVENTS",[this.aLIOptions]);for(var a=0;a<this.aLIOptions.length;a++)this.oApp.registerBrowserEvent(this.aLIOptions[a],"click","SET_LINEHEIGHT_FROM_LAYER_UI",[this._getLineHeightFromLI(this.aLIOptions[a])]);this.oApp.registerBrowserEvent(this.oBtn_up,"click",
"SE2M_INC_LINEHEIGHT",[]);this.oApp.registerBrowserEvent(this.oBtn_down,"click","SE2M_DEC_LINEHEIGHT",[]);this.oApp.registerBrowserEvent(this.oBtn_ok,"click","SE2M_SET_LINEHEIGHT_FROM_DIRECT_INPUT",[]);this.oApp.registerBrowserEvent(this.oBtn_cancel,"click","SE2M_CANCEL_LINEHEIGHT",[]);this.oApp.registerBrowserEvent(this.oInput,"keydown","EVENT_SE2M_LINEHEIGHT_KEYDOWN")},$ON_EVENT_SE2M_LINEHEIGHT_KEYDOWN:function(a){a.key().enter&&(this.oApp.exec("SE2M_SET_LINEHEIGHT_FROM_DIRECT_INPUT"),a.stop())},
$ON_SE2M_TOGGLE_LINEHEIGHT_LAYER:function(){this.oApp.exec("TOGGLE_TOOLBAR_ACTIVE_LAYER",[this.oDropdownLayer,null,"LINEHEIGHT_LAYER_SHOWN",[],"LINEHEIGHT_LAYER_HIDDEN",[]]);this.oApp.exec("MSG_NOTIFY_CLICKCR",["lineheight"])},$ON_SE2M_INC_LINEHEIGHT:function(){this.oInput.value=parseInt(this.oInput.value,10)||0;this.oInput.value++},$ON_SE2M_DEC_LINEHEIGHT:function(){this.oInput.value=parseInt(this.oInput.value,10)||0;0<this.oInput.value&&this.oInput.value--},$ON_LINEHEIGHT_LAYER_SHOWN:function(){this.oApp.exec("SELECT_UI",
["lineHeight"]);this.oInitialSelection=this.oApp.getSelection();var a=this.oApp.getLineStyle("lineHeight");null!=a&&0!==a?(this.oInput.value=(100*a).toFixed(0),(a=this._getMatchingLI(this.oInput.value+"%"))&&jindo.$Element(a.firstChild).addClass("active")):this.oInput.value=""},$ON_LINEHEIGHT_LAYER_HIDDEN:function(){this.oApp.exec("DESELECT_UI",["lineHeight"]);this._clearOptionSelection()},$ON_SE2M_SET_LINEHEIGHT_FROM_DIRECT_INPUT:function(){this._setLineHeightAndCloseLayer(this.oInput.value)},$ON_SET_LINEHEIGHT_FROM_LAYER_UI:function(a){this._setLineHeightAndCloseLayer(a)},
$ON_SE2M_CANCEL_LINEHEIGHT:function(){this.oInitialSelection.select();this.oApp.exec("HIDE_ACTIVE_LAYER")},_setLineHeightAndCloseLayer:function(a){a=parseInt(a,10)/100;0<a?this.oApp.exec("SET_LINE_STYLE",["lineHeight",a]):alert(this.oApp.$MSG("SE_LineHeight.invalidLineHeight"));this.oApp.exec("SE2M_TOGGLE_LINEHEIGHT_LAYER",[]);a=jindo.$Agent().navigator();(a.chrome||a.safari)&&this.oApp.exec("FOCUS")},_getMatchingLI:function(a){var b;a=a.toLowerCase();for(var c=0;c<this.aLIOptions.length;c++)if(b=
this.aLIOptions[c],this._getLineHeightFromLI(b).toLowerCase()==a)return b;return null},_getLineHeightFromLI:function(a){return a.firstChild.firstChild.innerHTML},_clearOptionSelection:function(){for(var a=0;a<this.aLIOptions.length;a++)jindo.$Element(this.aLIOptions[a].firstChild).removeClass("active")}});
nhn.husky.SE2M_LineStyler=jindo.$Class({name:"SE2M_LineStyler",$ON_SE2M_TOGGLE_LINEHEIGHT_LAYER:function(){this.oApp.exec("ADD_APP_PROPERTY",["getLineStyle",jindo.$Fn(this.getLineStyle,this).bind()])},$ON_SET_LINE_STYLE:function(a,b,c){this.oSelection=this.oApp.getSelection();var d=this._getSelectedNodes(!1);this.setLineStyle(a,b,c,d);this.oApp.exec("CHECK_STYLE_CHANGE",[])},$ON_SET_LINE_BLOCK_STYLE:function(a,b,c){this.oSelection=this.oApp.getSelection();this.setLineBlockStyle(a,b,c);this.oApp.exec("CHECK_STYLE_CHANGE",
[])},getLineStyle:function(a){var b=this._getSelectedNodes(!1),c,d,e;if(0===b.length)return null;var f=b.length;0===f?e=null:(d=this._getLineWrapper(b[0]),e=this._getWrapperLineStyle(a,d));var g=this.oSelection.getStartNode();if(null!=e)for(var h=1;h<f;h++)if(!this._isChildOf(b[h],c)&&b[h]&&(c=this._getLineWrapper(b[h]),c!=d)){d=this._getWrapperLineStyle(a,c);if(d!=e){e=null;break}d=c}c=this._getLineWrapper(b[f-1]);a=this.oSelection.getEndNode();selectText=jindo.$Fn(function(a,b){this.oSelection.setEndNodes(a,
b);this.oSelection.select();this.oApp.exec("CHECK_STYLE_CHANGE",[])},this).bind(g,a);setTimeout(selectText,0);return e},setLineStyle:function(a,b,c,d){function e(a,b,c){if(!a){f=!0;try{a=thisRef.oSelection.surroundContentsWithNewNode("P")}catch(d){a=thisRef.oSelection.surroundContentsWithNewNode("DIV")}}"function"==typeof c?c(a):a.style[b]=c;0===a.childNodes.length&&(a.innerHTML="&nbsp;");return a}thisRef=this;var f=!1;if(0!==d.length){var g,h,j=d.length;(!c||!c.bDontAddUndoHistory)&&this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",
["LINE STYLE"]);h=this._getLineWrapper(d[0]);for(var k=h=e(h,a,b),m=1;m<j;m++){try{var l;for(var n=nhn.DOMFix.parentNode(d[m]);n&&"BODY"!=n.tagName;)n=nhn.DOMFix.parentNode(n);l=n?!0:!1;if(!l)continue}catch(q){continue}this._isChildOf(d[m],g)||(g=this._getLineWrapper(d[m]),g!=h&&(h=g=e(g,a,b)))}f&&(!c||!c.bDoNotSelect)&&setTimeout(jindo.$Fn(function(a,b,c){a==b?(this.oSelection.selectNodeContents(a),1==a.childNodes.length&&"BR"==a.firstChild.tagName&&this.oSelection.collapseToStart()):this.oSelection.setEndNodes(a,
b);this.oSelection.select();(!c||!c.bDontAddUndoHistory)&&this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["LINE STYLE"])},this).bind(k,g||k,c),0)}},setLineBlockStyle:function(a,b,c){var d={},e=[],f=[];this.oApp.exec("GET_SELECTED_TD_BLOCK",["aTdCells",d]);for(var d=d.aTdCells,g=0;g<d.length;g++){this.oSelection.selectNode(d[g]);for(var e=this.oSelection.getNodes(),h=0,j=0;h<e.length;h++)if(3==e[h].nodeType||"BR"==e[h].tagName&&0==h)f[j]=e[h],j++;this.setLineStyle(a,b,c,f);f=[]}},getTextNodes:function(a,
b){return b.getNodes(a,function(a){return 3==a.nodeType&&"\n"!=a.nodeValue&&""!=a.nodeValue||"LI"==a.tagName&&""==a.innerHTML||"P"==a.tagName&&""==a.innerHTML?!0:!1})},_getSelectedNodes:function(a){a||(this.oSelection=this.oApp.getSelection());"LI"==this.oSelection.endContainer.tagName&&(0==this.oSelection.endOffset&&""==this.oSelection.endContainer.innerHTML)&&this.oSelection.setEndAfter(this.oSelection.endContainer);this.oSelection.collapsed&&this.oSelection.selectNode(this.oSelection.commonAncestorContainer);
a=this.getTextNodes(!1,this.oSelection);if(0===a.length){var b=this.oSelection.getStartNode();b?a[0]=b:(a=this.oSelection._document.createTextNode("\u00a0"),this.oSelection.insertNode(a),a=[a])}return a},_getWrapperLineStyle:function(a,b){var c=null;if(b&&b.style[a])c=b.style[a];else for(b=this.oSelection.commonAncesterContainer;b&&!this.oSelection.rxLineBreaker.test(b.tagName);){if(b&&b.style[a]){c=b.style[a];break}b=nhn.DOMFix.parentNode(b)}return c},_isChildOf:function(a,b){for(;a&&"BODY"!=a.tagName;){if(a==
b)return!0;a=nhn.DOMFix.parentNode(a)}return!1},_getLineWrapper:function(a){var b=this.oApp.getEmptySelection();b.selectNode(a);a=b.getLineInfo();var c=a.oStart,d=a.oEnd,e,b=null;a=c.oNode;e=c.oLineBreaker;c=d.oNode;d=d.oLineBreaker;this.oSelection.setEndNodes(a,c);e==d&&("P"==e.tagName||"DIV"==e.tagName||"LI"==e.tagName?b=e:this.oSelection.setEndNodes(e.firstChild,e.lastChild));return b}});
nhn.husky.SE_WYSIWYGStyleGetter=jindo.$Class({name:"SE_WYSIWYGStyleGetter",hKeyUp:null,getStyleInterval:200,oStyleMap:{fontFamily:{type:"Value",css:"fontFamily"},fontSize:{type:"Value",css:"fontSize"},lineHeight:{type:"Value",css:"lineHeight",converter:function(a,b){return!a.match(/px$/)?a:Math.ceil(10*(parseInt(a,10)/parseInt(b.fontSize,10)))/10}},bold:{command:"bold"},underline:{command:"underline"},italic:{command:"italic"},lineThrough:{command:"strikethrough"},superscript:{command:"superscript"},
subscript:{command:"subscript"},justifyleft:{command:"justifyleft"},justifycenter:{command:"justifycenter"},justifyright:{command:"justifyright"},justifyfull:{command:"justifyfull"},orderedlist:{command:"insertorderedlist"},unorderedlist:{command:"insertunorderedlist"}},$init:function(){this.oStyle=this._getBlankStyle()},$LOCAL_BEFORE_ALL:function(){return"WYSIWYG"==this.oApp.getEditingMode()},$ON_MSG_APP_READY:function(){this.oDocument=this.oApp.getWYSIWYGDocument();this.oApp.exec("ADD_APP_PROPERTY",
["getCurrentStyle",jindo.$Fn(this.getCurrentStyle,this).bind()]);if(jindo.$Agent().navigator().safari||jindo.$Agent().navigator().chrome)this.oStyleMap.textAlign={type:"Value",css:"textAlign"}},$ON_EVENT_EDITING_AREA_MOUSEUP:function(){this.oApp.exec("CHECK_STYLE_CHANGE")},$ON_EVENT_EDITING_AREA_KEYPRESS:function(a){if(this.oApp.oNavigator.firefox&&(a=a.key(),a.ctrl&&97==a.keyCode))return;this.bAllSelected?this.bAllSelected=!1:this.oApp.exec("CHECK_STYLE_CHANGE")},$ON_EVENT_EDITING_AREA_KEYDOWN:function(a){a=
a.key();if((this.oApp.oNavigator.ie||this.oApp.oNavigator.firefox)&&a.ctrl&&65==a.keyCode)this.oApp.exec("RESET_STYLE_STATUS"),this.bAllSelected=!0;else if(8==a.keyCode||33<=a.keyCode&&40>=a.keyCode||45==a.keyCode||46==a.keyCode)this.bAllSelected?this.oApp.oNavigator.firefox||(this.bAllSelected=!1):this.oApp.exec("CHECK_STYLE_CHANGE")},$ON_CHECK_STYLE_CHANGE:function(){this._getStyle()},$ON_RESET_STYLE_STATUS:function(){this.oStyle=this._getBlankStyle();var a=this._getStyleOf(this.oApp.getWYSIWYGDocument().body);
this.oStyle.fontFamily=a.fontFamily;this.oStyle.fontSize=a.fontSize;this.oStyle.justifyleft="@^";for(var b in this.oStyle)this.oApp.exec("MSG_STYLE_CHANGED",[b,this.oStyle[b]])},getCurrentStyle:function(){return this.oStyle},_check_style_change:function(){this.oApp.exec("CHECK_STYLE_CHANGE",[])},_getBlankStyle:function(){var a={},b;for(b in this.oStyleMap)a[b]="Value"==this.oStyleMap[b].type?"":0;return a},_getStyle:function(){var a;if(nhn.CurrentSelection.isCollapsed())a=this._getStyleOf(nhn.CurrentSelection.getCommonAncestorContainer());
else{a=this.oApp.getSelection();var b=a.getNodes(!1,function(a){return!a.childNodes||0==a.childNodes.length?!0:!1});a=0==b.length?this._getStyleOf(a.commonAncestorContainer):this._getStyleOf(b[0])}for(attributeName in a)this.oStyleMap[attributeName].converter&&(a[attributeName]=this.oStyleMap[attributeName].converter(a[attributeName],a)),this.oStyle[attributeName]!=a[attributeName]&&this.oApp.exec("MSG_STYLE_CHANGED",[attributeName,a[attributeName]]);this.oStyle=a},_getStyleOf:function(a){var b=this._getBlankStyle();
if(!a)return b;3==a.nodeType?a=a.parentNode:9==a.nodeType&&(a=a.body);a=jindo.$Element(a);var c,d;for(d in this.oStyle)if(c=this.oStyleMap[d],c.type&&"Value"==c.type)try{if(c.css){var e=a.css(c.css);"fontFamily"==d&&(e=e.split(/,/)[0]);b[d]=e}else c.command&&(b[d]=this.oDocument.queryCommandState(c.command))}catch(f){}else if(c.command)try{b[d]=this.oDocument.queryCommandState(c.command)?"@^":"@-"}catch(g){}switch(b.textAlign){case "left":b.justifyleft="@^";break;case "center":b.justifycenter="@^";
break;case "right":b.justifyright="@^";break;case "justify":b.justifyfull="@^"}"@-"==b.justifyleft&&("@-"==b.justifycenter&&"@-"==b.justifyright&&"@-"==b.justifyfull)&&(b.justifyleft="@^");return b}});
nhn.husky.SE_WYSIWYGStyler=jindo.$Class({name:"SE_WYSIWYGStyler",sBlankText:unescape("%uFEFF"),$init:function(){var a=jindo.$Agent().navigator();if(!a.ie||9>a.nativeVersion||9>document.documentMode)this._addCursorHolder=function(){}},_addCursorHolder:function(a,b){var c=this.oApp.getWYSIWYGDocument().body,d=jindo.$Element(b),e;e=c.innerHTML;if(e===d.outerHTML())d=a._document.createTextNode(unescape("%uFEFF")),c.appendChild(d);else if(c=nhn.husky.SE2M_Utils.findAncestorByTagName("P",b))e=c.innerHTML,
-1<e.indexOf("&nbsp;")||(d=a._document.createTextNode(unescape("%u00A0")),c.appendChild(d))},$PRECONDITION:function(){return"WYSIWYG"==this.oApp.getEditingMode()},$ON_SET_WYSIWYG_STYLE:function(a){var b=this.oApp.getSelection(),c={};this.oApp.exec("IS_SELECTED_TD_BLOCK",["bIsSelectedTd",c]);var d=c.bIsSelectedTd;if(b.collapsed&&!d){this.oApp.exec("RECORD_UNDO_ACTION",["FONT STYLE",{bMustBlockElement:!0}]);c=b.commonAncestorContainer;3==c.nodeType&&(c=c.parentNode);c&&"SPAN"==c.tagName&&(""==c.innerHTML||
c.innerHTML==this.sBlankText||"&nbsp;"==c.innerHTML)?d=!1:(d=!0,c=this.oApp.getWYSIWYGDocument().createElement("SPAN"));c.innerHTML=this.sBlankText;var e,f;for(f in a)e=a[f],"string"==typeof e&&(c.style[f]=e);if(d)if("BODY"==b.startContainer.tagName&&0===b.startOffset){f=b._getVeryFirstRealChild(this.oApp.getWYSIWYGDocument().body);d=!0;e=f.cloneNode(!1);try{e.innerHTML="test","test"!=e.innerHTML&&(d=!1)}catch(g){d=!1}d&&1==e.nodeType&&"BR"==e.tagName?(b.selectNode(f),b.collapseToStart(),b.insertNode(c)):
d&&"IFRAME"!=f.tagName&&f.appendChild&&"string"==typeof f.innerHTML?f.appendChild(c):(b.selectNode(f),b.collapseToStart(),b.insertNode(c))}else b.collapseToStart(),b.insertNode(c);else b=this.oApp.getEmptySelection();a.color&&b._checkTextDecoration(c);this._addCursorHolder(b,c);b.selectNodeContents(c);b.collapseToEnd();b._window.focus();b._window.document.body.focus();b.select()}else{this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["FONT STYLE",{bMustBlockElement:!0}]);if(d){this.oApp.exec("GET_SELECTED_TD_BLOCK",
["aTdCells",c]);c=c.aTdCells;for(f=0;f<c.length;f++)b.selectNodeContents(c[f]),b.styleRange(a),b.select()}else{b.styleRange(a,null,null,a.fontSize||a.fontFamily,!!a.color);if(jindo.$Agent().navigator().firefox){a=b.aStyleParents;c=0;for(f=a.length;c<f;c++)d=a[c],d.nextSibling&&("BR"==d.nextSibling.tagName&&!d.nextSibling.nextSibling)&&d.parentNode.removeChild(d.nextSibling)}b._window.focus();b.select()}this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["FONT STYLE",{bMustBlockElement:!0}])}}});
nhn.husky.SE2M_FindReplacePlugin=jindo.$Class({name:"SE2M_FindReplacePlugin",oEditingWindow:null,oFindReplace:null,bFindMode:!0,bLayerShown:!1,$init:function(){this.nDefaultTop=20},$ON_MSG_APP_READY:function(){this.oEditingWindow=this.oApp.getWYSIWYGWindow();this.oApp.exec("REGISTER_HOTKEY",["ctrl+f","SHOW_FIND_LAYER",[]]);this.oApp.exec("REGISTER_HOTKEY",["ctrl+h","SHOW_REPLACE_LAYER",[]]);this.oApp.exec("REGISTER_UI_EVENT",["findAndReplace","click","TOGGLE_FIND_REPLACE_LAYER"])},$ON_SHOW_ACTIVE_LAYER:function(){this.oApp.exec("HIDE_DIALOG_LAYER",
[this.elDropdownLayer])},_assignHTMLElements:function(){var a=this.oApp.htOptions.elAppContainer;this.oApp.exec("LOAD_HTML",["find_and_replace"]);this.elDropdownLayer=jindo.$$.getSingle("DIV.husky_se2m_findAndReplace_layer",a);this.welDropdownLayer=jindo.$Element(this.elDropdownLayer);a=jindo.$$("LI",this.elDropdownLayer);this.oFindTab=a[0];this.oReplaceTab=a[1];jindo.$$(".container > .bx",this.elDropdownLayer);this.oFindInputSet=jindo.$$.getSingle(".husky_se2m_find_ui",this.elDropdownLayer);this.oReplaceInputSet=
jindo.$$.getSingle(".husky_se2m_replace_ui",this.elDropdownLayer);this.elTitle=jindo.$$.getSingle("H3",this.elDropdownLayer);this.oFindInput_Keyword=jindo.$$.getSingle("INPUT",this.oFindInputSet);a=jindo.$$("INPUT",this.oReplaceInputSet);this.oReplaceInput_Original=a[0];this.oReplaceInput_Replacement=a[1];this.oFindNextButton=jindo.$$.getSingle("BUTTON.husky_se2m_find_next",this.elDropdownLayer);this.oReplaceFindNextButton=jindo.$$.getSingle("BUTTON.husky_se2m_replace_find_next",this.elDropdownLayer);
this.oReplaceButton=jindo.$$.getSingle("BUTTON.husky_se2m_replace",this.elDropdownLayer);this.oReplaceAllButton=jindo.$$.getSingle("BUTTON.husky_se2m_replace_all",this.elDropdownLayer);this.aCloseButtons=jindo.$$("BUTTON.husky_se2m_cancel",this.elDropdownLayer)},$LOCAL_BEFORE_FIRST:function(){this._assignHTMLElements();this.oFindReplace=new nhn.FindReplace(this.oEditingWindow);for(var a=0;a<this.aCloseButtons.length;a++){var b=jindo.$Fn(this.oApp.exec,this.oApp).bind("HIDE_FIND_REPLACE_LAYER",[this.elDropdownLayer]);
jindo.$Fn(b,this).attach(this.aCloseButtons[a],"click")}jindo.$Fn(jindo.$Fn(this.oApp.exec,this.oApp).bind("SHOW_FIND",[]),this).attach(this.oFindTab,"click");jindo.$Fn(jindo.$Fn(this.oApp.exec,this.oApp).bind("SHOW_REPLACE",[]),this).attach(this.oReplaceTab,"click");jindo.$Fn(jindo.$Fn(this.oApp.exec,this.oApp).bind("FIND",[]),this).attach(this.oFindNextButton,"click");jindo.$Fn(jindo.$Fn(this.oApp.exec,this.oApp).bind("FIND",[]),this).attach(this.oReplaceFindNextButton,"click");jindo.$Fn(jindo.$Fn(this.oApp.exec,
this.oApp).bind("REPLACE",[]),this).attach(this.oReplaceButton,"click");jindo.$Fn(jindo.$Fn(this.oApp.exec,this.oApp).bind("REPLACE_ALL",[]),this).attach(this.oReplaceAllButton,"click");this.oFindInput_Keyword.value="";this.oReplaceInput_Original.value="";this.oReplaceInput_Replacement.value="";a=this.oApp.getWYSIWYGWindow().frameElement;this.htOffsetPos=jindo.$Element(a).offset();this.nEditorWidth=a.offsetWidth;this.elDropdownLayer.style.display="block";this.htInitialPos=this.welDropdownLayer.offset();
this.oApp.oUtils.getScrollXY();this.welDropdownLayer.offset(this.htOffsetPos.top,this.htOffsetPos.left);this.htTopLeftCorner={x:parseInt(this.elDropdownLayer.style.left,10),y:parseInt(this.elDropdownLayer.style.top,10)};this.nLayerWidth=258;this.nLayerHeight=160;this.elDropdownLayer.style.display="none"},$ON_TOGGLE_FIND_REPLACE_LAYER:function(){this.bLayerShown?this.oApp.exec("HIDE_FIND_REPLACE_LAYER"):this.oApp.exec("SHOW_FIND_REPLACE_LAYER")},$ON_SHOW_FIND_REPLACE_LAYER:function(){this.bLayerShown=
!0;this.oApp.exec("DISABLE_ALL_UI",[{aExceptions:["findAndReplace"]}]);this.oApp.exec("SELECT_UI",["findAndReplace"]);this.oApp.exec("HIDE_ALL_DIALOG_LAYER",[]);this.elDropdownLayer.style.top=this.nDefaultTop+"px";this.oApp.exec("SHOW_DIALOG_LAYER",[this.elDropdownLayer,{elHandle:this.elTitle,fnOnDragStart:jindo.$Fn(this.oApp.exec,this.oApp).bind("SHOW_EDITING_AREA_COVER"),fnOnDragEnd:jindo.$Fn(this.oApp.exec,this.oApp).bind("HIDE_EDITING_AREA_COVER"),nMinX:this.htTopLeftCorner.x,nMinY:this.nDefaultTop,
nMaxX:this.htTopLeftCorner.x+this.oApp.getEditingAreaWidth()-this.nLayerWidth,nMaxY:this.htTopLeftCorner.y+this.oApp.getEditingAreaHeight()-this.nLayerHeight,sOnShowMsg:"FIND_REPLACE_LAYER_SHOWN"}]);this.oApp.exec("MSG_NOTIFY_CLICKCR",["findreplace"])},$ON_HIDE_FIND_REPLACE_LAYER:function(){this.oApp.exec("ENABLE_ALL_UI");this.oApp.exec("DESELECT_UI",["findAndReplace"]);this.oApp.exec("HIDE_ALL_DIALOG_LAYER",[]);this.bLayerShown=!1},$ON_FIND_REPLACE_LAYER_SHOWN:function(){this.oApp.exec("POSITION_TOOLBAR_LAYER",
[this.elDropdownLayer]);this.bFindMode?(this.oFindInput_Keyword.value="_clear_",this.oFindInput_Keyword.value="",this.oFindInput_Keyword.focus()):(this.oReplaceInput_Original.value="_clear_",this.oReplaceInput_Original.value="",this.oReplaceInput_Replacement.value="",this.oReplaceInput_Original.focus());this.oApp.exec("HIDE_CURRENT_ACTIVE_LAYER",[])},$ON_SHOW_FIND_LAYER:function(){this.oApp.exec("SHOW_FIND");this.oApp.exec("SHOW_FIND_REPLACE_LAYER")},$ON_SHOW_REPLACE_LAYER:function(){this.oApp.exec("SHOW_REPLACE");
this.oApp.exec("SHOW_FIND_REPLACE_LAYER")},$ON_SHOW_FIND:function(){this.bFindMode=!0;this.oFindInput_Keyword.value=this.oReplaceInput_Original.value;jindo.$Element(this.oFindTab).addClass("active");jindo.$Element(this.oReplaceTab).removeClass("active");jindo.$Element(this.oFindNextButton).removeClass("normal");jindo.$Element(this.oFindNextButton).addClass("strong");this.oFindInputSet.style.display="block";this.oReplaceInputSet.style.display="none";this.oReplaceButton.style.display="none";this.oReplaceAllButton.style.display=
"none";jindo.$Element(this.elDropdownLayer).removeClass("replace");jindo.$Element(this.elDropdownLayer).addClass("find")},$ON_SHOW_REPLACE:function(){this.bFindMode=!1;this.oReplaceInput_Original.value=this.oFindInput_Keyword.value;jindo.$Element(this.oFindTab).removeClass("active");jindo.$Element(this.oReplaceTab).addClass("active");jindo.$Element(this.oFindNextButton).removeClass("strong");jindo.$Element(this.oFindNextButton).addClass("normal");this.oFindInputSet.style.display="none";this.oReplaceInputSet.style.display=
"block";this.oReplaceButton.style.display="inline";this.oReplaceAllButton.style.display="inline";jindo.$Element(this.elDropdownLayer).removeClass("find");jindo.$Element(this.elDropdownLayer).addClass("replace")},$ON_FIND:function(){var a;a=this.bFindMode?this.oFindInput_Keyword.value:this.oReplaceInput_Original.value;var b=this.oApp.getSelection();b.select();switch(this.oFindReplace.find(a,!1)){case 1:alert(this.oApp.$MSG("SE_FindReplace.keywordNotFound"));b.select();break;case 2:alert(this.oApp.$MSG("SE_FindReplace.keywordMissing"))}},
$ON_REPLACE:function(){var a=this.oReplaceInput_Original.value,b=this.oReplaceInput_Replacement.value,c=this.oApp.getSelection();this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["REPLACE"]);a=this.oFindReplace.replace(a,b,!1);this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["REPLACE"]);switch(a){case 1:case 3:alert(this.oApp.$MSG("SE_FindReplace.keywordNotFound"));c.select();break;case 4:alert(this.oApp.$MSG("SE_FindReplace.keywordMissing"))}},$ON_REPLACE_ALL:function(){var a=this.oReplaceInput_Original.value,
b=this.oReplaceInput_Replacement.value,c=this.oApp.getSelection();this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["REPLACE ALL",{sSaveTarget:"BODY"}]);a=this.oFindReplace.replaceAll(a,b,!1);this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["REPLACE ALL",{sSaveTarget:"BODY"}]);0===a?(alert(this.oApp.$MSG("SE_FindReplace.replaceKeywordNotFound")),c.select(),this.oApp.exec("FOCUS")):0>a?(alert(this.oApp.$MSG("SE_FindReplace.keywordMissing")),c.select()):(alert(this.oApp.$MSG("SE_FindReplace.replaceAllResultP1")+
a+this.oApp.$MSG("SE_FindReplace.replaceAllResultP2")),c=this.oApp.getEmptySelection(),c.select(),this.oApp.exec("FOCUS"))}});
nhn.husky.SE2M_Quote=jindo.$Class({name:"SE2M_Quote",htQuoteStyles_view:null,$init:function(){var a=nhn.husky.SE2M_Configuration.Quote||{},b=a.sImageBaseURL;this.nMaxLevel=a.nMaxLevel||14;this.htQuoteStyles_view={};this.htQuoteStyles_view.se2_quote1="_zoom:1;padding:0 8px; margin:0 0 30px 20px; margin-right:15px; border-left:2px solid #cccccc;color:#888888;";this.htQuoteStyles_view.se2_quote2="_zoom:1;margin:0 0 30px 13px;padding:0 8px 0 16px;background:url("+b+"/bg_quote2.gif) 0 3px no-repeat;color:#888888;";
this.htQuoteStyles_view.se2_quote3="_zoom:1;margin:0 0 30px 0;padding:10px;border:1px dashed #cccccc;color:#888888;";this.htQuoteStyles_view.se2_quote4="_zoom:1;margin:0 0 30px 0;padding:10px;border:1px dashed #66b246;color:#888888;";this.htQuoteStyles_view.se2_quote5="_zoom:1;margin:0 0 30px 0;padding:10px;border:1px dashed #cccccc;background:url("+b+"/bg_b1.png) repeat;_background:none;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b+"/bg_b1.png',sizingMethod='scale');color:#888888;";
this.htQuoteStyles_view.se2_quote6="_zoom:1;margin:0 0 30px 0;padding:10px;border:1px solid #e5e5e5;color:#888888;";this.htQuoteStyles_view.se2_quote7="_zoom:1;margin:0 0 30px 0;padding:10px;border:1px solid #66b246;color:#888888;";this.htQuoteStyles_view.se2_quote8="_zoom:1;margin:0 0 30px 0;padding:10px;border:1px solid #e5e5e5;background:url("+b+"/bg_b1.png) repeat;_background:none;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b+"/bg_b1.png',sizingMethod='scale');color:#888888;";
this.htQuoteStyles_view.se2_quote9="_zoom:1;margin:0 0 30px 0;padding:10px;border:2px solid #e5e5e5;color:#888888;";this.htQuoteStyles_view.se2_quote10="_zoom:1;margin:0 0 30px 0;padding:10px;border:2px solid #e5e5e5;background:url("+b+"/bg_b1.png) repeat;_background:none;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b+"/bg_b1.png',sizingMethod='scale');color:#888888;"},_assignHTMLElements:function(){this.elDropdownLayer=jindo.$$.getSingle("DIV.husky_seditor_blockquote_layer",
this.oApp.htOptions.elAppContainer);this.aLI=jindo.$$("LI",this.elDropdownLayer)},$ON_REGISTER_CONVERTERS:function(){this.oApp.exec("ADD_CONVERTER",["DB_TO_IR",jindo.$Fn(function(a){return a=a.replace(/<(blockquote)[^>]*class=['"]?(se2_quote[0-9]+)['"]?[^>]*>/gi,"<$1 class=$2>")},this).bind()]);this.oApp.exec("ADD_CONVERTER",["IR_TO_DB",jindo.$Fn(function(a){var b=this.htQuoteStyles_view;return a=a.replace(/<(blockquote)[^>]*class=['"]?(se2_quote[0-9]+)['"]?[^>]*>/gi,function(a,d,e){return"<"+d+" class="+
e+' style="'+b[e]+'">'})},this).bind()]);this.htSE1toSE2Map={"01":"1","02":"2","03":"6","04":"8","05":"9","07":"3","08":"5"}},$LOCAL_BEFORE_FIRST:function(){this._assignHTMLElements();this.oApp.registerBrowserEvent(this.elDropdownLayer,"click","EVENT_SE2_BLOCKQUOTE_LAYER_CLICK",[]);this.oApp.delayedExec("SE2_ATTACH_HOVER_EVENTS",[this.aLI],0)},$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_UI_EVENT",["quote","click","TOGGLE_BLOCKQUOTE_LAYER"])},$ON_TOGGLE_BLOCKQUOTE_LAYER:function(){this.oApp.exec("TOGGLE_TOOLBAR_ACTIVE_LAYER",
[this.elDropdownLayer,null,"SELECT_UI",["quote"],"DESELECT_UI",["quote"]]);this.oApp.exec("MSG_NOTIFY_CLICKCR",["quote"])},$ON_EVENT_SE2_BLOCKQUOTE_LAYER_CLICK:function(a){(a=nhn.husky.SE2M_Utils.findAncestorByTagName("BUTTON",a.element))&&"BUTTON"==a.tagName&&this.oApp.exec("APPLY_BLOCKQUOTE",[a.className])},$ON_APPLY_BLOCKQUOTE:function(a){a.match(/(se2_quote[0-9]+)/)?this._wrapBlock("BLOCKQUOTE",RegExp.$1):this._unwrapBlock("BLOCKQUOTE");this.oApp.exec("HIDE_ACTIVE_LAYER",[])},_isExceedMaxDepth:function(a){var b=
function(a){var d=a.firstChild,e=0,f=0;if(!d)return a.tagName&&"BLOCKQUOTE"===a.tagName?1:0;for(;d&&!(1===d.nodeType&&(e=b(d),"BLOCKQUOTE"===d.tagName&&(e+=1),f<e&&(f=e),f>=this.nMaxLevel));)d=d.nextSibling;return f};return b(a)>=this.nMaxLevel},_unwrapBlock:function(a){for(var b=this.oApp.getSelection().commonAncestorContainer;b&&b.tagName!=a;)b=b.parentNode;if(b){for(this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["CANCEL BLOCK QUOTE",{sSaveTarget:"BODY"}]);b.firstChild;)b.parentNode.insertBefore(b.firstChild,
b);b.parentNode.removeChild(b);this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["CANCEL BLOCK QUOTE",{sSaveTarget:"BODY"}])}},_wrapBlock:function(a,b){var c,d,e,f,g=/BODY|TD|LI/i,h,j;this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["BLOCK QUOTE",{sSaveTarget:"BODY"}]);c=this.oApp.getSelection();d=c.startContainer===c.endContainer&&1===c.startContainer.nodeType&&"P"===c.startContainer.tagName&&nhn.husky.SE2M_Utils.isBlankNode(c.startContainer)?c.getLineInfo(!0):c.getLineInfo(!1);e=d.oStart;f=d.oEnd;d=e.bParentBreak&&
!g.test(e.oLineBreaker.tagName)?e.oNode.parentNode:e.oNode;e=f.bParentBreak&&!g.test(f.oLineBreaker.tagName)?f.oNode.parentNode:f.oNode;c.setStartBefore(d);c.setEndAfter(e);if(g=this._expandToTableStart(c,e))e=g,c.setEndAfter(g);if(g=this._expandToTableStart(c,d))d=g,c.setStartBefore(g);g=d;c.fixCommonAncestorContainer();d=c.commonAncestorContainer;if(f=this._findParentQuote(c.startContainer==c.endContainer&&1==c.endOffset-c.startOffset?c.startContainer.childNodes[c.startOffset]:c.commonAncestorContainer))f.className=
b;else{for(;!d.tagName||d.tagName&&d.tagName.match(/UL|OL|LI|IMG|IFRAME/);)d=d.parentNode;for(;g&&g!=d&&g.parentNode!=d;)g=g.parentNode;f=g==d?d.firstChild:g;g=c._document.createElement(a);b&&(g.className=b);d.insertBefore(g,f);c.setStartAfter(g);c.setEndAfter(e);c.surroundContents(g);if(this._isExceedMaxDepth(g)){alert(this.oApp.$MSG("SE2M_Quote.exceedMaxCount").replace("#MaxCount#",this.nMaxLevel+1));this.oApp.exec("HIDE_ACTIVE_LAYER",[]);c=g.nextSibling;e=g.parentNode;d=g.childNodes;f=[];jindo.$Element(g).leave();
g=0;for(h=d.length;g<h;g++)f[g]=d[g];g=0;for(h=f.length;g<h;g++)c?jindo.$Element(c).before(f[g]):jindo.$Element(e).append(f[g])}else return c.selectNodeContents(g),g&&(g.parentNode&&"BODY"==g.parentNode.tagName&&!g.nextSibling)&&(e=c._document.createElement("P"),e.innerHTML="&nbsp;",g.parentNode.insertBefore(e,g.nextSibling)),nhn.husky.SE2M_Utils.isBlankNode(g)&&(g.innerHTML="&nbsp;",c.selectNodeContents(g),c.collapseToStart(),c.select()),this.oApp.exec("REFRESH_WYSIWYG"),setTimeout(jindo.$Fn(function(a){j=
a.placeStringBookmark();a.select();a.removeStringBookmark(j);this.oApp.exec("FOCUS")},this).bind(c),0),this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["BLOCK QUOTE",{sSaveTarget:"BODY"}]),g}},_expandToTableStart:function(a,b){for(var c=a.commonAncestorContainer,d=null,e=!1;b&&!e;){b==c&&(e=!0);if(/TBODY|TFOOT|THEAD|TR/i.test(b.tagName)){d=this._getTableRoot(b);break}b=b.parentNode}return d},_getTableRoot:function(a){for(;a&&"TABLE"!=a.tagName;)a=a.parentNode;return a},_setStyle:function(a,b){a.setAttribute("style",
b);a.style.cssText=b},$ON_EVENT_EDITING_AREA_KEYDOWN:function(a){var b,c;if("WYSIWYG"===this.oApp.getEditingMode()&&8===a.key().keyCode&&(b=this.oApp.getSelection(),b.fixCommonAncestorContainer(),(c=this._findParentQuote(b.commonAncestorContainer))&&this._isBlankQuote(c)))a.stop(jindo.$Event.CANCEL_DEFAULT),b.selectNode(c),b.collapseToStart(),jindo.$Element(c).leave(),b.select()},$ON_EVENT_EDITING_AREA_KEYUP:function(a){var b,c;if("WYSIWYG"===this.oApp.getEditingMode()&&46===a.key().keyCode){b=this.oApp.getSelection();
b.fixCommonAncestorContainer();c=this._findParentQuote(b.commonAncestorContainer);if(!c)return!1;c.nextSibling||(a.stop(jindo.$Event.CANCEL_DEFAULT),a=b._document.createElement("P"),a.innerHTML="&nbsp;",jindo.$Element(c).after(a),setTimeout(jindo.$Fn(function(a){var b=a.placeStringBookmark();a.select();a.removeStringBookmark(b)},this).bind(b),0))}},_isBlankQuote:function(a){var b,c,d;c=this.oApp.oNavigator.chrome;d=this.oApp.oNavigator.safari;var e=function(a){a=a.replace(/[\r\n]/ig,"").replace(unescape("%uFEFF"),
"");return""===a||"&nbsp;"===a||" "===a?!0:!1};if(e(a.innerHTML)||"<br>"===a.innerHTML)return!0;if(c||d){d=jindo.$$("TABLE",a);b=d.length;var f;for(c=0;c<b;c++){f=d[c];var g;g=0===jindo.$$("tr",f).length?!0:!1;g&&jindo.$Element(f).leave()}}a=a.childNodes;c=0;for(d=a.length;c<d;c++)if(b=a[c],b=3===b.nodeType&&e(b.nodeValue)?!0:("P"===b.tagName||"SPAN"===b.tagName)&&(e(b.innerHTML)||"<br>"===b.innerHTML)?!0:!1,!b)return!1;return!0},_findParentQuote:function(a){return this._findAncestor(jindo.$Fn(function(a){return!a||
"BLOCKQUOTE"!==a.tagName||!a.className||!this.htQuoteStyles_view[a.className]?!1:!0},this).bind(),a)},_findAncestor:function(a,b){for(;b&&!a(b);)b=b.parentNode;return b}});
nhn.husky.SE2M_SCharacter=jindo.$Class({name:"SE2M_SCharacter",$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_UI_EVENT",["sCharacter","click","TOGGLE_SCHARACTER_LAYER"])},_assignHTMLObjects:function(a){a=jindo.$(a)||document;this.elDropdownLayer=jindo.$$.getSingle("DIV.husky_seditor_sCharacter_layer",a);this.oTextField=jindo.$$.getSingle("INPUT",this.elDropdownLayer);this.oInsertButton=jindo.$$.getSingle("BUTTON.se2_confirm",this.elDropdownLayer);this.aCloseButton=jindo.$$("BUTTON.husky_se2m_sCharacter_close",
this.elDropdownLayer);this.aSCharList=jindo.$$("UL.husky_se2m_sCharacter_list",this.elDropdownLayer);a=jindo.$$.getSingle("UL.se2_char_tab",this.elDropdownLayer);this.aLabel=jindo.$$(">LI",a)},$LOCAL_BEFORE_FIRST:function(){this.bIE=jindo.$Agent().navigator().ie;this._assignHTMLObjects(this.oApp.htOptions.elAppContainer);this.charSet=[];this.charSet[0]=unescape("FF5B FF5D 3014 3015 3008 3009 300A 300B 300C 300D 300E 300F 3010 3011 2018 2019 201C 201D 3001 3002 %B7 2025 2026 %A7 203B 2606 2605 25CB 25CF 25CE 25C7 25C6 25A1 25A0 25B3 25B2 25BD 25BC 25C1 25C0 25B7 25B6 2664 2660 2661 2665 2667 2663 2299 25C8 25A3 25D0 25D1 2592 25A4 25A5 25A8 25A7 25A6 25A9 %B1 %D7 %F7 2260 2264 2265 221E 2234 %B0 2032 2033 2220 22A5 2312 2202 2261 2252 226A 226B 221A 223D 221D 2235 222B 222C 2208 220B 2286 2287 2282 2283 222A 2229 2227 2228 FFE2 21D2 21D4 2200 2203 %B4 FF5E 02C7 02D8 02DD 02DA 02D9 %B8 02DB %A1 %BF 02D0 222E 2211 220F 266D 2669 266A 266C 327F 2192 2190 2191 2193 2194 2195 2197 2199 2196 2198 321C 2116 33C7 2122 33C2 33D8 2121 2668 260F 260E 261C 261E %B6 2020 2021 %AE %AA %BA 2642 2640").replace(/(\S{4})/g,
function(a){return"%u"+a}).split(" ");this.charSet[1]=unescape("%BD 2153 2154 %BC %BE 215B 215C 215D 215E %B9 %B2 %B3 2074 207F 2081 2082 2083 2084 2160 2161 2162 2163 2164 2165 2166 2167 2168 2169 2170 2171 2172 2173 2174 2175 2176 2177 2178 2179 FFE6 %24 FFE5 FFE1 20AC 2103 212B 2109 FFE0 %A4 2030 3395 3396 3397 2113 3398 33C4 33A3 33A4 33A5 33A6 3399 339A 339B 339C 339D 339E 339F 33A0 33A1 33A2 33CA 338D 338E 338F 33CF 3388 3389 33C8 33A7 33A8 33B0 33B1 33B2 33B3 33B4 33B5 33B6 33B7 33B8 33B9 3380 3381 3382 3383 3384 33BA 33BB 33BC 33BD 33BE 33BF 3390 3391 3392 3393 3394 2126 33C0 33C1 338A 338B 338C 33D6 33C5 33AD 33AE 33AF 33DB 33A9 33AA 33AB 33AC 33DD 33D0 33D3 33C3 33C9 33DC 33C6").replace(/(\S{4})/g,
function(a){return"%u"+a}).split(" ");this.charSet[2]=unescape("3260 3261 3262 3263 3264 3265 3266 3267 3268 3269 326A 326B 326C 326D 326E 326F 3270 3271 3272 3273 3274 3275 3276 3277 3278 3279 327A 327B 24D0 24D1 24D2 24D3 24D4 24D5 24D6 24D7 24D8 24D9 24DA 24DB 24DC 24DD 24DE 24DF 24E0 24E1 24E2 24E3 24E4 24E5 24E6 24E7 24E8 24E9 2460 2461 2462 2463 2464 2465 2466 2467 2468 2469 246A 246B 246C 246D 246E 3200 3201 3202 3203 3204 3205 3206 3207 3208 3209 320A 320B 320C 320D 320E 320F 3210 3211 3212 3213 3214 3215 3216 3217 3218 3219 321A 321B 249C 249D 249E 249F 24A0 24A1 24A2 24A3 24A4 24A5 24A6 24A7 24A8 24A9 24AA 24AB 24AC 24AD 24AE 24AF 24B0 24B1 24B2 24B3 24B4 24B5 2474 2475 2476 2477 2478 2479 247A 247B 247C 247D 247E 247F 2480 2481 2482").replace(/(\S{4})/g,
function(a){return"%u"+a}).split(" ");this.charSet[3]=unescape("3131 3132 3133 3134 3135 3136 3137 3138 3139 313A 313B 313C 313D 313E 313F 3140 3141 3142 3143 3144 3145 3146 3147 3148 3149 314A 314B 314C 314D 314E 314F 3150 3151 3152 3153 3154 3155 3156 3157 3158 3159 315A 315B 315C 315D 315E 315F 3160 3161 3162 3163 3165 3166 3167 3168 3169 316A 316B 316C 316D 316E 316F 3170 3171 3172 3173 3174 3175 3176 3177 3178 3179 317A 317B 317C 317D 317E 317F 3180 3181 3182 3183 3184 3185 3186 3187 3188 3189 318A 318B 318C 318D 318E").replace(/(\S{4})/g,
function(a){return"%u"+a}).split(" ");this.charSet[4]=unescape("0391 0392 0393 0394 0395 0396 0397 0398 0399 039A 039B 039C 039D 039E 039F 03A0 03A1 03A3 03A4 03A5 03A6 03A7 03A8 03A9 03B1 03B2 03B3 03B4 03B5 03B6 03B7 03B8 03B9 03BA 03BB 03BC 03BD 03BE 03BF 03C0 03C1 03C3 03C4 03C5 03C6 03C7 03C8 03C9 %C6 %D0 0126 0132 013F 0141 %D8 0152 %DE 0166 014A %E6 0111 %F0 0127 I 0133 0138 0140 0142 0142 0153 %DF %FE 0167 014B 0149 0411 0413 0414 0401 0416 0417 0418 0419 041B 041F 0426 0427 0428 0429 042A 042B 042C 042D 042E 042F 0431 0432 0433 0434 0451 0436 0437 0438 0439 043B 043F 0444 0446 0447 0448 0449 044A 044B 044C 044D 044E 044F").replace(/(\S{4})/g,
function(a){return"%u"+a}).split(" ");this.charSet[5]=unescape("3041 3042 3043 3044 3045 3046 3047 3048 3049 304A 304B 304C 304D 304E 304F 3050 3051 3052 3053 3054 3055 3056 3057 3058 3059 305A 305B 305C 305D 305E 305F 3060 3061 3062 3063 3064 3065 3066 3067 3068 3069 306A 306B 306C 306D 306E 306F 3070 3071 3072 3073 3074 3075 3076 3077 3078 3079 307A 307B 307C 307D 307E 307F 3080 3081 3082 3083 3084 3085 3086 3087 3088 3089 308A 308B 308C 308D 308E 308F 3090 3091 3092 3093 30A1 30A2 30A3 30A4 30A5 30A6 30A7 30A8 30A9 30AA 30AB 30AC 30AD 30AE 30AF 30B0 30B1 30B2 30B3 30B4 30B5 30B6 30B7 30B8 30B9 30BA 30BB 30BC 30BD 30BE 30BF 30C0 30C1 30C2 30C3 30C4 30C5 30C6 30C7 30C8 30C9 30CA 30CB 30CC 30CD 30CE 30CF 30D0 30D1 30D2 30D3 30D4 30D5 30D6 30D7 30D8 30D9 30DA 30DB 30DC 30DD 30DE 30DF 30E0 30E1 30E2 30E3 30E4 30E5 30E6 30E7 30E8 30E9 30EA 30EB 30EC 30ED 30EE 30EF 30F0 30F1 30F2 30F3 30F4 30F5 30F6").replace(/(\S{4})/g,
function(a){return"%u"+a}).split(" ");var a=jindo.$Fn(this.oApp.exec,this.oApp).bind("INSERT_SCHARACTERS",[this.oTextField.value]);jindo.$Fn(a,this).attach(this.oInsertButton,"click");this.oApp.exec("SET_SCHARACTER_LIST",[this.charSet]);for(a=0;a<this.aLabel.length;a++){var b=jindo.$Fn(this.oApp.exec,this.oApp).bind("CHANGE_SCHARACTER_SET",[a]);jindo.$Fn(b,this).attach(this.aLabel[a].firstChild,"mousedown")}for(a=0;a<this.aCloseButton.length;a++)this.oApp.registerBrowserEvent(this.aCloseButton[a],
"click","HIDE_ACTIVE_LAYER",[]);this.oApp.registerBrowserEvent(this.elDropdownLayer,"click","EVENT_SCHARACTER_CLICKED",[])},$ON_TOGGLE_SCHARACTER_LAYER:function(){this.oTextField.value="";this.oSelection=this.oApp.getSelection();this.oApp.exec("TOGGLE_TOOLBAR_ACTIVE_LAYER",[this.elDropdownLayer,null,"MSG_SCHARACTER_LAYER_SHOWN",[],"MSG_SCHARACTER_LAYER_HIDDEN",[""]]);this.oApp.exec("MSG_NOTIFY_CLICKCR",["symbol"])},$ON_MSG_SCHARACTER_LAYER_SHOWN:function(){this.oTextField.focus();this.oApp.exec("SELECT_UI",
["sCharacter"])},$ON_MSG_SCHARACTER_LAYER_HIDDEN:function(){this.oApp.exec("DESELECT_UI",["sCharacter"])},$ON_EVENT_SCHARACTER_CLICKED:function(a){var b=nhn.husky.SE2M_Utils.findAncestorByTagName("BUTTON",a.element);b&&"BUTTON"==b.tagName&&"LI"==b.parentNode.tagName&&(b=b.firstChild.innerHTML,1<b.length||(this.oApp.exec("SELECT_SCHARACTER",[b]),a.stop()))},$ON_SELECT_SCHARACTER:function(a){this.oTextField.value+=a;this.oTextField.createTextRange?(a=this.oTextField.createTextRange(),a.collapse(!1),
a.select()):this.oTextField.selectionEnd&&(this.oTextField.selectionEnd=this.oTextField.value.length,this.oTextField.focus())},$ON_INSERT_SCHARACTERS:function(){this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["INSERT SCHARACTER"]);this.oSelection.pasteHTML(this.oTextField.value);this.oSelection.collapseToEnd();this.oSelection.select();this.oApp.exec("FOCUS");this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["INSERT SCHARACTER"]);this.oApp.exec("HIDE_ACTIVE_LAYER",[])},$ON_CHANGE_SCHARACTER_SET:function(a){for(var b=
0;b<this.aSCharList.length;b++)if(jindo.$Element(this.aLabel[b]).hasClass("active")){if(b==a)return;jindo.$Element(this.aLabel[b]).removeClass("active")}this._drawSCharList(a);jindo.$Element(this.aLabel[a]).addClass("active")},$ON_SET_SCHARACTER_LIST:function(a){this.charSet=a;this.bSCharSetDrawn=Array(this.charSet.length);this._drawSCharList(0)},_drawSCharList:function(a){if(!this.bSCharSetDrawn[a]){this.bSCharSetDrawn[a]=!0;var b=this.charSet[a].length,c=Array(b);this.aSCharList[a].innerHTML="";
for(var d,e,f=0;f<b;f++)c[f]=jindo.$("<LI>"),this.bIE?(d=jindo.$("<BUTTON>"),d.setAttribute("type","button")):(d=jindo.$("<BUTTON>"),d.type="button"),e=jindo.$("<SPAN>"),e.innerHTML=unescape(this.charSet[a][f]),d.appendChild(e),c[f].appendChild(d),c[f].onmouseover=function(){this.className="hover"},c[f].onmouseout=function(){this.className=""},this.aSCharList[a].appendChild(c[f])}}});
nhn.husky.SE2M_TableBlockStyler=jindo.$Class({name:"SE2M_TableBlockStyler",nSelectedTD:0,htSelectedTD:{},aTdRange:[],$init:function(){},$LOCAL_BEFORE_ALL:function(){return"WYSIWYG"==this.oApp.getEditingMode()},$ON_MSG_APP_READY:function(){this.oDocument=this.oApp.getWYSIWYGDocument()},$ON_EVENT_EDITING_AREA_MOUSEUP:function(){"WYSIWYG"==this.oApp.getEditingMode()&&this.setTdBlock()},$ON_IS_SELECTED_TD_BLOCK:function(a,b){b[a]=0<this.nSelectedTD?!0:!1;return b[a]},$ON_GET_SELECTED_TD_BLOCK:function(a,
b){b[a]=this.htSelectedTD.aTdCells},setTdBlock:function(){this.oApp.exec("GET_SELECTED_CELLS",["aTdCells",this.htSelectedTD]);var a=this.htSelectedTD.aTdCells;a&&(this.nSelectedTD=a.length)},$ON_DELETE_BLOCK_CONTENTS:function(){var a=this,b,c,d;this.setTdBlock();for(var e=0;e<this.nSelectedTD;e++)jindo.$Element(this.htSelectedTD.aTdCells[e]).child(function(e){b=jindo.$Element(e._element.parentNode);b.remove(e);c=a.oDocument.createElement("P");d=jindo.$Agent().navigator().firefox?a.oDocument.createElement("BR"):
a.oDocument.createTextNode("\u00a0");c.appendChild(d);b.append(c)},1)}});
nhn.husky.SE2M_TableCreator=jindo.$Class({name:"SE2M_TableCreator",_sSETblClass:"__se_tbl",nRows:3,nColumns:4,nBorderSize:1,sBorderColor:"#000000",sBGColor:"#000000",nBorderStyleIdx:3,nTableStyleIdx:1,nMinRows:1,nMaxRows:20,nMinColumns:1,nMaxColumns:20,nMinBorderWidth:1,nMaxBorderWidth:10,rxLastDigits:null,sReEditGuideMsg_table:null,oSelection:null,$ON_MSG_APP_READY:function(){this.sReEditGuideMsg_table=this.oApp.$MSG(nhn.husky.SE2M_Configuration.SE2M_ReEditAction.aReEditGuideMsg[3]);this.oApp.exec("REGISTER_UI_EVENT",
["table","click","TOGGLE_TABLE_LAYER"])},$ON_REGISTER_CONVERTERS:function(){this.oApp.exec("ADD_CONVERTER_DOM",["IR_TO_DB",jindo.$Fn(this.irToDbDOM,this).bind()]);this.oApp.exec("ADD_CONVERTER_DOM",["DB_TO_IR",jindo.$Fn(this.dbToIrDOM,this).bind()])},irToDbDOM:function(a){var b=[];a=jindo.$$("table[class=__se_tbl]",a,{oneTimeOffCache:!0});jindo.$A(a).forEach(function(a){jindo.$Element(a).attr("attr_no_border_tbl")&&b.push(a)},this);if(!(1>b.length)){var c=[];a=0;for(var d=b.length;a<d;a++)c=b[a],
jindo.$Element(c).css({border:"",borderLeft:"",borderBottom:""}),jindo.$Element(c).attr({border:0,cellpadding:1}),c=jindo.$$("tbody>tr>td",c),jindo.$A(c).forEach(function(a){jindo.$Element(a).css({border:"",borderTop:"",borderRight:""})})}},dbToIrDOM:function(a){var b=[];a=jindo.$$("table[class=__se_tbl]",a,{oneTimeOffCache:!0});jindo.$A(a).forEach(function(a){jindo.$Element(a).attr("attr_no_border_tbl")&&b.push(a)},this);if(!(1>b.length)){var c=[];a=0;for(var d=b.length;a<d;a++)c=b[a],jindo.$Element(c).css({border:"1px dashed #c7c7c7",
borderLeft:0,borderBottom:0}),jindo.$Element(c).attr({border:1,cellpadding:0}),c=jindo.$$("tbody>tr>td",c),jindo.$A(c).forEach(function(a){jindo.$Element(a).css({border:"1px dashed #c7c7c7",borderTop:0,borderRight:0})})}},_assignHTMLObjects:function(a){this.oApp.exec("LOAD_HTML",["create_table"]);var b=null;this.elDropdownLayer=jindo.$$.getSingle("DIV.husky_se2m_table_layer",a);this.welDropdownLayer=jindo.$Element(this.elDropdownLayer);b=jindo.$$("INPUT",this.elDropdownLayer);this.elText_row=b[0];
this.elText_col=b[1];this.elRadio_manualStyle=b[2];this.elText_borderSize=b[3];this.elText_borderColor=b[4];this.elText_BGColor=b[5];this.elRadio_templateStyle=b[6];b=jindo.$$("BUTTON",this.elDropdownLayer);this.elBtn_rowInc=b[0];this.elBtn_rowDec=b[1];this.elBtn_colInc=b[2];this.elBtn_colDec=b[3];this.elBtn_borderStyle=b[4];this.elBtn_incBorderSize=jindo.$$.getSingle("BUTTON.se2m_incBorder",this.elDropdownLayer);this.elBtn_decBorderSize=jindo.$$.getSingle("BUTTON.se2m_decBorder",this.elDropdownLayer);
this.elLayer_Dim1=jindo.$$.getSingle("DIV.se2_t_dim0",this.elDropdownLayer);this.elLayer_Dim2=jindo.$$.getSingle("DIV.se2_t_dim3",this.elDropdownLayer);b=jindo.$$("SPAN.se2_pre_color>BUTTON",this.elDropdownLayer);this.elBtn_borderColor=b[0];this.elBtn_BGColor=b[1];this.elBtn_tableStyle=jindo.$$.getSingle("DIV.se2_select_ty2>BUTTON",this.elDropdownLayer);b=jindo.$$("P.se2_btn_area>BUTTON",this.elDropdownLayer);this.elBtn_apply=b[0];this.elBtn_cancel=b[1];this.elTable_preview=jindo.$$.getSingle("TABLE.husky_se2m_table_preview",
this.elDropdownLayer);this.elLayer_borderStyle=jindo.$$.getSingle("DIV.husky_se2m_table_border_style_layer",this.elDropdownLayer);this.elPanel_borderStylePreview=jindo.$$.getSingle("SPAN.husky_se2m_table_border_style_preview",this.elDropdownLayer);this.elPanel_borderColorPallet=jindo.$$.getSingle("DIV.husky_se2m_table_border_color_pallet",this.elDropdownLayer);this.elPanel_bgColorPallet=jindo.$$.getSingle("DIV.husky_se2m_table_bgcolor_pallet",this.elDropdownLayer);this.elLayer_tableStyle=jindo.$$.getSingle("DIV.husky_se2m_table_style_layer",
this.elDropdownLayer);this.elPanel_tableStylePreview=jindo.$$.getSingle("SPAN.husky_se2m_table_style_preview",this.elDropdownLayer);this.aElBtn_borderStyle=jindo.$$("BUTTON",this.elLayer_borderStyle);this.aElBtn_tableStyle=jindo.$$("BUTTON",this.elLayer_tableStyle);this.sNoBorderText=jindo.$$.getSingle("SPAN.se2m_no_border",this.elDropdownLayer).innerHTML;this.rxLastDigits=/([0-9]+)$/},$LOCAL_BEFORE_FIRST:function(){this._assignHTMLObjects(this.oApp.htOptions.elAppContainer);this.oApp.registerBrowserEvent(this.elText_row,
"change","TABLE_SET_ROW_NUM",[null,0]);this.oApp.registerBrowserEvent(this.elText_col,"change","TABLE_SET_COLUMN_NUM",[null,0]);this.oApp.registerBrowserEvent(this.elText_borderSize,"change","TABLE_SET_BORDER_SIZE",[null,0]);this.oApp.registerBrowserEvent(this.elBtn_rowInc,"click","TABLE_INC_ROW");this.oApp.registerBrowserEvent(this.elBtn_rowDec,"click","TABLE_DEC_ROW");jindo.$Fn(this._numRowKeydown,this).attach(this.elText_row.parentNode,"keydown");this.oApp.registerBrowserEvent(this.elBtn_colInc,
"click","TABLE_INC_COLUMN");this.oApp.registerBrowserEvent(this.elBtn_colDec,"click","TABLE_DEC_COLUMN");jindo.$Fn(this._numColKeydown,this).attach(this.elText_col.parentNode,"keydown");this.oApp.registerBrowserEvent(this.elBtn_incBorderSize,"click","TABLE_INC_BORDER_SIZE");this.oApp.registerBrowserEvent(this.elBtn_decBorderSize,"click","TABLE_DEC_BORDER_SIZE");jindo.$Fn(this._borderSizeKeydown,this).attach(this.elText_borderSize.parentNode,"keydown");this.oApp.registerBrowserEvent(this.elBtn_borderStyle,
"click","TABLE_TOGGLE_BORDER_STYLE_LAYER");this.oApp.registerBrowserEvent(this.elBtn_tableStyle,"click","TABLE_TOGGLE_STYLE_LAYER");this.oApp.registerBrowserEvent(this.elBtn_borderColor,"click","TABLE_TOGGLE_BORDER_COLOR_PALLET");this.oApp.registerBrowserEvent(this.elBtn_BGColor,"click","TABLE_TOGGLE_BGCOLOR_PALLET");this.oApp.registerBrowserEvent(this.elRadio_manualStyle,"click","TABLE_ENABLE_MANUAL_STYLE");this.oApp.registerBrowserEvent(this.elRadio_templateStyle,"click","TABLE_ENABLE_TEMPLATE_STYLE");
this.oApp.exec("SE2_ATTACH_HOVER_EVENTS",[this.aElBtn_borderStyle]);this.oApp.exec("SE2_ATTACH_HOVER_EVENTS",[this.aElBtn_tableStyle]);var a;for(a=0;a<this.aElBtn_borderStyle.length;a++)this.oApp.registerBrowserEvent(this.aElBtn_borderStyle[a],"click","TABLE_SELECT_BORDER_STYLE");for(a=0;a<this.aElBtn_tableStyle.length;a++)this.oApp.registerBrowserEvent(this.aElBtn_tableStyle[a],"click","TABLE_SELECT_STYLE");this.oApp.registerBrowserEvent(this.elBtn_apply,"click","TABLE_INSERT");this.oApp.registerBrowserEvent(this.elBtn_cancel,
"click","HIDE_ACTIVE_LAYER");this.oApp.exec("TABLE_SET_BORDER_COLOR",[/#[0-9A-Fa-f]{6}/.test(this.elText_borderColor.value)?this.elText_borderColor.value:"#cccccc"]);this.oApp.exec("TABLE_SET_BGCOLOR",[/#[0-9A-Fa-f]{6}/.test(this.elText_BGColor.value)?this.elText_BGColor.value:"#ffffff"]);this.nStyleMode=1;this.aTableStyleByBorder=',border="1" cellpadding="0" cellspacing="0" style="border:1px dashed #c7c7c7; border-left:0; border-bottom:0;",border="1" cellpadding="0" cellspacing="0" style="border:#BorderSize#px dashed #BorderColor#; border-left:0; border-bottom:0;",border="0" cellpadding="0" cellspacing="0" style="border:#BorderSize#px solid #BorderColor#; border-left:0; border-bottom:0;",border="0" cellpadding="0" cellspacing="1" style="border:#BorderSize#px solid #BorderColor#;",border="0" cellpadding="0" cellspacing="1" style="border:#BorderSize#px double #BorderColor#;",border="0" cellpadding="0" cellspacing="1" style="border-width:#BorderSize*2#px #BorderSize#px #BorderSize#px #BorderSize*2#px; border-style:solid;border-color:#BorderColor#;",border="0" cellpadding="0" cellspacing="1" style="border-width:#BorderSize#px #BorderSize*2#px #BorderSize*2#px #BorderSize#px; border-style:solid;border-color:#BorderColor#;"'.split(",");
this.aTDStyleByBorder=',style="border:1px dashed #c7c7c7; border-top:0; border-right:0; background-color:#BGColor#",style="border:#BorderSize#px dashed #BorderColor#; border-top:0; border-right:0; background-color:#BGColor#",style="border:#BorderSize#px solid #BorderColor#; border-top:0; border-right:0; background-color:#BGColor#",style="border:#BorderSize#px solid #BorderColor#; background-color:#BGColor#",style="border:#BorderSize+2#px double #BorderColor#; background-color:#BGColor#",style="border-width:#BorderSize#px #BorderSize*2#px #BorderSize*2#px #BorderSize#px; border-style:solid;border-color:#BorderColor#; background-color:#BGColor#",style="border-width:#BorderSize*2#px #BorderSize#px #BorderSize#px #BorderSize*2#px; border-style:solid;border-color:#BorderColor#; background-color:#BGColor#"'.split(",");
this.oApp.registerBrowserEvent(this.elDropdownLayer,"keydown","EVENT_TABLE_CREATE_KEYDOWN");this._drawTableDropdownLayer()},$ON_TABLE_SELECT_BORDER_STYLE:function(a){a=this.rxLastDigits.exec(a.currentElement.className);this._selectBorderStyle(a[1])},$ON_TABLE_SELECT_STYLE:function(a){a=this.rxLastDigits.exec(a.element.className);this._selectTableStyle(a[1])},$ON_TOGGLE_TABLE_LAYER:function(){this._showNewTable();this.oApp.exec("TOGGLE_TOOLBAR_ACTIVE_LAYER",[this.elDropdownLayer,null,"SELECT_UI",["table"],
"TABLE_CLOSE",[]]);this.oApp.exec("MSG_NOTIFY_CLICKCR",["table"])},$ON_TABLE_BORDER_STYLE_LAYER_CLICKED:function(a){top.document.title=a.element.tagName},$ON_TABLE_CLOSE_ALL:function(){this.oApp.exec("TABLE_HIDE_BORDER_COLOR_PALLET",[]);this.oApp.exec("TABLE_HIDE_BGCOLOR_PALLET",[]);this.oApp.exec("TABLE_HIDE_BORDER_STYLE_LAYER",[]);this.oApp.exec("TABLE_HIDE_STYLE_LAYER",[])},$ON_TABLE_INC_ROW:function(){this.oApp.exec("TABLE_SET_ROW_NUM",[null,1])},$ON_TABLE_DEC_ROW:function(){this.oApp.exec("TABLE_SET_ROW_NUM",
[null,-1])},$ON_TABLE_INC_COLUMN:function(){this.oApp.exec("TABLE_SET_COLUMN_NUM",[null,1])},$ON_TABLE_DEC_COLUMN:function(){this.oApp.exec("TABLE_SET_COLUMN_NUM",[null,-1])},$ON_TABLE_SET_ROW_NUM:function(a,b){a=a||parseInt(this.elText_row.value,10)||0;a+=b||0;a<this.nMinRows&&(a=this.nMinRows);a>this.nMaxRows&&(a=this.nMaxRows);this.elText_row.value=a;this._showNewTable()},$ON_TABLE_SET_COLUMN_NUM:function(a,b){a=a||parseInt(this.elText_col.value,10)||0;a+=b||0;a<this.nMinColumns&&(a=this.nMinColumns);
a>this.nMaxColumns&&(a=this.nMaxColumns);this.elText_col.value=a;this._showNewTable()},_getTableString:function(){return 1==this.nStyleMode?this._doGetTableString(this.nColumns,this.nRows,this.nBorderSize,this.sBorderColor,this.sBGColor,this.nBorderStyleIdx):this._doGetTableString(this.nColumns,this.nRows,this.nBorderSize,this.sBorderColor,this.sBGColor,0)},$ON_TABLE_INSERT:function(){this.oApp.exec("IE_FOCUS",[]);this.oApp.exec("TABLE_SET_COLUMN_NUM");this.oApp.exec("TABLE_SET_ROW_NUM");this._loadValuesFromHTML();
var a,b,c,d;a=this.oApp.getWYSIWYGDocument().body;jindo.$Element(a);b=jindo.$Agent().navigator();this.nTableWidth=a.offsetWidth;a=this._getTableString();c=this.oApp.getWYSIWYGDocument().createElement("DIV");c.innerHTML=a;c=c.firstChild;c.className=this._sSETblClass;a=this.oApp.getSelection();a=this._divideParagraph(a);this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["INSERT TABLE",{sSaveTarget:"BODY"}]);d=this.oApp.getWYSIWYGDocument().createElement("DIV");a.deleteContents();a.insertNode(d);a.selectNode(d);
this.oApp.exec("REMOVE_STYLE",[a]);b.ie&&1===this.oApp.getWYSIWYGDocument().body.childNodes.length&&this.oApp.getWYSIWYGDocument().body.firstChild===d?d.insertBefore(c,null):(d.parentNode.insertBefore(c,d),d.parentNode.removeChild(d));b.firefox?(b=this.oApp.getWYSIWYGDocument().createElement("BR"),c.parentNode.insertBefore(b,c.nextSibling)):b.ie&&(b=this.oApp.getWYSIWYGDocument().createElement("p"),c.parentNode.insertBefore(b,c.nextSibling));2==this.nStyleMode&&this.oApp.exec("STYLE_TABLE",[c,this.nTableStyleIdx]);
b=c.getElementsByTagName("TD")[0];a.selectNodeContents(b.firstChild||b);a.collapseToEnd();a.select();this.oApp.exec("FOCUS");this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["INSERT TABLE",{sSaveTarget:"BODY"}]);this.oApp.exec("HIDE_ACTIVE_LAYER",[]);this.oApp.exec("MSG_DISPLAY_REEDIT_MESSAGE_SHOW",[this.name,this.sReEditGuideMsg_table])},_divideParagraph:function(a){var b,c,d,e;a.fixCommonAncestorContainer();b=a.findAncestorByTagName("P");if(!b)return a;if(!b.firstChild||nhn.husky.SE2M_Utils.isBlankNode(b))return a.selectNode(b),
a.select(),a;c=a.placeStringBookmark();a.moveToBookmark(c);d=this.oApp.getWYSIWYGDocument().createElement("P");a.setStartBefore(b.firstChild);a.surroundContents(d);a.collapseToEnd();e=this.oApp.getWYSIWYGDocument().createElement("P");a.setEndAfter(b.lastChild);a.surroundContents(e);a.collapseToStart();a.removeStringBookmark(c);a=jindo.$Element(b);a.after(e);a.after(d);a.leave();a=this.oApp.getEmptySelection();a.setEndAfter(d);a.setStartBefore(e);a.select();return a},$ON_TABLE_CLOSE:function(){this.oApp.exec("TABLE_CLOSE_ALL",
[]);this.oApp.exec("DESELECT_UI",["table"])},$ON_TABLE_SET_BORDER_SIZE:function(a,b){a=a||parseInt(this.elText_borderSize.value,10)||0;a+=b||0;a<this.nMinBorderWidth&&(a=this.nMinBorderWidth);a>this.nMaxBorderWidth&&(a=this.nMaxBorderWidth);this.elText_borderSize.value=a},$ON_TABLE_INC_BORDER_SIZE:function(){this.oApp.exec("TABLE_SET_BORDER_SIZE",[null,1])},$ON_TABLE_DEC_BORDER_SIZE:function(){this.oApp.exec("TABLE_SET_BORDER_SIZE",[null,-1])},$ON_TABLE_TOGGLE_BORDER_STYLE_LAYER:function(){"block"==
this.elLayer_borderStyle.style.display?this.oApp.exec("TABLE_HIDE_BORDER_STYLE_LAYER",[]):this.oApp.exec("TABLE_SHOW_BORDER_STYLE_LAYER",[])},$ON_TABLE_SHOW_BORDER_STYLE_LAYER:function(){this.oApp.exec("TABLE_CLOSE_ALL",[]);this.elBtn_borderStyle.className="se2_view_more2";this.elLayer_borderStyle.style.display="block";this._refresh()},$ON_TABLE_HIDE_BORDER_STYLE_LAYER:function(){this.elBtn_borderStyle.className="se2_view_more";this.elLayer_borderStyle.style.display="none";this._refresh()},$ON_TABLE_TOGGLE_STYLE_LAYER:function(){"block"==
this.elLayer_tableStyle.style.display?this.oApp.exec("TABLE_HIDE_STYLE_LAYER",[]):this.oApp.exec("TABLE_SHOW_STYLE_LAYER",[])},$ON_TABLE_SHOW_STYLE_LAYER:function(){this.oApp.exec("TABLE_CLOSE_ALL",[]);this.elBtn_tableStyle.className="se2_view_more2";this.elLayer_tableStyle.style.display="block";this._refresh()},$ON_TABLE_HIDE_STYLE_LAYER:function(){this.elBtn_tableStyle.className="se2_view_more";this.elLayer_tableStyle.style.display="none";this._refresh()},$ON_TABLE_TOGGLE_BORDER_COLOR_PALLET:function(){this.welDropdownLayer.hasClass("p1")?
this.oApp.exec("TABLE_HIDE_BORDER_COLOR_PALLET",[]):this.oApp.exec("TABLE_SHOW_BORDER_COLOR_PALLET",[])},$ON_TABLE_SHOW_BORDER_COLOR_PALLET:function(){this.oApp.exec("TABLE_CLOSE_ALL",[]);this.welDropdownLayer.addClass("p1");this.welDropdownLayer.removeClass("p2");this.oApp.exec("SHOW_COLOR_PALETTE",["TABLE_SET_BORDER_COLOR_FROM_PALETTE",this.elPanel_borderColorPallet]);this.elPanel_borderColorPallet.parentNode.style.display="block"},$ON_TABLE_HIDE_BORDER_COLOR_PALLET:function(){this.welDropdownLayer.removeClass("p1");
this.oApp.exec("HIDE_COLOR_PALETTE",[]);this.elPanel_borderColorPallet.parentNode.style.display="none"},$ON_TABLE_TOGGLE_BGCOLOR_PALLET:function(){this.welDropdownLayer.hasClass("p2")?this.oApp.exec("TABLE_HIDE_BGCOLOR_PALLET",[]):this.oApp.exec("TABLE_SHOW_BGCOLOR_PALLET",[])},$ON_TABLE_SHOW_BGCOLOR_PALLET:function(){this.oApp.exec("TABLE_CLOSE_ALL",[]);this.welDropdownLayer.removeClass("p1");this.welDropdownLayer.addClass("p2");this.oApp.exec("SHOW_COLOR_PALETTE",["TABLE_SET_BGCOLOR_FROM_PALETTE",
this.elPanel_bgColorPallet]);this.elPanel_bgColorPallet.parentNode.style.display="block"},$ON_TABLE_HIDE_BGCOLOR_PALLET:function(){this.welDropdownLayer.removeClass("p2");this.oApp.exec("HIDE_COLOR_PALETTE",[]);this.elPanel_bgColorPallet.parentNode.style.display="none"},$ON_TABLE_SET_BORDER_COLOR_FROM_PALETTE:function(a){this.oApp.exec("TABLE_SET_BORDER_COLOR",[a]);this.oApp.exec("TABLE_HIDE_BORDER_COLOR_PALLET",[])},$ON_TABLE_SET_BORDER_COLOR:function(a){this.elText_borderColor.value=a;this.elBtn_borderColor.style.backgroundColor=
a},$ON_TABLE_SET_BGCOLOR_FROM_PALETTE:function(a){this.oApp.exec("TABLE_SET_BGCOLOR",[a]);this.oApp.exec("TABLE_HIDE_BGCOLOR_PALLET",[])},$ON_TABLE_SET_BGCOLOR:function(a){this.elText_BGColor.value=a;this.elBtn_BGColor.style.backgroundColor=a},$ON_TABLE_ENABLE_MANUAL_STYLE:function(){this.nStyleMode=1;this._drawTableDropdownLayer()},$ON_TABLE_ENABLE_TEMPLATE_STYLE:function(){this.nStyleMode=2;this._drawTableDropdownLayer()},$ON_EVENT_TABLE_CREATE_KEYDOWN:function(a){a.key().enter&&(this.elBtn_apply.focus(),
this.oApp.exec("TABLE_INSERT"),a.stop())},_drawTableDropdownLayer:function(){1==this.nBorderStyleIdx?(this.elPanel_borderStylePreview.innerHTML=this.sNoBorderText,this.elLayer_Dim1.className="se2_t_dim2"):(this.elPanel_borderStylePreview.innerHTML="",this.elLayer_Dim1.className="se2_t_dim0");1==this.nStyleMode?(this.elRadio_manualStyle.checked=!0,this.elLayer_Dim2.className="se2_t_dim3",this.elText_borderSize.disabled=!1,this.elText_borderColor.disabled=!1,this.elText_BGColor.disabled=!1):(this.elRadio_templateStyle.checked=
!0,this.elLayer_Dim2.className="se2_t_dim1",this.elText_borderSize.disabled=!0,this.elText_borderColor.disabled=!0,this.elText_BGColor.disabled=!0);this.oApp.exec("TABLE_CLOSE_ALL",[])},_selectBorderStyle:function(a){this.elPanel_borderStylePreview.className="se2_b_style"+a;this.nBorderStyleIdx=a;this._drawTableDropdownLayer()},_selectTableStyle:function(a){this.elPanel_tableStylePreview.className="se2_t_style"+a;this.nTableStyleIdx=a;this._drawTableDropdownLayer()},_showNewTable:function(){var a=
document.createElement("DIV");this._loadValuesFromHTML();a.innerHTML=this._getPreviewTableString(this.nColumns,this.nRows);a=a.firstChild;this.elTable_preview.parentNode.insertBefore(a,this.elTable_preview);this.elTable_preview.parentNode.removeChild(this.elTable_preview);this.elTable_preview=a;this._refresh()},_getPreviewTableString:function(a,b){for(var c,d="<tr>",e=0;e<a;e++)d+="<td><p>&nbsp;</p></td>\n";d+="</tr>\n";c='<table border="0" cellspacing="1" class="se2_pre_table husky_se2m_table_preview"><tbody>';
for(e=0;e<b;e++)c+=d;return c+="</tbody>\n</table>\n"},_loadValuesFromHTML:function(){this.nColumns=parseInt(this.elText_col.value,10)||1;this.nRows=parseInt(this.elText_row.value,10)||1;this.nBorderSize=parseInt(this.elText_borderSize.value,10)||1;this.sBorderColor=this.elText_borderColor.value;this.sBGColor=this.elText_BGColor.value},_doGetTableString:function(a,b,c,d,e,f){var g=parseInt(this.nTableWidth/a,10);c=this.nBorderSize;d=this.aTableStyleByBorder[f].replace(/#BorderSize#/g,this.nBorderSize).replace(/#BorderSize\*([0-9]+)#/g,
function(a,b){return c*parseInt(b,10)}).replace(/#BorderSize\+([0-9]+)#/g,function(a,b){return c+parseInt(b,10)}).replace("#BorderColor#",this.sBorderColor).replace("#BGColor#",this.sBGColor);e=this.aTDStyleByBorder[f].replace(/#BorderSize#/g,this.nBorderSize).replace(/#BorderSize\*([0-9]+)#/g,function(a,b){return c*parseInt(b,10)}).replace(/#BorderSize\+([0-9]+)#/g,function(a,b){return c+parseInt(b,10)}).replace("#BorderColor#",this.sBorderColor).replace("#BGColor#",this.sBGColor);g?e+=" width="+
g:d+="class=se2_pre_table";for(var g="<tr>",h=0;h<a;h++)g+="<td "+e+"><p>&nbsp;</p></td>\n";g+="</tr>\n";a="<table "+d+" "+(1==f?'attr_no_border_tbl="1"':"")+"><tbody>\n";for(h=0;h<b;h++)a+=g;a+="</tbody>\n";return a+="</table>\n<br>"},_numRowKeydown:function(a){a=a.key();38==a.keyCode&&this.oApp.exec("TABLE_INC_ROW",[]);40==a.keyCode&&this.oApp.exec("TABLE_DEC_ROW",[])},_numColKeydown:function(a){a=a.key();38==a.keyCode&&this.oApp.exec("TABLE_INC_COLUMN",[]);40==a.keyCode&&this.oApp.exec("TABLE_DEC_COLUMN",
[])},_borderSizeKeydown:function(a){a=a.key();38==a.keyCode&&this.oApp.exec("TABLE_INC_BORDER_SIZE",[]);40==a.keyCode&&this.oApp.exec("TABLE_DEC_BORDER_SIZE",[])},_refresh:function(){this.elDropdownLayer.style.zoom=0;this.elDropdownLayer.style.zoom=""}});
nhn.husky.SE2M_TableEditor=jindo.$Class({name:"SE2M_TableEditor",_sSETblClass:"__se_tbl",_sSEReviewTblClass:"__se_tbl_review",STATUS:{S_0:1,MOUSEDOWN_CELL:2,CELL_SELECTING:3,CELL_SELECTED:4,MOUSEOVER_BORDER:5,MOUSEDOWN_BORDER:6},CELL_SELECTION_CLASS:"se2_te_selection",MIN_CELL_WIDTH:5,MIN_CELL_HEIGHT:5,TMP_BGC_ATTR:"_se2_tmp_te_bgc",TMP_BGIMG_ATTR:"_se2_tmp_te_bg_img",ATTR_TBL_TEMPLATE:"_se2_tbl_template",nStatus:1,nMouseEventsStatus:0,aSelectedCells:[],$ON_REGISTER_CONVERTERS:function(){this.oApp.exec("ADD_CONVERTER_DOM",
["WYSIWYG_TO_IR",jindo.$Fn(function(a){if(!(1>this.aSelectedCells.length))for(var b,c=["TD","TH"],d=0;d<c.length;d++){b=a.getElementsByTagName(c[d]);for(var e=0,f=b.length;e<f;e++)b[e].className&&(b[e].className=b[e].className.replace(this.CELL_SELECTION_CLASS,""),b[e].getAttribute(this.TMP_BGC_ATTR)?(b[e].style.backgroundColor=b[e].getAttribute(this.TMP_BGC_ATTR),b[e].removeAttribute(this.TMP_BGC_ATTR)):b[e].getAttribute(this.TMP_BGIMG_ATTR)&&(jindo.$Element(this.aCells[e]).css("backgroundImage",
b[e].getAttribute(this.TMP_BGIMG_ATTR)),b[e].removeAttribute(this.TMP_BGIMG_ATTR)))}},this).bind()])},_assignHTMLObjects:function(){this.oApp.exec("LOAD_HTML",["qe_table"]);this.elQELayer=jindo.$$.getSingle("DIV.q_table_wrap",this.oApp.htOptions.elAppContainer);this.elQELayer.style.zIndex=150;this.elBtnAddRowBelow=jindo.$$.getSingle("BUTTON.se2_addrow",this.elQELayer);this.elBtnAddColumnRight=jindo.$$.getSingle("BUTTON.se2_addcol",this.elQELayer);this.elBtnSplitRow=jindo.$$.getSingle("BUTTON.se2_seprow",
this.elQELayer);this.elBtnSplitColumn=jindo.$$.getSingle("BUTTON.se2_sepcol",this.elQELayer);this.elBtnDeleteRow=jindo.$$.getSingle("BUTTON.se2_delrow",this.elQELayer);this.elBtnDeleteColumn=jindo.$$.getSingle("BUTTON.se2_delcol",this.elQELayer);this.elBtnMergeCell=jindo.$$.getSingle("BUTTON.se2_merrow",this.elQELayer);this.elBtnBGPalette=jindo.$$.getSingle("BUTTON.husky_se2m_table_qe_bgcolor_btn",this.elQELayer);this.elBtnBGIMGPalette=jindo.$$.getSingle("BUTTON.husky_se2m_table_qe_bgimage_btn",this.elQELayer);
this.elPanelBGPaletteHolder=jindo.$$.getSingle("DIV.husky_se2m_tbl_qe_bg_paletteHolder",this.elQELayer);this.elPanelBGIMGPaletteHolder=jindo.$$.getSingle("DIV.husky_se2m_tbl_qe_bg_img_paletteHolder",this.elQELayer);this.elPanelTableBGArea=jindo.$$.getSingle("DIV.se2_qe2",this.elQELayer);this.elPanelTableTemplateArea=jindo.$$.getSingle("DL.se2_qe3",this.elQELayer);this.elPanelReviewBGArea=jindo.$$.getSingle("DL.husky_se2m_tbl_qe_review_bg",this.elQELayer);this.elPanelBGImg=jindo.$$.getSingle("DD",
this.elPanelReviewBGArea);this.welPanelTableBGArea=jindo.$Element(this.elPanelTableBGArea);this.welPanelTableTemplateArea=jindo.$Element(this.elPanelTableTemplateArea);this.welPanelReviewBGArea=jindo.$Element(this.elPanelReviewBGArea);this.elPanelDim1=jindo.$$.getSingle("DIV.husky_se2m_tbl_qe_dim1",this.elQELayer);this.elPanelDim2=jindo.$$.getSingle("DIV.husky_se2m_tbl_qe_dim2",this.elQELayer);this.elPanelDimDelCol=jindo.$$.getSingle("DIV.husky_se2m_tbl_qe_dim_del_col",this.elQELayer);this.elPanelDimDelRow=
jindo.$$.getSingle("DIV.husky_se2m_tbl_qe_dim_del_row",this.elQELayer);this.elInputRadioBGColor=jindo.$$.getSingle("INPUT.husky_se2m_radio_bgc",this.elQELayer);this.elInputRadioBGImg=jindo.$$.getSingle("INPUT.husky_se2m_radio_bgimg",this.elQELayer);this.elSelectBoxTemplate=jindo.$$.getSingle("DIV.se2_select_ty2",this.elQELayer);this.elInputRadioTemplate=jindo.$$.getSingle("INPUT.husky_se2m_radio_template",this.elQELayer);this.elPanelQETemplate=jindo.$$.getSingle("DIV.se2_layer_t_style",this.elQELayer);
this.elBtnQETemplate=jindo.$$.getSingle("BUTTON.husky_se2m_template_more",this.elQELayer);this.elPanelQETemplatePreview=jindo.$$.getSingle("SPAN.se2_t_style1",this.elQELayer);this.aElBtn_tableStyle=jindo.$$("BUTTON",this.elPanelQETemplate);for(i=0;i<this.aElBtn_tableStyle.length;i++)this.oApp.registerBrowserEvent(this.aElBtn_tableStyle[i],"click","TABLE_QE_SELECT_TEMPLATE")},$LOCAL_BEFORE_FIRST:function(a){if(a.match(/(REGISTER_CONVERTERS)/))return this.oApp.acceptLocalBeforeFirstAgain(this,!0),!0;
if(!a.match(/(EVENT_EDITING_AREA_MOUSEMOVE)/))return this.oApp.acceptLocalBeforeFirstAgain(this,!0),!1;this.htResizing={};this.nDraggableCellEdge=2;a=jindo.$Element(document.body);this.nPageLeftRightMargin=parseInt(a.css("marginLeft"),10)+parseInt(a.css("marginRight"),10);this.nPageTopBottomMargin=parseInt(a.css("marginTop"),10)+parseInt(a.css("marginBottom"),10);this.QE_DIM_MERGE_BTN=1;this.QE_DIM_BG_COLOR=2;this.QE_DIM_REVIEW_BG_IMG=3;this.QE_DIM_TABLE_TEMPLATE=4;this.rxLastDigits=/([0-9]+)$/;this._assignHTMLObjects();
this.oApp.exec("SE2_ATTACH_HOVER_EVENTS",[this.aElBtn_tableStyle]);this.addCSSClass(this.CELL_SELECTION_CLASS,"background-color:#B4C9E9;");this._createCellResizeGrip();this.elIFrame=this.oApp.getWYSIWYGWindow().frameElement;this.htFrameOffset=jindo.$Element(this.elIFrame).offset();this.sEmptyTDSrc="";this.sEmptyTDSrc=this.oApp.oNavigator.ie?"<p>&nbsp;</p>":this.oApp.oNavigator.firefox?"<p><br/></p>":"<p>&nbsp;</p>";this.oApp.getWYSIWYGDocument();a=this.elResizeCover;this.wfnMousedown_ResizeCover=
jindo.$Fn(this._mousedown_ResizeCover,this);this.wfnMousemove_ResizeCover=jindo.$Fn(this._mousemove_ResizeCover,this);this.wfnMouseup_ResizeCover=jindo.$Fn(this._mouseup_ResizeCover,this);this.wfnMousedown_ResizeCover.attach(a,"mousedown");this._changeTableEditorStatus(this.STATUS.S_0);this.oApp.registerBrowserEvent(this.elBtnMergeCell,"click","TE_MERGE_CELLS");this.oApp.registerBrowserEvent(this.elBtnSplitColumn,"click","TE_SPLIT_COLUMN");this.oApp.registerBrowserEvent(this.elBtnSplitRow,"click",
"TE_SPLIT_ROW");this.oApp.registerBrowserEvent(this.elBtnAddColumnRight,"click","TE_INSERT_COLUMN_RIGHT");this.oApp.registerBrowserEvent(this.elBtnAddRowBelow,"click","TE_INSERT_ROW_BELOW");this.oApp.registerBrowserEvent(this.elBtnDeleteColumn,"click","TE_DELETE_COLUMN");this.oApp.registerBrowserEvent(this.elBtnDeleteRow,"click","TE_DELETE_ROW");this.oApp.registerBrowserEvent(this.elInputRadioBGColor,"click","DRAW_QE_RADIO_OPTION",[2]);this.oApp.registerBrowserEvent(this.elInputRadioBGImg,"click",
"DRAW_QE_RADIO_OPTION",[3]);this.oApp.registerBrowserEvent(this.elInputRadioTemplate,"click","DRAW_QE_RADIO_OPTION",[4]);this.oApp.registerBrowserEvent(this.elBtnBGPalette,"click","TABLE_QE_TOGGLE_BGC_PALETTE");this.oApp.registerBrowserEvent(this.elBtnBGIMGPalette,"click","TABLE_QE_TOGGLE_IMG_PALETTE");this.oApp.registerBrowserEvent(this.elPanelBGIMGPaletteHolder,"click","TABLE_QE_SET_IMG_FROM_PALETTE");this.oApp.registerBrowserEvent(this.elBtnQETemplate,"click","TABLE_QE_TOGGLE_TEMPLATE");this.oApp.registerBrowserEvent(document.body,
"mouseup","EVENT_OUTER_DOC_MOUSEUP");this.oApp.registerBrowserEvent(document.body,"mousemove","EVENT_OUTER_DOC_MOUSEMOVE")},$ON_EVENT_EDITING_AREA_KEYUP:function(a){var b=a.key();if(!(229==b.keyCode||b.alt||b.ctrl||16==b.keyCode)){if(8==b.keyCode||46==b.keyCode)this.oApp.exec("DELETE_BLOCK_CONTENTS"),a.stop();switch(this.nStatus){case this.STATUS.CELL_SELECTED:this._changeTableEditorStatus(this.STATUS.S_0)}}},$ON_TABLE_QE_SELECT_TEMPLATE:function(a){a=this.rxLastDigits.exec(a.element.className);var b=
this.elSelectionStartTable;this._changeTableEditorStatus(this.STATUS.S_0);this.oApp.exec("STYLE_TABLE",[b,a[1]]);this.oApp.exec("RECORD_UNDO_ACTION",["CHANGE_TABLE_STYLE",{elSaveTarget:b&&b.parentNode?b.parentNode:null,sSaveTarget:!b?"BODY":null,bDontSaveSelection:!0}])},$BEFORE_CHANGE_EDITING_MODE:function(a){"WYSIWYG"!==a&&this.nStatus!==this.STATUS.S_0&&this._changeTableEditorStatus(this.STATUS.S_0)},$ON_TABLE_QE_TOGGLE_BGC_PALETTE:function(){"block"==this.elPanelBGPaletteHolder.parentNode.style.display?
this.oApp.exec("HIDE_TABLE_QE_BGC_PALETTE",[]):this.oApp.exec("SHOW_TABLE_QE_BGC_PALETTE",[])},$ON_SHOW_TABLE_QE_BGC_PALETTE:function(){this.elPanelBGPaletteHolder.parentNode.style.display="block";this.oApp.exec("SHOW_COLOR_PALETTE",["TABLE_QE_SET_BGC_FROM_PALETTE",this.elPanelBGPaletteHolder])},$ON_HIDE_TABLE_QE_BGC_PALETTE:function(){this.elPanelBGPaletteHolder.parentNode.style.display="none";this.oApp.exec("HIDE_COLOR_PALETTE",[])},$ON_TABLE_QE_SET_BGC_FROM_PALETTE:function(a){this.oApp.exec("TABLE_QE_SET_BGC",
[a]);this.oSelection&&this.oSelection.select();this._changeTableEditorStatus(this.STATUS.S_0)},$ON_TABLE_QE_SET_BGC:function(a){this.elBtnBGPalette.style.backgroundColor=a;for(var b=0,c=this.aSelectedCells.length;b<c;b++)this.aSelectedCells[b].setAttribute(this.TMP_BGC_ATTR,a),this.aSelectedCells[b].removeAttribute(this.TMP_BGIMG_ATTR);this.sQEAction="TABLE_SET_BGCOLOR"},$ON_TABLE_QE_TOGGLE_IMG_PALETTE:function(){"block"==this.elPanelBGIMGPaletteHolder.parentNode.style.display?this.oApp.exec("HIDE_TABLE_QE_IMG_PALETTE",
[]):this.oApp.exec("SHOW_TABLE_QE_IMG_PALETTE",[])},$ON_SHOW_TABLE_QE_IMG_PALETTE:function(){this.elPanelBGIMGPaletteHolder.parentNode.style.display="block"},$ON_HIDE_TABLE_QE_IMG_PALETTE:function(){this.elPanelBGIMGPaletteHolder.parentNode.style.display="none"},$ON_TABLE_QE_SET_IMG_FROM_PALETTE:function(a){this.oApp.exec("TABLE_QE_SET_IMG",[a.element]);this.oSelection&&this.oSelection.select();this._changeTableEditorStatus(this.STATUS.S_0)},$ON_TABLE_QE_SET_IMG:function(a){var b=jindo.$Element(a).className(),
c=jindo.$Element(this.elBtnBGIMGPalette),d=c.className().split(" "),e=0;for(a=d.length;e<a;e++)0<d[e].indexOf("cellimg")&&c.removeClass(d[e]);jindo.$Element(this.elBtnBGIMGPalette).addClass(b);a=b.substring(11,b.length);b="pattern_";if("0"===a){e=0;for(a=this.aSelectedCells.length;e<a;e++)jindo.$Element(this.aSelectedCells[e]).css("backgroundImage",""),this.aSelectedCells[e].removeAttribute(this.TMP_BGC_ATTR),this.aSelectedCells[e].removeAttribute(this.TMP_BGIMG_ATTR)}else{b=19==a||20==a||21==a||
22==a||25==a||26==a?b+a+".jpg":b+a+".gif";c=0;for(a=this.aSelectedCells.length;c<a;c++)jindo.$Element(this.aSelectedCells[c]).css("backgroundImage","url(http://static.se2.naver.com/static/img/"+b+")"),this.aSelectedCells[c].removeAttribute(this.TMP_BGC_ATTR),this.aSelectedCells[c].setAttribute(this.TMP_BGIMG_ATTR,"url(http://static.se2.naver.com/static/img/"+b+")")}this.sQEAction="TABLE_SET_BGIMAGE"},$ON_SAVE_QE_MY_REVIEW_ITEM:function(){this.oApp.exec("SAVE_MY_REVIEW_ITEM");this.oApp.exec("CLOSE_QE_LAYER")},
$ON_SHOW_COMMON_QE:function(){jindo.$Element(this.elSelectionStartTable).hasClass(this._sSETblClass)?this.oApp.exec("SHOW_TABLE_QE"):jindo.$Element(this.elSelectionStartTable).hasClass(this._sSEReviewTblClass)&&this.oApp.exec("SHOW_REVIEW_QE")},$ON_SHOW_TABLE_QE:function(){this.oApp.exec("HIDE_TABLE_QE_BGC_PALETTE",[]);this.oApp.exec("TABLE_QE_HIDE_TEMPLATE",[]);this.oApp.exec("SETUP_TABLE_QE_MODE",[0]);this.oApp.exec("OPEN_QE_LAYER",[this.htMap[this.htSelectionEPos.x][this.htSelectionEPos.y],this.elQELayer,
"table"])},$ON_SHOW_REVIEW_QE:function(){this.oApp.exec("SETUP_TABLE_QE_MODE",[1]);this.oApp.exec("OPEN_QE_LAYER",[this.htMap[this.htSelectionEPos.x][this.htSelectionEPos.y],this.elQELayer,"review"])},$ON_CLOSE_SUB_LAYER_QE:function(){"undefined"!=typeof this.elPanelBGPaletteHolder&&(this.elPanelBGPaletteHolder.parentNode.style.display="none");"undefined"!=typeof this.elPanelBGIMGPaletteHolder&&(this.elPanelBGIMGPaletteHolder.parentNode.style.display="none")},$ON_SETUP_TABLE_QE_MODE:function(a){var b=
!0;"number"==typeof a&&(this.nQEMode=a);2>this.aSelectedCells.length&&(b=!1);this.oApp.exec("TABLE_QE_DIM",[this.QE_DIM_MERGE_BTN,b]);var b=this.aSelectedCells[0].getAttribute(this.TMP_BGC_ATTR)||"rgb(255,255,255)",c=!0,d=1;for(a=this.aSelectedCells.length;d<a;d++)if(b!=this.aSelectedCells[d].getAttribute(this.TMP_BGC_ATTR)){c=!1;break}this.elBtnBGPalette.style.backgroundColor=c?b:"#FFFFFF";var e=this.aSelectedCells[0].getAttribute(this.TMP_BGIMG_ATTR)||"",b=!0,f=0,c=jindo.$Element(this.elBtnBGIMGPalette);
if(e){a=(a=e.match(/\_[0-9]*/))?a[0]:"_0";f=a.substring(1,a.length);d=1;for(a=this.aSelectedCells.length;d<a;d++)if(e!=this.aSelectedCells[d].getAttribute(this.TMP_BGIMG_ATTR)){b=!1;break}}d=c.className().split(/\s/);e=0;for(a=d.length;e<a;e++)0<d[e].indexOf("cellimg")&&c.removeClass(d[e]);b&&0<f?c.addClass("se2_cellimg"+f):c.addClass("se2_cellimg0");0===this.nQEMode?(this.elPanelTableTemplateArea.style.display="block",this.elPanelReviewBGArea.style.display="none",jindo.$Element(this.elPanelTableBGArea).className("se2_qe2"),
a=this.parseIntOr0(this.elSelectionStartTable.getAttribute(this.ATTR_TBL_TEMPLATE)),a||(this.elInputRadioBGColor.checked="true",a=1),this.elPanelQETemplatePreview.className="se2_t_style"+a,this.elPanelBGImg.style.position=""):1==this.nQEMode?(this.elPanelTableTemplateArea.style.display="none",this.elPanelReviewBGArea.style.display="block",this.parseIntOr0(this.elSelectionStartTable.getAttribute(this.ATTR_REVIEW_TEMPLATE)),this.elPanelBGImg.style.position="relative"):(this.elPanelTableTemplateArea.style.display=
"none",this.elPanelReviewBGArea.style.display="none");this.oApp.exec("DRAW_QE_RADIO_OPTION",[0])},$ON_DRAW_QE_RADIO_OPTION:function(a){0!==a&&2!=a&&this.oApp.exec("HIDE_TABLE_QE_BGC_PALETTE",[]);0!==a&&3!=a&&this.oApp.exec("HIDE_TABLE_QE_IMG_PALETTE",[]);0!==a&&4!=a&&this.oApp.exec("TABLE_QE_HIDE_TEMPLATE",[]);0===this.nQEMode?(this.elInputRadioBGImg.checked&&(this.elInputRadioBGColor.checked="true"),this.elInputRadioBGColor.checked?this.oApp.exec("TABLE_QE_DIM",[this.QE_DIM_TABLE_TEMPLATE,!1]):this.oApp.exec("TABLE_QE_DIM",
[this.QE_DIM_BG_COLOR,!1])):(this.elInputRadioTemplate.checked&&(this.elInputRadioBGColor.checked="true"),this.elInputRadioBGColor.checked?this.oApp.exec("TABLE_QE_DIM",[this.QE_DIM_REVIEW_BG_IMG,!1]):this.oApp.exec("TABLE_QE_DIM",[this.QE_DIM_BG_COLOR,!1]))},$ON_TABLE_QE_DIM:function(a,b){var c;c=1==a?this.elPanelDim1:this.elPanelDim2;b&&(a=0);c.className="se2_qdim"+a},$ON_TE_SELECT_TABLE:function(a){this.elSelectionStartTable=a;this.htMap=this._getCellMapping(this.elSelectionStartTable)},$ON_TE_SELECT_CELLS:function(a,
b){this._selectCells(a,b)},$ON_TE_MERGE_CELLS:function(){if(!(0===this.aSelectedCells.length||1==this.aSelectedCells.length)){this._removeClassFromSelection();var a,b,c;b=this.aSelectedCells[0];nhn.husky.SE2M_Utils.findAncestorByTagName("TABLE",b);var d,e=this.aSelectedCells[0];c=parseInt(e.style.height||e.getAttribute("height"),10);d=parseInt(e.style.width||e.getAttribute("width"),10);for(a=this.htSelectionSPos.x+1;a<this.htSelectionEPos.x+1;a++)curTD=this.htMap[a][this.htSelectionSPos.y],curTD!=
e&&(e=curTD,d+=parseInt(curTD.style.width||curTD.getAttribute("width"),10));e=this.aSelectedCells[0];for(a=this.htSelectionSPos.y+1;a<this.htSelectionEPos.y+1;a++)curTD=this.htMap[this.htSelectionSPos.x][a],curTD!=e&&(e=curTD,c+=parseInt(curTD.style.height||curTD.getAttribute("height"),10));d&&(b.style.width=d+"px");c&&(b.style.height=c+"px");b.setAttribute("colSpan",this.htSelectionEPos.x-this.htSelectionSPos.x+1);b.setAttribute("rowSpan",this.htSelectionEPos.y-this.htSelectionSPos.y+1);for(a=1;a<
this.aSelectedCells.length;a++)c=this.aSelectedCells[a],c.parentNode&&(nhn.husky.SE2M_Utils.isBlankNode(c)||(b.innerHTML+=c.innerHTML),c.parentNode.removeChild(c));this.htMap=this._getCellMapping(this.elSelectionStartTable);this._selectCells(this.htSelectionSPos,this.htSelectionEPos);this._showTableTemplate(this.elSelectionStartTable);this._addClassToSelection();this.sQEAction="TABLE_CELL_MERGE";this.oApp.exec("SHOW_COMMON_QE")}},$ON_TABLE_QE_TOGGLE_TEMPLATE:function(){"block"==this.elPanelQETemplate.style.display?
this.oApp.exec("TABLE_QE_HIDE_TEMPLATE"):this.oApp.exec("TABLE_QE_SHOW_TEMPLATE")},$ON_TABLE_QE_SHOW_TEMPLATE:function(){this.elPanelQETemplate.style.display="block";this.oApp.exec("POSITION_TOOLBAR_LAYER",[this.elPanelQETemplate])},$ON_TABLE_QE_HIDE_TEMPLATE:function(){this.elPanelQETemplate.style.display="none"},$ON_STYLE_TABLE:function(a,b){a||(this._t||(this._t=1),a=this.elSelectionStartTable,b=this._t++%20+1);this.oSelection&&this.oSelection.select();this._applyTableTemplate(a,b)},$ON_TE_DELETE_COLUMN:function(){0===
this.aSelectedCells.length||1==this.aSelectedCells.length||(this._selectAll_Column(),this._deleteSelectedCells(),this.sQEAction="DELETE_TABLE_COLUMN",this._changeTableEditorStatus(this.STATUS.S_0))},$ON_TE_DELETE_ROW:function(){0===this.aSelectedCells.length||1==this.aSelectedCells.length||(this._selectAll_Row(),this._deleteSelectedCells(),this.sQEAction="DELETE_TABLE_ROW",this._changeTableEditorStatus(this.STATUS.S_0))},$ON_TE_INSERT_COLUMN_RIGHT:function(){0!==this.aSelectedCells.length&&(this._selectAll_Column(),
this._insertColumnAfter(this.htSelectionEPos.x))},$ON_TE_INSERT_COLUMN_LEFT:function(){this._selectAll_Column();this._insertColumnAfter(this.htSelectionSPos.x-1)},$ON_TE_INSERT_ROW_BELOW:function(){0!==this.aSelectedCells.length&&this._insertRowBelow(this.htSelectionEPos.y)},$ON_TE_INSERT_ROW_ABOVE:function(){this._insertRowBelow(this.htSelectionSPos.y-1)},$ON_TE_SPLIT_COLUMN:function(){var a,b,c,d,e;if(0!==this.aSelectedCells.length){this._removeClassFromSelection();b=this.aSelectedCells[0];for(var f=
0,g=this.aSelectedCells.length;f<g;f++)if(d=this.aSelectedCells[f],a=parseInt(d.getAttribute("colSpan"),10)||1,!(1<a)){e=this._getBasisCellPosition(d);for(c=0;c<this.htMap[0].length;)d=this.htMap[e.x][c],a=parseInt(d.getAttribute("colSpan"),10)||1,d.setAttribute("colSpan",a+1),c+=parseInt(d.getAttribute("rowSpan"),10)||1}f=0;for(g=this.aSelectedCells.length;f<g;f++){d=this.aSelectedCells[f];a=parseInt(d.getAttribute("colSpan"),10)||1;b=(a/2).toFixed(0);d.setAttribute("colSpan",b);e=this._shallowCloneTD(d);
e.setAttribute("colSpan",a-b);b=e;a=parseInt(d.getAttribute("rowSpan"),10)||1;e.setAttribute("rowSpan",a);e.innerHTML="&nbsp;";if(a=d.width||d.style.width)a=this.parseIntOr0(a),d.removeAttribute("width"),c=(a/2).toFixed(),d.style.width=c+"px",e.style.width=a-c+"px";d.parentNode.insertBefore(e,d.nextSibling)}this._reassignCellSizes(this.elSelectionStartTable);this.htMap=this._getCellMapping(this.elSelectionStartTable);e=this._getBasisCellPosition(b);this.htSelectionEPos.x=e.x;this._selectCells(this.htSelectionSPos,
this.htSelectionEPos);this.sQEAction="SPLIT_TABLE_COLUMN";this.oApp.exec("SHOW_COMMON_QE")}},$ON_TE_SPLIT_ROW:function(){var a,b,c,d;if(0!==this.aSelectedCells.length){var e=jindo.$$(">TBODY>TR",this.elSelectionStartTable,{oneTimeOffCache:!0});this._removeClassFromSelection();for(var f=0,g=0,h=this.aSelectedCells.length;g<h;g++)if(c=this.aSelectedCells[g],a=parseInt(c.getAttribute("rowSpan"),10)||1,!(1<a)){d=this._getBasisCellPosition(c);a=e[d.y];c=this.oApp.getWYSIWYGDocument().createElement("TR");
a.parentNode.insertBefore(c,a.nextSibling);f++;for(b=0;b<this.htMap.length;)c=this.htMap[b][d.y],a=parseInt(c.getAttribute("rowSpan"),10)||1,c.setAttribute("rowSpan",a+1),b+=parseInt(c.getAttribute("colSpan"),10)||1}for(var e=jindo.$$(">TBODY>TR",this.elSelectionStartTable,{oneTimeOffCache:!0}),j,g=0,h=this.aSelectedCells.length;g<h;g++){c=this.aSelectedCells[g];a=parseInt(c.getAttribute("rowSpan"),10)||1;b=(a/2).toFixed(0);c.setAttribute("rowSpan",b);d=this._shallowCloneTD(c);d.setAttribute("rowSpan",
a-b);a=parseInt(c.getAttribute("colSpan"),10)||1;d.setAttribute("colSpan",a);d.innerHTML="&nbsp;";if(a=c.height||c.style.height)a=this.parseIntOr0(a),c.removeAttribute("height"),nNewHeight=(a/2).toFixed(),c.style.height=nNewHeight+"px",d.style.height=a-nNewHeight+"px";a=jindo.$A(e).indexOf(c.parentNode);a=parseInt(a,10)+parseInt(b,10);a=e[a];b=a.childNodes;var k=null,m;c=this._getBasisCellPosition(c);for(var l=0,n=b.length;l<n;l++)if(m=b[l],m.tagName&&"TD"==m.tagName&&(j=this._getBasisCellPosition(m),
c.x<j.x)){k=m;break}a.insertBefore(d,k)}this._reassignCellSizes(this.elSelectionStartTable);this.htMap=this._getCellMapping(this.elSelectionStartTable);this.htSelectionEPos.y+=f;this._selectCells(this.htSelectionSPos,this.htSelectionEPos);this.sQEAction="SPLIT_TABLE_ROW";this.oApp.exec("SHOW_COMMON_QE")}},$ON_MSG_CELL_SELECTED:function(){this.elPanelDimDelCol.className="se2_qdim6r";this.elPanelDimDelRow.className="se2_qdim6c";0===this.htSelectionSPos.x&&this.htSelectionEPos.x===this.htMap.length-
1&&this.oApp.exec("MSG_ROW_SELECTED");0===this.htSelectionSPos.y&&this.htSelectionEPos.y===this.htMap[0].length-1&&this.oApp.exec("MSG_COL_SELECTED");this.oApp.exec("SHOW_COMMON_QE")},$ON_MSG_ROW_SELECTED:function(){this.elPanelDimDelRow.className=""},$ON_MSG_COL_SELECTED:function(){this.elPanelDimDelCol.className=""},$ON_EVENT_EDITING_AREA_MOUSEDOWN:function(a){if(this.oApp.isWYSIWYGEnabled())switch(this.nStatus){case this.STATUS.S_0:if(!a.element)break;if("IMG"==a.element.tagName)break;if("WYSIWYG"!==
this.oApp.getEditingMode())break;if((a=nhn.husky.SE2M_Utils.findAncestorByTagName("TD",a.element))&&"TD"==a.tagName){var b=nhn.husky.SE2M_Utils.findAncestorByTagName("TABLE",a);if(!jindo.$Element(b).hasClass(this._sSETblClass)&&!jindo.$Element(b).hasClass(this._sSEReviewTblClass))break;if(!this._isValidTable(b)){jindo.$Element(b).removeClass(this._sSETblClass);jindo.$Element(b).removeClass(this._sSEReviewTblClass);break}b&&(this.elSelectionStartTD=a,this.elSelectionStartTable=b,this._changeTableEditorStatus(this.STATUS.MOUSEDOWN_CELL))}break;
case this.STATUS.CELL_SELECTED:this._changeTableEditorStatus(this.STATUS.S_0)}},$ON_EVENT_EDITING_AREA_MOUSEMOVE:function(a){if("WYSIWYG"==this.oApp.getEditingMode())switch(this.nStatus){case this.STATUS.S_0:this._isOnBorder(a)?this._showCellResizeGrip(a):this._hideResizer();break;case this.STATUS.MOUSEDOWN_CELL:if((a=nhn.husky.SE2M_Utils.findAncestorByTagName("TD",a.element))&&a!==this.elSelectionStartTD||!a)a||(a=this.elSelectionStartTD),this._reassignCellSizes(this.elSelectionStartTable),this._startCellSelection(),
this._selectBetweenCells(this.elSelectionStartTD,a);break;case this.STATUS.CELL_SELECTING:a=nhn.husky.SE2M_Utils.findAncestorByTagName("TD",a.element);if(!a||a===this.elLastSelectedTD)break;if(nhn.husky.SE2M_Utils.findAncestorByTagName("TABLE",a)!==this.elSelectionStartTable)break;this.elLastSelectedTD=a;this._selectBetweenCells(this.elSelectionStartTD,a)}},$ON_EVENT_OUTER_DOC_MOUSEMOVE:function(a){switch(this.nStatus){case this.STATUS.CELL_SELECTING:a=a.pos();var b=a.pageY;a=a.pageX;b<this.htEditingAreaPos.top?
(b=this.htSelectionSPos.y,0<b&&(this.htSelectionSPos.y--,this._selectCells(this.htSelectionSPos,this.htSelectionEPos),b=this.oApp.getSelection(),b.selectNodeContents(this.aSelectedCells[0]),b.select(),b.oBrowserSelection.selectNone())):b>this.htEditingAreaPos.bottom&&(b=this.htSelectionEPos.y,b<this.htMap[0].length-1&&(this.htSelectionEPos.y++,this._selectCells(this.htSelectionSPos,this.htSelectionEPos),b=this.oApp.getSelection(),b.selectNodeContents(this.htMap[this.htSelectionEPos.x][this.htSelectionEPos.y]),
b.select(),b.oBrowserSelection.selectNone()));a<this.htEditingAreaPos.left?(a=this.htSelectionSPos.x,0<a&&(this.htSelectionSPos.x--,this._selectCells(this.htSelectionSPos,this.htSelectionEPos),b=this.oApp.getSelection(),b.selectNodeContents(this.aSelectedCells[0]),b.select(),b.oBrowserSelection.selectNone())):a>this.htEditingAreaPos.right&&(a=this.htSelectionEPos.x,a<this.htMap.length-1&&(this.htSelectionEPos.x++,this._selectCells(this.htSelectionSPos,this.htSelectionEPos),b=this.oApp.getSelection(),
b.selectNodeContents(this.htMap[this.htSelectionEPos.x][this.htSelectionEPos.y]),b.select(),b.oBrowserSelection.selectNone()))}},$ON_EVENT_OUTER_DOC_MOUSEUP:function(a){this._eventEditingAreaMouseup(a)},$ON_EVENT_EDITING_AREA_MOUSEUP:function(a){this._eventEditingAreaMouseup(a)},_eventEditingAreaMouseup:function(){if("WYSIWYG"==this.oApp.getEditingMode())switch(this.nStatus){case this.STATUS.MOUSEDOWN_CELL:this._changeTableEditorStatus(this.STATUS.S_0);break;case this.STATUS.CELL_SELECTING:this._changeTableEditorStatus(this.STATUS.CELL_SELECTED)}},
$ON_GET_SELECTED_CELLS:function(a,b){this.aSelectedCells&&(b[a]=this.aSelectedCells)},_coverResizeLayer:function(){this.elResizeCover.style.position="absolute";var a=jindo.$Document().clientSize();this.elResizeCover.style.width=a.width-this.nPageLeftRightMargin+"px";this.elResizeCover.style.height=a.height-this.nPageTopBottomMargin+"px";document.body.appendChild(this.elResizeCover)},_uncoverResizeLayer:function(){this.elResizeGrid.appendChild(this.elResizeCover);this.elResizeCover.style.position=
"";this.elResizeCover.style.width="100%";this.elResizeCover.style.height="100%"},_reassignCellSizes:function(a){var b=Array(2);b[0]=jindo.$$(">TBODY>TR>TD",a,{oneTimeOffCache:!0});b[1]=jindo.$$(">TBODY>TR>TH",a,{oneTimeOffCache:!0});var c=Array(b[0].length+b[1].length),d=0;this.parseIntOr0(a.border);this.parseIntOr0(a.cellPadding);for(var e=0;2>e;e++)for(var f=0;f<b[e].length;f++){var g=b[e][f],h=jindo.$Element(g),j=this.parseIntOr0(h.css("paddingLeft")),k=this.parseIntOr0(h.css("paddingRight")),
m=this.parseIntOr0(h.css("paddingTop")),l=this.parseIntOr0(h.css("paddingBottom")),n=this.parseBorder(h.css("borderLeftWidth"),h.css("borderLeftStyle")),q=this.parseBorder(h.css("borderRightWidth"),h.css("borderRightStyle")),p=this.parseBorder(h.css("borderTopWidth"),h.css("borderTopStyle")),h=this.parseBorder(h.css("borderBottomWidth"),h.css("borderBottomStyle"));this.oApp.oNavigator.firefox?(j=g.offsetWidth-(j+k+n+q)+"px",m=g.offsetHeight+"px"):(j=g.offsetWidth-(j+k+n+q)+"px",m=g.offsetHeight-(m+
l+p+h)+"px");c[d++]=[g,j,m]}for(f=0;f<d;f++)b=c[f],b[0].removeAttribute("width"),b[0].removeAttribute("height"),b[0].style.width=b[1],b[0].style.height=b[2];a.removeAttribute("width");a.removeAttribute("height");a.style.width="";a.style.height=""},_mousedown_ResizeCover:function(a){this.bResizing=!0;this.nStartHeight=a.pos().clientY;this.wfnMousemove_ResizeCover.attach(this.elResizeCover,"mousemove");this.wfnMouseup_ResizeCover.attach(document,"mouseup");this._coverResizeLayer();this.elResizeGrid.style.border=
"1px dotted black";this.nStartHeight=a.pos().clientY;this.nStartWidth=a.pos().clientX;this._reassignCellSizes(this.htResizing.elTable);this.htMap=this._getCellMapping(this.htResizing.elTable);a=this._getBasisCellPosition(this.htResizing.elCell);var b=(parseInt(this.htResizing.elCell.getAttribute("colspan"))||1)-1,c=(parseInt(this.htResizing.elCell.getAttribute("rowspan"))||1)-1,b=a.x+b+this.htResizing.nHA;a=a.y+c+this.htResizing.nVA;0>b||0>a||(this.htAllAffectedCells=this._getAllAffectedCells(b,a,
this.htResizing.nResizeMode,this.htResizing.elTable))},_mousemove_ResizeCover:function(a){a.pos();a.pos();a=a.pos();1==this.htResizing.nResizeMode?this.elResizeGrid.style.left=a.pageX-this.parseIntOr0(this.elResizeGrid.style.width)/2+"px":this.elResizeGrid.style.top=a.pageY-this.parseIntOr0(this.elResizeGrid.style.height)/2+"px"},_mouseup_ResizeCover:function(a){this.bResizing=!1;this._hideResizer();this._uncoverResizeLayer();this.elResizeGrid.style.border="";this.wfnMousemove_ResizeCover.detach(this.elResizeCover,
"mousemove");this.wfnMouseup_ResizeCover.detach(document,"mouseup");var b=0,c=0;2==this.htResizing.nResizeMode&&(b=a.pos().clientY-this.nStartHeight);1==this.htResizing.nResizeMode&&(c=a.pos().clientX-this.nStartWidth,-1!=this.htAllAffectedCells.nMinBefore&&c<-1*this.htAllAffectedCells.nMinBefore&&(c=-1*this.htAllAffectedCells.nMinBefore+this.MIN_CELL_WIDTH),-1!=this.htAllAffectedCells.nMinAfter&&c>this.htAllAffectedCells.nMinAfter&&(c=this.htAllAffectedCells.nMinAfter-this.MIN_CELL_WIDTH));var d=
this.htAllAffectedCells.aCellsBefore;for(a=0;a<d.length;a++){var e=d[a],f=this.parseIntOr0(e.style.width)+c;e.style.width=Math.max(f,this.MIN_CELL_WIDTH)+"px";f=this.parseIntOr0(e.style.height)+b;e.style.height=Math.max(f,this.MIN_CELL_HEIGHT)+"px"}d=this.htAllAffectedCells.aCellsAfter;for(a=0;a<d.length;a++)e=d[a],f=this.parseIntOr0(e.style.width)-c,e.style.width=Math.max(f,this.MIN_CELL_WIDTH)+"px",f=this.parseIntOr0(e.style.height)-b,e.style.height=Math.max(f,this.MIN_CELL_HEIGHT)+"px"},$ON_CLOSE_QE_LAYER:function(){this._changeTableEditorStatus(this.STATUS.S_0)},
_changeTableEditorStatus:function(a){if(this.nStatus!=a){this.nStatus=a;switch(a){case this.STATUS.S_0:if(this.nStatus==this.STATUS.MOUSEDOWN_CELL)break;this._deselectCells();this.sQEAction&&(this.oApp.exec("RECORD_UNDO_ACTION",[this.sQEAction,{elSaveTarget:this.elSelectionStartTable,bDontSaveSelection:!0}]),this.sQEAction="");if(this.oApp.oNavigator.safari||this.oApp.oNavigator.chrome)this.oApp.getWYSIWYGDocument().onselectstart=null;this.oApp.exec("ENABLE_WYSIWYG",[]);this.oApp.exec("CLOSE_QE_LAYER");
this.elSelectionStartTable=null;break;case this.STATUS.CELL_SELECTING:this.oApp.oNavigator.ie&&document.body.setCapture(!1);break;case this.STATUS.CELL_SELECTED:this.oApp.delayedExec("MSG_CELL_SELECTED",[],0),this.oApp.oNavigator.ie&&document.body.releaseCapture()}this.oApp.exec("TABLE_EDITOR_STATUS_CHANGED",[this.nStatus])}},_isOnBorder:function(a){this.htResizing.nResizeMode=0;this.htResizing.elCell=a.element;if("TD"!=a.element.tagName&&"TH"!=a.element.tagName)return!1;this.htResizing.elTable=nhn.husky.SE2M_Utils.findAncestorByTagName("TABLE",
this.htResizing.elCell);if(this.htResizing.elTable&&(jindo.$Element(this.htResizing.elTable).hasClass(this._sSETblClass)||jindo.$Element(this.htResizing.elTable).hasClass(this._sSEReviewTblClass))){this.htResizing.nVA=0;this.htResizing.nHA=0;this.htResizing.nBorderLeftPos=0;this.htResizing.nBorderTopPos=-1;this.htResizing.htEPos=a.pos(!0);this.htResizing.nBorderSize=this.parseIntOr0(this.htResizing.elTable.border);var b;jindo.$Agent().navigator().ie||jindo.$Agent().navigator().safari?(a=this.htResizing.nBorderSize+
this.nDraggableCellEdge,b=this.nDraggableCellEdge):(a=this.nDraggableCellEdge,b=this.htResizing.nBorderSize+this.nDraggableCellEdge);this.htResizing.htEPos.offsetY<=a&&this.htResizing.elCell.parentNode.previousSibling&&(this.htResizing.nVA=-1,this.htResizing.nResizeMode=2);this.htResizing.elCell.offsetHeight-b<=this.htResizing.htEPos.offsetY&&(this.htResizing.nBorderTopPos=this.htResizing.elCell.offsetHeight+a-1,this.htResizing.nResizeMode=2);this.htResizing.htEPos.offsetX<=a&&this.htResizing.elCell.previousSibling&&
(this.htResizing.nHA=-1,this.htResizing.nResizeMode=0);this.htResizing.elCell.offsetWidth-b<=this.htResizing.htEPos.offsetX&&(this.htResizing.nBorderLeftPos=this.htResizing.elCell.offsetWidth+a-1,this.htResizing.nResizeMode=1);return 0===this.htResizing.nResizeMode?!1:!0}},_showCellResizeGrip:function(){this.elResizeCover.style.cursor=1==this.htResizing.nResizeMode?"col-resize":"row-resize";this._showResizer();1==this.htResizing.nResizeMode?(this._setResizerSize(2*(this.htResizing.nBorderSize+this.nDraggableCellEdge),
this.parseIntOr0(jindo.$Element(this.elIFrame).css("height"))),jindo.$Element(this.elResizeGrid).offset(this.htFrameOffset.top,this.htFrameOffset.left+this.htResizing.htEPos.clientX-this.parseIntOr0(this.elResizeGrid.style.width)/2-this.htResizing.htEPos.offsetX+this.htResizing.nBorderLeftPos)):(this._setResizerSize(this.parseIntOr0(this.oApp.elEditingAreaContainer.offsetWidth+"px"),2*(this.htResizing.nBorderSize+this.nDraggableCellEdge)),jindo.$Element(this.elResizeGrid).offset(this.htFrameOffset.top+
this.htResizing.htEPos.clientY-this.parseIntOr0(this.elResizeGrid.style.height)/2-this.htResizing.htEPos.offsetY+this.htResizing.nBorderTopPos,this.htFrameOffset.left))},_getAllAffectedCells:function(a,b,c,d){if(!d)return[];d=this._getCellMapping(d);var e=d.length,f=d[0].length,g=[],h=[],j=-1,k=-1;if(1==c){for(b=0;b<f;b++)if(!(0<g.length&&g[g.length-1]==d[a][b])&&(g[g.length]=d[a][b],c=parseInt(d[a][b].style.width),-1==j||j>c))j=c;if(d.length>a+1)for(b=0;b<f;b++)if(!(0<h.length&&h[h.length-1]==d[a+
1][b])&&(h[h.length]=d[a+1][b],c=parseInt(d[a+1][b].style.width),-1==k||k>c))k=c}else for(a=0;a<e;a++)if(!(0<g.length&&g[g.length-1]==d[a][b])&&(g[g.length]=d[a][b],-1==j||j>d[a][b].style.height))j=d[a][b].style.height;return{aCellsBefore:g,aCellsAfter:h,nMinBefore:j,nMinAfter:k}},_createCellResizeGrip:function(){this.elTmp=document.createElement("DIV");try{this.elTmp.innerHTML='<div style="position:absolute; overflow:hidden; z-index: 99; "><div onmousedown="return false" style="background-color:#000000;filter:alpha(opacity=0);opacity:0.0;-moz-opacity:0.0;-khtml-opacity:0.0;cursor: col-resize; left: 0px; top: 0px; width: 100%; height: 100%;font-size:1px;z-index: 999; "></div></div>',
this.elResizeGrid=this.elTmp.firstChild,this.elResizeCover=this.elResizeGrid.firstChild}catch(a){}document.body.appendChild(this.elResizeGrid)},_selectAll_Row:function(){this.htSelectionSPos.x=0;this.htSelectionEPos.x=this.htMap.length-1;this._selectCells(this.htSelectionSPos,this.htSelectionEPos)},_selectAll_Column:function(){this.htSelectionSPos.y=0;this.htSelectionEPos.y=this.htMap[0].length-1;this._selectCells(this.htSelectionSPos,this.htSelectionEPos)},_deleteSelectedColumn:function(){var a=
this.htSelectionSPos.x,b=this.htSelectionEPos.x,c;c=null;for(var d=a;d<=b;d++)if(elCurCell=this.htMap[d][this.htSelectionSPos.y],elCurCell!=c){elCurCell.innerHTML="";c=parseInt(elCurCell.getAttribute("colSpan"),10)||1;elCurCell.style.width="";elCurCell.setAttribute("colSpan",1);for(var e=0;e<c-1;e++){var f=this.oApp.getWYSIWYGDocument().createElement("TD");elCurCell.parentNode.insertBefore(f,elCurCell)}c=elCurCell}this.htMap=this._getCellMapping(this.elSelectionStartTable);for(d=a;d<=b;d++)this._deleteColumn(a)},
_deleteColumn:function(a){for(var b,c=0,d=0;d<this.htMap[0].length;d++)if(b=this.htMap[a][d],nSpan=parseInt(b.getAttribute("colSpan"),10)||1,1==nSpan){c=b.offsetWidth;break}for(var e=null,d=0;d<this.htMap[0].length;d++)b=this.htMap[a][d],b!=e&&(e=b,nSpan=parseInt(b.getAttribute("colSpan"),10)||1,1<nSpan?(b.setAttribute("colSpan",nSpan-1),b.style.width=parseInt(b.style.width)-c+"px"):b.parentNode.removeChild(b));aTR=jindo.$$(">TBODY>TR",this.elSelectionStartTable,{oneTimeOffCache:!0});1>aTR.length?
this.elSelectionStartTable.parentNode.removeChild(this.elSelectionStartTable):this.htMap=this._getCellMapping(this.elSelectionStartTable)},_deleteSelectedRow:function(){for(var a=this.htSelectionSPos.y,b=this.htSelectionEPos.y,c=a;c<=b;c++)this._deleteRow(a)},_deleteRow:function(a){var b;b=jindo.$$(">TBODY>TR",this.elSelectionStartTable,{oneTimeOffCache:!0});for(var c=b[a],d=c.offsetHeight,e=0;e<this.htMap.length;e++)b=this.htMap[e][a],nSpan=parseInt(b.getAttribute("rowSpan"),10)||1,1<nSpan?(b.setAttribute("rowSpan",
nSpan-1),b.style.height=parseInt(b.style.height)-d+"px",b.parentNode==c&&this._appendCellAt(b,e,a+1)):b.parentNode.removeChild(b);c.parentNode.removeChild(c);b=jindo.$$(">TBODY>TR",this.elSelectionStartTable,{oneTimeOffCache:!0});1>b.length?this.elSelectionStartTable.parentNode.removeChild(this.elSelectionStartTable):this.htMap=this._getCellMapping(this.elSelectionStartTable)},_appendCellAt:function(a,b,c){for(var d=jindo.$$(">TBODY>TR",this.elSelectionStartTable,{oneTimeOffCache:!0})[c],e=null,f=
this.htMap.length-1;f>=b;f--)this.htMap[f][c].parentNode==d&&(e=this.htMap[f][c]);d.insertBefore(a,e)},_deleteSelectedCells:function(){for(var a,b=0,c=this.aSelectedCells.length;b<c;b++)a=this.aSelectedCells[b],a.parentNode.removeChild(a);var d=jindo.$$(">TBODY>TR",this.elSelectionStartTable,{oneTimeOffCache:!0});if(this.htSelectionEPos.x-this.htSelectionSPos.x+1==this.htMap.length){b=0;for(c=d.length;b<c;b++)a=d[b],(!this.htMap[0][b]||!this.htMap[0][b].parentNode||"TR"!==this.htMap[0][b].parentNode.tagName)&&
a.parentNode.removeChild(a);d=jindo.$$(">TBODY>TR",this.elSelectionStartTable,{oneTimeOffCache:!0})}1>d.length&&this.elSelectionStartTable.parentNode.removeChild(this.elSelectionStartTable);this._updateSelection()},_insertColumnAfter:function(){this._removeClassFromSelection();this._hideTableTemplate(this.elSelectionStartTable);for(var a=jindo.$$(">TBODY>TR",this.elSelectionStartTable,{oneTimeOffCache:!0}),b,c,d,e=0,f=this.htMap[0].length;e<f;e++){d=a[e];for(var g=this.htSelectionEPos.x;g>=this.htSelectionSPos.x;g--){b=
this.htMap[g][e];c=this._shallowCloneTD(b);var h=parseInt(b.getAttribute("rowSpan"));1<h&&(c.setAttribute("rowSpan",1),c.style.height="");h=parseInt(b.getAttribute("colSpan"));1<h&&(c.setAttribute("colSpan",1),c.style.width="");b=null;for(h=this.htSelectionEPos.x;h>=this.htSelectionSPos.x;h--)if(this.htMap[h][e].parentNode==d){b=this.htMap[h][e].nextSibling;break}d.insertBefore(c,b)}}a=0;for(c=this.aSelectedCells.length;a<c;a++)this.aSelectedCells[a].removeAttribute("_tmp_inserted");a=this.htSelectionEPos.x-
this.htSelectionSPos.x+1;this.htSelectionSPos.x+=a;this.htSelectionEPos.x+=a;this.htMap=this._getCellMapping(this.elSelectionStartTable);this._selectCells(this.htSelectionSPos,this.htSelectionEPos);this._showTableTemplate(this.elSelectionStartTable);this._addClassToSelection();this.sQEAction="INSERT_TABLE_COLUMN";this.oApp.exec("SHOW_COMMON_QE")},_insertRowBelow:function(){this._selectAll_Row();this._removeClassFromSelection();this._hideTableTemplate(this.elSelectionStartTable);for(var a,b=this.htMap[0][0].parentNode.parentNode,
c=jindo.$$(">TR",b,{oneTimeOffCache:!0})[this.htSelectionEPos.y+1]||null,d=this.htSelectionSPos.y;d<=this.htSelectionEPos.y;d++)a=this._getTRCloneWithAllTD(d),b.insertBefore(a,c);a=this.htSelectionEPos.y-this.htSelectionSPos.y+1;this.htSelectionSPos.y+=a;this.htSelectionEPos.y+=a;this.htMap=this._getCellMapping(this.elSelectionStartTable);this._selectCells(this.htSelectionSPos,this.htSelectionEPos);this._showTableTemplate(this.elSelectionStartTable);this._addClassToSelection();this.sQEAction="INSERT_TABLE_ROW";
this.oApp.exec("SHOW_COMMON_QE")},_updateSelection:function(){this.aSelectedCells=jindo.$A(this.aSelectedCells).filter(function(a){return null!==a.parentNode&&null!==a.parentNode.parentNode}).$value()},_startCellSelection:function(){this.htMap=this._getCellMapping(this.elSelectionStartTable);this.oApp.getEmptySelection().oBrowserSelection.selectNone();if(this.oApp.oNavigator.safari||this.oApp.oNavigator.chrome)this.oApp.getWYSIWYGDocument().onselectstart=function(){return!1};var a=this.oApp.getWYSIWYGWindow().frameElement;
this.htEditingAreaPos=jindo.$Element(a).offset();this.htEditingAreaPos.height=a.offsetHeight;this.htEditingAreaPos.bottom=this.htEditingAreaPos.top+this.htEditingAreaPos.height;this.htEditingAreaPos.width=a.offsetWidth;this.htEditingAreaPos.right=this.htEditingAreaPos.left+this.htEditingAreaPos.width;this._changeTableEditorStatus(this.STATUS.CELL_SELECTING)},_selectBetweenCells:function(a,b){this._deselectCells();var c=this._getBasisCellPosition(a),d=this._getBasisCellPosition(b);this._setEndPos(c);
this._setEndPos(d);var e={},f={};e.x=Math.min(c.x,c.ex,d.x,d.ex);e.y=Math.min(c.y,c.ey,d.y,d.ey);f.x=Math.max(c.x,c.ex,d.x,d.ex);f.y=Math.max(c.y,c.ey,d.y,d.ey);this._selectCells(e,f)},_getNextCell:function(a){for(;a;)if((a=a.nextSibling)&&a.tagName&&a.tagName.match(/^TD|TH$/))return a;return null},_getCellMapping:function(a){for(var b=jindo.$$(">TBODY>TR",a,{oneTimeOffCache:!0}),c=0,d=b[0].childNodes,e=0;e<d.length;e++){var f=d[e];f.tagName&&f.tagName.match(/^TD|TH$/)&&(f.getAttribute("colSpan")?
c+=this.parseIntOr0(f.getAttribute("colSpan")):c++)}for(var e=c,g=b.length,c=Array(e),d=0;d<e;d++)c[d]=Array(g);for(e=0;e<g;e++)if(f=b[e].childNodes[0]){if(!f.tagName||!f.tagName.match(/^TD|TH$/))f=this._getNextCell(f);for(d=-1;f;)if(d++,c[d]||(c[d]=[]),!c[d][e]){for(var h=parseInt(f.getAttribute("colSpan"),10)||1,j=parseInt(f.getAttribute("rowSpan"),10)||1,k=0;k<j;k++)for(var m=0;m<h;m++)c[d+m]||(c[d+m]=[]),c[d+m][e+k]=f;f=this._getNextCell(f)}}d=!1;g=null;h=e=0;for(k=c[0].length;e<k;e++,h++)if(g=
null,!b[e].innerHTML.match(/TD|TH/i)){d=0;for(m=c.length;d<m;d++)f=c[d][e],f!==g&&(g=f,j=parseInt(f.getAttribute("rowSpan"),10)||1,1<j&&f.setAttribute("rowSpan",j-1));b[e].parentNode.removeChild(b[e]);this.htSelectionEPos.y>=h&&(h--,this.htSelectionEPos.y--);d=!0}return d?this._getCellMapping(a):c},_selectCells:function(a,b){this.aSelectedCells=this._getSelectedCells(a,b);this._addClassToSelection()},_deselectCells:function(){this._removeClassFromSelection();this.aSelectedCells=[];this.htSelectionSPos=
{x:-1,y:-1};this.htSelectionEPos={x:-1,y:-1}},_addClassToSelection:function(){for(var a,b,c=0;c<this.aSelectedCells.length;c++)b=this.aSelectedCells[c],a=jindo.$Element(b),a.addClass(this.CELL_SELECTION_CLASS),b.style.backgroundColor&&(b.setAttribute(this.TMP_BGC_ATTR,b.style.backgroundColor),a.css("backgroundColor","")),b.style.backgroundImage&&(b.setAttribute(this.TMP_BGIMG_ATTR,b.style.backgroundImage),a.css("backgroundImage",""))},_removeClassFromSelection:function(){for(var a,b,c=0;c<this.aSelectedCells.length;c++)b=
this.aSelectedCells[c],a=jindo.$Element(b),a.removeClass(this.CELL_SELECTION_CLASS),b.getAttribute(this.TMP_BGC_ATTR)&&(b.style.backgroundColor=b.getAttribute(this.TMP_BGC_ATTR),b.removeAttribute(this.TMP_BGC_ATTR)),b.getAttribute(this.TMP_BGIMG_ATTR)&&(a.css("backgroundImage",b.getAttribute(this.TMP_BGIMG_ATTR)),b.removeAttribute(this.TMP_BGIMG_ATTR))},_expandAndSelect:function(a,b){var c,d,e;if(0<a.y)for(c=a.x;c<=b.x;c++)if(d=this.htMap[c][a.y],this.htMap[c][a.y-1]==d){for(e=a.y-2;0<=e&&this.htMap[c][e]==
d;)e--;a.y=e+1;this._expandAndSelect(a,b);return}if(0<a.x)for(c=a.y;c<=b.y;c++)if(d=this.htMap[a.x][c],this.htMap[a.x-1][c]==d){for(e=a.x-2;0<=e&&this.htMap[e][c]==d;)e--;a.x=e+1;this._expandAndSelect(a,b);return}if(b.y<this.htMap[0].length-1)for(c=a.x;c<=b.x;c++)if(d=this.htMap[c][b.y],this.htMap[c][b.y+1]==d){for(e=b.y+2;e<this.htMap[0].length&&this.htMap[c][e]==d;)e++;b.y=e-1;this._expandAndSelect(a,b);return}if(b.x<this.htMap.length-1)for(c=a.y;c<=b.y;c++)if(d=this.htMap[b.x][c],this.htMap[b.x+
1][c]==d){for(e=b.x+2;e<this.htMap.length&&this.htMap[e][c]==d;)e++;b.x=e-1;this._expandAndSelect(a,b);break}},_getSelectedCells:function(a,b){this._expandAndSelect(a,b);var c=a.x,d=a.y,e=b.x,f=b.y;this.htSelectionSPos=a;this.htSelectionEPos=b;for(var g=[];d<=f;d++)for(var h=c;h<=e;h++)jindo.$A(g).has(this.htMap[h][d])||(g[g.length]=this.htMap[h][d]);return g},_setEndPos:function(a){var b,c;b=parseInt(a.elCell.getAttribute("colSpan"),10)||1;c=parseInt(a.elCell.getAttribute("rowSpan"),10)||1;a.ex=
a.x+b-1;a.ey=a.y+c-1},_getBasisCellPosition:function(a){for(var b=0,c=0,b=0;b<this.htMap.length;b++)for(c=0;c<this.htMap[b].length;c++)if(this.htMap[b][c]==a)return{x:b,y:c,elCell:a};return{x:0,y:0,elCell:a}},_applyTableTemplate:function(a,b){a&&(this._clearAllTableStyles(a),this._doApplyTableTemplate(a,nhn.husky.SE2M_TableTemplate[b],!1),a.setAttribute(this.ATTR_TBL_TEMPLATE,b))},_clearAllTableStyles:function(a){a.removeAttribute("border");a.removeAttribute("cellPadding");a.removeAttribute("cellSpacing");
a.style.padding="";a.style.border="";a.style.backgroundColor="";a.style.color="";a=jindo.$$(">TBODY>TR>TD",a,{oneTimeOffCache:!0});for(var b=0,c=a.length;b<c;b++)a[b].style.padding="",a[b].style.border="",a[b].style.backgroundColor="",a[b].style.color=""},_hideTableTemplate:function(a){a.getAttribute(this.ATTR_TBL_TEMPLATE)&&this._doApplyTableTemplate(a,nhn.husky.SE2M_TableTemplate[this.parseIntOr0(a.getAttribute(this.ATTR_TBL_TEMPLATE))],!0)},_showTableTemplate:function(a){a.getAttribute(this.ATTR_TBL_TEMPLATE)&&
this._doApplyTableTemplate(a,nhn.husky.SE2M_TableTemplate[this.parseIntOr0(a.getAttribute(this.ATTR_TBL_TEMPLATE))],!1)},_doApplyTableTemplate:function(a,b,c){var d=b.htTableProperty,e=b.htTableStyle,f=b.ht1stRowStyle,g=b.ht1stColumnStyle;b=b.aRowStyle;var h;d&&this._copyAttributesTo(a,d,c);e&&this._copyStylesTo(a,e,c);a=jindo.$$(">TBODY>TR",a,{oneTimeOffCache:!0});d=0;if(f)for(var d=1,j=0,k=a[0].childNodes.length;j<k;j++)h=a[0].childNodes[j],h.tagName&&h.tagName.match(/^TD|TH$/)&&this._copyStylesTo(h,
f,c);if(g){f=f?1:0;for(e=a.length;f<e;)j=a[f].firstChild,h=1,j&&j.tagName.match(/^TD|TH$/)&&(h=parseInt(j.getAttribute("rowSpan"),10)||1,this._copyStylesTo(j,g,c)),f+=h}if(b){g=b.length;f=d;for(e=a.length;f<e;f++){j=0;for(k=a[f].childNodes.length;j<k;j++)h=a[f].childNodes[j],h.tagName&&h.tagName.match(/^TD|TH$/)&&this._copyStylesTo(h,b[(f+d)%g],c)}}},_copyAttributesTo:function(a,b,c){var d,e;for(e in b)b.hasOwnProperty(e)&&(c?a[e]&&(d=document.createElement(a.tagName),d[e]=b[e],d[e]==a[e]&&a.removeAttribute(e)):
(d=document.createElement(a.tagName),d.style[e]="",(!a[e]||a.style[e]==d.style[e])&&a.setAttribute(e,b[e])))},_copyStylesTo:function(a,b,c){var d,e;for(e in b)if(b.hasOwnProperty(e))if(c)a.style[e]&&(d=document.createElement(a.tagName),d.style[e]=b[e],d.style[e]==a.style[e]&&(a.style[e]=""));else if(d=document.createElement(a.tagName),d.style[e]="",!a.style[e]||a.style[e]==d.style[e]||e.match(/^border/))a.style[e]=b[e]},_hideResizer:function(){this.elResizeGrid.style.display="none"},_showResizer:function(){this.elResizeGrid.style.display=
"block"},_setResizerSize:function(a,b){this.elResizeGrid.style.width=a+"px";this.elResizeGrid.style.height=b+"px"},parseBorder:function(a,b){if("none"==b)return 0;var c=parseInt(a,10);return isNaN(c)&&"string"==typeof a?1:c},parseIntOr0:function(a){a=parseInt(a,10);return isNaN(a)?0:a},_shallowCloneTR:function(a){for(var b=a.cloneNode(!1),c,d=0,e=a.childNodes.length;d<e;d++)c=a.childNodes[d],"TD"==c.tagName&&(c=this._shallowCloneTD(c),b.insertBefore(c,null));return b},_getTRCloneWithAllTD:function(a){for(var b=
this.htMap[0][a].parentNode.cloneNode(!1),c,d=0,e=this.htMap.length;d<e;d++)c=this.htMap[d][a],"TD"==c.tagName&&(c=this._shallowCloneTD(c),c.setAttribute("rowSpan",1),c.setAttribute("colSpan",1),c.style.width="",c.style.height="",b.insertBefore(c,null));return b},_shallowCloneTD:function(a){a=a.cloneNode(!1);a.innerHTML=this.sEmptyTDSrc;return a},_isValidTable:function(a){if(!a||!a.tagName||"TABLE"!=a.tagName)return!1;this.htMap=this._getCellMapping(a);a=this.htMap.length;if(1>a)return!1;var b=this.htMap[0].length;
if(1>b)return!1;for(var c=1;c<a;c++){if(this.htMap[c].length!=b||!this.htMap[c][b-1])return!1;for(var d=0;d<b;d++)if(!this.htMap[c]||!this.htMap[c][d])return!1}return!0},addCSSClass:function(a,b){var c=this.oApp.getWYSIWYGDocument();if(c.styleSheets[0]&&c.styleSheets[0].addRule)c.styleSheets[0].addRule("."+a,b);else{var d=c.getElementsByTagName("HEAD")[0],c=c.createElement("STYLE");d.appendChild(c);c.sheet.insertRule("."+a+" { "+b+" }",0)}}});
nhn.husky.SE2M_QuickEditor_Common=jindo.$Class({name:"SE2M_QuickEditor_Common",_environmentData:"",_currentType:"",_in_event:!1,_bUseConfig:!0,_sBaseAjaxUrl:"",_sAddTextAjaxUrl:"",$init:function(){this.waHotkeys=new jindo.$A([]);this.waHotkeyLayers=new jindo.$A([])},$ON_MSG_APP_READY:function(){var a=nhn.husky.SE2M_Configuration.QuickEditor;a&&(this._bUseConfig=a.common&&"undefined"!==typeof a.common.bUseConfig?a.common.bUseConfig:!0);this._bUseConfig?(this._sBaseAjaxUrl=a.common.sBaseAjaxUrl,this._sAddTextAjaxUrl=
a.common.sAddTextAjaxUrl,this.getData()):this.setData("{table:'full',img:'full',review:'full'}")},$ON_EVENT_EDITING_AREA_KEYDOWN:function(a){var b=a.key();(8==b.keyCode||46==b.keyCode)&&this.oApp.exec("CLOSE_QE_LAYER",[a])},getData:function(){var a=this;jindo.$Ajax(a._sBaseAjaxUrl,{type:"jsonp",timeout:1,onload:function(b){(b=b.json().result)&&b.length?a.setData(b[b.length-1]):a.setData("{table:'full',img:'full',review:'full'}")},onerror:function(){a.setData("{table:'full',img:'full',review:'full'}")},
ontimeout:function(){a.setData("{table:'full',img:'full',review:'full'}")}}).request({text_key:"qeditor_fold"})},setData:function(a){var b={table:"full",img:"full",review:"full"};a&&(b=eval("("+a+")"));this._environmentData={table:{isOpen:!1,type:b.table,isFixed:!1,position:[]},img:{isOpen:!1,type:b.img,isFixed:!1},review:{isOpen:!1,type:b.review,isFixed:!1,position:[]}};this.waTableTagNames=jindo.$A("table tbody td tfoot th thead tr".split(" "))},$ON_REGISTER_HOTKEY:function(a,b,c){"tab"!=a&&"shift+tab"!=
a&&this.waHotkeys.push([a,b,c])},$ON_MSG_BEFOREUNLOAD_FIRED:function(){this._environmentData&&this._bUseConfig&&jindo.$Ajax(this._sAddTextAjaxUrl,{type:"jsonp",onload:function(){}}).request({text_key:"qeditor_fold",text_data:"{table:'"+this._environmentData.table.type+"',img:'"+this._environmentData.img.type+"',review:'"+this._environmentData.review.type+"'}"})},setOpenType:function(a,b){this._environmentData[a].isOpen=b},$ON_OPEN_QE_LAYER:function(a,b,c){if(0<this.waHotkeys.length()&&!this.waHotkeyLayers.has(b)){this.waHotkeyLayers.push(b);
for(var d,e=0,f=this.waHotkeys.length();e<f;e++)d=this.waHotkeys.get(e),this.oApp.exec("ADD_HOTKEY",[d[0],d[1],d[2],b])}c&&(this.targetEle=a,this.currentEle=b,this.layer_show(c,a))},$ON_CLOSE_QE_LAYER:function(a){this.currentEle&&(this.oApp.exec("CLOSE_SUB_LAYER_QE"),this.layer_hide(a))},$LOCAL_BEFORE_FIRST:function(a){if(!a.match(/OPEN_QE_LAYER/))return this.oApp.acceptLocalBeforeFirstAgain(this,!0),a.match(/REGISTER_HOTKEY/)?!0:!1;this.woEditor=jindo.$Element(this.oApp.elEditingAreaContainer);this.woStandard=
jindo.$Element(this.oApp.htOptions.elAppContainer).offset();this._qe_wrap=jindo.$$.getSingle("DIV.quick_wrap",this.oApp.htOptions.elAppContainer);var b=this;(new jindo.DragArea(this._qe_wrap,{sClassName:"q_dragable",bFlowOut:!1,nThreshold:1})).attach({beforeDrag:function(a){a.elFlowOut=a.elArea.parentNode},dragStart:function(a){jindo.$Element(a.elDrag).hasClass("se2_qmax")||(a.elDrag=a.elDrag.parentNode);b.oApp.exec("SHOW_EDITING_AREA_COVER")},dragEnd:function(a){b.changeFixedMode();b._in_event=!1;
a=jindo.$Element(a.elDrag);b._environmentData[b._currentType].position=[a.css("top"),a.css("left")];b.oApp.exec("HIDE_EDITING_AREA_COVER")}});a=jindo.$Fn(this.toggle,this).bind("img");var c=jindo.$Fn(this.toggle,this).bind("table");jindo.$Fn(a,this).attach(jindo.$$.getSingle(".q_open_img_fold",this.oApp.htOptions.elAppContainer),"click");jindo.$Fn(a,this).attach(jindo.$$.getSingle(".q_open_img_full",this.oApp.htOptions.elAppContainer),"click");jindo.$Fn(c,this).attach(jindo.$$.getSingle(".q_open_table_fold",
this.oApp.htOptions.elAppContainer),"click");jindo.$Fn(c,this).attach(jindo.$$.getSingle(".q_open_table_full",this.oApp.htOptions.elAppContainer),"click")},toggle:function(a,b){a=this._currentType;this.oApp.exec("CLOSE_QE_LAYER",[b]);this._environmentData[a].type="full"==this._environmentData[a].type?"fold":"full";this.oApp.exec("OPEN_QE_LAYER",[this.targetEle,this.currentEle,a]);this._in_event=!1;b.stop(jindo.$Event.CANCEL_DEFAULT)},positionCopy:function(a,b,c){jindo.$Element(jindo.$$.getSingle("._"+
c,this.currentEle)).css({top:b,left:a})},changeFixedMode:function(){this._environmentData[this._currentType].isFixed=!0},$ON_HIDE_ACTIVE_LAYER:function(){this.oApp.exec("CLOSE_QE_LAYER")},$ON_EVENT_EDITING_AREA_MOUSEDOWN:function(a){this._currentType&&(!this._in_event&&this._environmentData[this._currentType].isOpen)&&this.oApp.exec("CLOSE_QE_LAYER",[a]);this._in_event=!1},$ON_EVENT_EDITING_AREA_MOUSEWHEEL:function(a){this._currentType&&(!this._in_event&&this._environmentData[this._currentType].isOpen)&&
this.oApp.exec("CLOSE_QE_LAYER",[a]);this._in_event=!1},get_type:function(a){a=a.tagName.toLowerCase();if(this.waTableTagNames.has(a))return"table";if("img"==a)return"img"},$ON_QE_IN_KEYUP:function(){this._in_event=!0},$ON_QE_IN_MOUSEDOWN:function(){this._in_event=!0},$ON_QE_IN_MOUSEWHEEL:function(){this._in_event=!0},layer_hide:function(){this.setOpenType(this._currentType,!1);jindo.$Element(jindo.$$.getSingle("._"+this._environmentData[this._currentType].type,this.currentEle)).hide()},lazy_common:function(){this.oApp.registerBrowserEvent(jindo.$(this._qe_wrap),
"keyup","QE_IN_KEYUP");this.oApp.registerBrowserEvent(jindo.$(this._qe_wrap),"mousedown","QE_IN_MOUSEDOWN");this.oApp.registerBrowserEvent(jindo.$(this._qe_wrap),"mousewheel","QE_IN_MOUSEWHEEL");this.lazy_common=function(){}},layer_show:function(a,b){this._currentType=a;this.setOpenType(this._currentType,!0);var c=jindo.$$.getSingle("._"+this._environmentData[this._currentType].type,this.currentEle);jindo.$Element(c).show().css(this.get_position_layer(b,c));this.lazy_common()},get_position_layer:function(a,
b){if(!this.isCurrentFixed()||"fold"==this._environmentData[this._currentType].type)return this.calculateLayer(a,b);var c=this._environmentData[this._currentType].position,d=parseInt(c[0],10),e=this.getAppPosition().h,f=jindo.$Element(b).height();d+f+this.nYGap>e&&(d=e-f,this._environmentData[this._currentType].position[0]=d);return{top:d+"px",left:c[1]}},isCurrentFixed:function(){return this._environmentData[this._currentType].isFixed},calculateLayer:function(a,b){var c=this.getPositionInfo(a,b);
return{top:c.y+"px",left:c.x+"px"}},getPositionInfo:function(a,b){this.nYGap=jindo.$Agent().navigator().ie?-16:-18;this.nXGap=1;var c=this.getElementPosition(a,b),d=this.getAppPosition(),e=jindo.$Element(b).width(),f=jindo.$Element(b).height();return{x:c.x+e+this.nXGap>d.w?d.w-e:c.x+this.nXGap,y:c.y+f+this.nYGap>d.h?d.h-f-2:c.y+this.nYGap}},getElementPosition:function(a,b){var c,d,e,f,g;a?(c=jindo.$Element(a),d=c.offset(),e=c.width(),c=c.height()):(d={top:parseInt(b.style.top,10)-this.nYGap,left:parseInt(b.style.left,
10)-this.nXGap},c=e=0);g=this.oApp.getWYSIWYGWindow();"undefined"==typeof g.scrollX?(f=g.document.documentElement.scrollLeft,g=g.document.documentElement.scrollTop):(f=g.scrollX,g=g.scrollY);this.woEditor.offset();return{x:d.left-f+e,y:d.top-g+c}},getAppPosition:function(){return{w:this.woEditor.width(),h:this.woEditor.height()}}});
nhn.husky.Hotkey=jindo.$Class({name:"Hotkey",$init:function(){this.oShortcut=shortcut},$ON_ADD_HOTKEY:function(a,b,c,d){c||(c=[]);b=jindo.$Fn(this.oApp.exec,this.oApp).bind(b,c);this.oShortcut(a,d).addEvent(b)}});
function Shortcut(a,b){a=a.replace(/\s+/g,"");var c=Shortcut.Store,d=Shortcut.Action;if("undefined"===typeof b&&a.constructor==String)return c.set("document",a,document),d.init(c.get("document"),a);if(b.constructor==String&&a.constructor==String)return c.set(b,a,jindo.$(b)),d.init(c.get(b),a);if(b.constructor!=String&&a.constructor==String){var e="nonID"+(new Date).getTime(),e=Shortcut.Store.searchId(e,b);c.set(e,a,b);return d.init(c.get(e),a)}alert(b+"\ub294 \ubc18\ub4dc\uc2dc string\uc774\uac70\ub098  \uc5c6\uc5b4\uc57c \ub429\ub2c8\ub2e4.")}
Shortcut.Store={anthorKeyHash:{},datas:{},currentId:"",currentKey:"",searchId:function(a,b){jindo.$H(this.datas).forEach(function(c,d){b==c.element&&(a=d,jindo.$H.Break())});return a},set:function(a,b,c){this.currentId=a;this.currentKey=b;var d=this.get(a);this.datas[a]=d?d.createKey(b):new Shortcut.Data(a,b,c)},get:function(a,b){return b?this.datas[a].keys[b]:this.datas[a]},reset:function(a){var b=this.datas[a];Shortcut.Helper.bind(b.func,b.element,"detach");delete this.datas[a]},allReset:function(){jindo.$H(this.datas).forEach(jindo.$Fn(function(a,
b){this.reset(b)},this).bind())}};
Shortcut.Data=jindo.$Class({$init:function(a,b,c){this.id=a;this.element=c;this.func=jindo.$Fn(this.fire,this).bind();Shortcut.Helper.bind(this.func,c,"attach");this.keys={};this.keyStemp={};this.createKey(b)},createKey:function(a){this.keyStemp[Shortcut.Helper.keyInterpretor(a)]=a;this.keys[a]={};var b=this.keys[a];b.key=a;b.events=[];b.commonExceptions=[];b.stopDefalutBehavior=!0;return this},getKeyStamp:function(a){var b=a.keyCode||a.charCode,c;c=""+(a.altKey?"1":"0");c+=a.ctrlKey?"1":"0";c+=a.metaKey?
"1":"0";c+=a.shiftKey?"1":"0";return c+b},fire:function(a){a=a||window.eEvent;var b=this.keyStemp[this.getKeyStamp(a)];b&&this.excute(new jindo.$Event(a),b)},excute:function(a,b){var c=!0,d=this.keys[b];Shortcut.Helper.notCommonException(a,d.commonExceptions)&&jindo.$A(d.events).forEach(function(b){if(d.stopDefalutBehavior){var f=b.exceptions.length;if(f){for(var g=0;g<f;g++)if(!b.exception[g](a)){c=!1;break}c?(b.event(a),jindo.$Agent().navigator().ie&&(b=a._event,b.keyCode="",b.charCode=""),a.stop()):
jindo.$A.Break()}else b.event(a),jindo.$Agent().navigator().ie&&(b=a._event,b.keyCode="",b.charCode=""),a.stop()}})},addEvent:function(a,b){var c=this.keys[b].events;Shortcut.Helper.hasEvent(a,c)||c.push({event:a,exceptions:[]})},addException:function(a,b){var c=this.keys[b].commonExceptions;Shortcut.Helper.hasException(a,c)||c.push(a)},removeException:function(a,b){var c=this.keys[b].commonExceptions,c=jindo.$A(c).filter(function(b){return b!=a}).$value()},removeEvent:function(a,b){var c=this.keys[b].events,
c=jindo.$A(c).filter(function(b){return b!=a}).$value();this.unRegister(b)},unRegister:function(a){this.keys[a].events.length&&delete this.keys[a];a=!0;for(var b in this.keys){a=!1;break}a&&(Shortcut.Helper.bind(this.func,this.element,"detach"),delete Shortcut.Store.datas[this.id])},startDefalutBehavior:function(a){this._setDefalutBehavior(a,!1)},stopDefalutBehavior:function(a){this._setDefalutBehavior(a,!0)},_setDefalutBehavior:function(a,b){this.keys[a].stopDefalutBehavior=b}});
Shortcut.Helper={keyInterpretor:function(a){var b=a.split("+");a=jindo.$A(b);b=""+(a.has("alt")?"1":"0");b+=a.has("ctrl")?"1":"0";b+=a.has("meta")?"1":"0";b+=a.has("shift")?"1":"0";a=a.filter(function(a){return!("alt"==a||"ctrl"==a||"meta"==a||"shift"==a)});if(a=a.$value()[0])a=Shortcut.Store.anthorKeyHash[a.toUpperCase()]||a.toUpperCase().charCodeAt(0),b+=a;return b},notCommonException:function(a,b){for(var c=b.length,d=0;d<c;d++)if(!b[d](a))return!1;return!0},hasEvent:function(a,b){for(var c=b.length,
d=0;d<c;++d)if(b.event==a)return!0;return!1},hasException:function(a,b){for(var c=b.length,d=0;d<c;++d)if(b[d]==a)return!0;return!1},bind:function(a,b,c){"attach"==c?domAttach(b,"keydown",a):domDetach(b,"keydown",a)}};(function(){window.domAttach=document.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)}})();
(function(){window.domDetach=document.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)}})();
Shortcut.Action={init:function(a,b){this.dataInstance=a;this.rawKey=b;return this},addEvent:function(a){this.dataInstance.addEvent(a,this.rawKey);return this},removeEvent:function(a){this.dataInstance.removeEvent(a,this.rawKey);return this},addException:function(a){this.dataInstance.addException(a,this.rawKey);return this},removeException:function(a){this.dataInstance.removeException(a,this.rawKey);return this},startDefalutBehavior:function(){this.dataInstance.startDefalutBehavior(this.rawKey);return this},
stopDefalutBehavior:function(){this.dataInstance.stopDefalutBehavior(this.rawKey);return this},resetElement:function(){Shortcut.Store.reset(this.dataInstance.id);return this},resetAll:function(){Shortcut.Store.allReset();return this}};
(function(){Shortcut.Store.anthorKeyHash={BACKSPACE:8,TAB:9,ENTER:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:46,COMMA:188,PERIOD:190,SLASH:191};for(var a=Shortcut.Store.anthorKeyHash,b=1;13>b;b++)Shortcut.Store.anthorKeyHash["F"+b]=b+111;b=jindo.$Agent().navigator();b.ie||b.safari||b.chrome?(a.HYPHEN=189,a.EQUAL=187):(a.HYPHEN=109,a.EQUAL=61)})();var shortcut=Shortcut;"undefined"==typeof window.nhn&&(window.nhn={});
nhn.DraggableLayer=jindo.$Class({$init:function(a,b){this.elLayer=a;this.setOptions(b);this.elHandle=this.oOptions.elHandle;a.style.display="block";a.style.position="absolute";a.style.zIndex="9999";this.aBasePosition=this.getBaseOffset(a);var c=this.toInt(jindo.$Element(a).offset().top)-this.aBasePosition.top,d=this.toInt(jindo.$Element(a).offset().left)-this.aBasePosition.left,c=this._correctXY({x:d,y:c});a.style.top=c.y+"px";a.style.left=c.x+"px";this.$FnMouseDown=jindo.$Fn(jindo.$Fn(this._mousedown,
this).bind(a),this);this.$FnMouseMove=jindo.$Fn(jindo.$Fn(this._mousemove,this).bind(a),this);this.$FnMouseUp=jindo.$Fn(jindo.$Fn(this._mouseup,this).bind(a),this);this.$FnMouseDown.attach(this.elHandle,"mousedown");this.elHandle.ondragstart=new Function("return false");this.elHandle.onselectstart=new Function("return false")},_mousedown:function(a,b){"INPUT"!=b.element.tagName&&(this.oOptions.fnOnDragStart(),this.MouseOffsetY=b.pos().clientY-this.toInt(a.style.top)-this.aBasePosition.top,this.MouseOffsetX=
b.pos().clientX-this.toInt(a.style.left)-this.aBasePosition.left,this.$FnMouseMove.attach(a.ownerDocument,"mousemove"),this.$FnMouseUp.attach(a.ownerDocument,"mouseup"),this.elHandle.style.cursor="move")},_mousemove:function(a,b){var c=b.pos().clientY-this.MouseOffsetY-this.aBasePosition.top,d=b.pos().clientX-this.MouseOffsetX-this.aBasePosition.left,c=this._correctXY({x:d,y:c});a.style.top=c.y+"px";a.style.left=c.x+"px"},_mouseup:function(a){this.oOptions.fnOnDragEnd();this.$FnMouseMove.detach(a.ownerDocument,
"mousemove");this.$FnMouseUp.detach(a.ownerDocument,"mouseup");this.elHandle.style.cursor=""},_correctXY:function(a){var b=a.x;a=a.y;a<this.oOptions.nMinY&&(a=this.oOptions.nMinY);a>this.oOptions.nMaxY&&(a=this.oOptions.nMaxY);b<this.oOptions.nMinX&&(b=this.oOptions.nMinX);b>this.oOptions.nMaxX&&(b=this.oOptions.nMaxX);return{x:b,y:a}},toInt:function(a){return parseInt(a)||0},findNonStatic:function(a){return!a?null:"BODY"==a.tagName||jindo.$Element(a).css("position").match(/absolute|relative/i)?a:
this.findNonStatic(a.offsetParent)},getBaseOffset:function(a){a=this.findNonStatic(a.offsetParent)||a.ownerDocument.body;a=jindo.$Element(a).offset();return{top:a.top,left:a.left}},setOptions:function(a){this.oOptions=a||{};this.oOptions.bModal=this.oOptions.bModal||!1;this.oOptions.elHandle=this.oOptions.elHandle||this.elLayer;this.oOptions.nMinX=this.oOptions.nMinX||-999999;this.oOptions.nMinY=this.oOptions.nMinY||-999999;this.oOptions.nMaxX=this.oOptions.nMaxX||999999;this.oOptions.nMaxY=this.oOptions.nMaxY||
999999;this.oOptions.fnOnDragStart=this.oOptions.fnOnDragStart||function(){};this.oOptions.fnOnDragEnd=this.oOptions.fnOnDragEnd||function(){}}});
nhn.husky.ActiveLayerManager=jindo.$Class({name:"ActiveLayerManager",oCurrentLayer:null,$BEFORE_MSG_APP_READY:function(){this.oNavigator=jindo.$Agent().navigator()},$ON_TOGGLE_ACTIVE_LAYER:function(a,b,c,d,e){a==this.oCurrentLayer?this.oApp.exec("HIDE_ACTIVE_LAYER",[]):(this.oApp.exec("SHOW_ACTIVE_LAYER",[a,d,e]),b&&this.oApp.exec(b,c))},$ON_SHOW_ACTIVE_LAYER:function(a,b,c){a=jindo.$(a);a!=this.oCurrentLayer&&(this.oApp.exec("HIDE_ACTIVE_LAYER",[]),this.sOnCloseCmd=b,this.aOnCloseParam=c,a.style.display=
"block",this.oCurrentLayer=a,this.oApp.exec("ADD_APP_PROPERTY",["oToolBarLayer",this.oCurrentLayer]))},$ON_HIDE_ACTIVE_LAYER:function(){var a=this.oCurrentLayer;a&&(a.style.display="none",this.oCurrentLayer=null,this.sOnCloseCmd&&this.oApp.exec(this.sOnCloseCmd,this.aOnCloseParam),this.oNavigator.msafari&&this.oApp.getWYSIWYGWindow().focus())},$ON_HIDE_ACTIVE_LAYER_IF_NOT_CHILD:function(a){for(;a;){if(a==this.oCurrentLayer)return;a=a.parentNode}this.oApp.exec("HIDE_ACTIVE_LAYER")},$ON_HIDE_CURRENT_ACTIVE_LAYER:function(){this.oApp.exec("HIDE_ACTIVE_LAYER",
[])}});
nhn.husky.DialogLayerManager=jindo.$Class({name:"DialogLayerManager",aMadeDraggable:null,aOpenedLayers:null,$init:function(){this.aMadeDraggable=[];this.aDraggableLayer=[];this.aOpenedLayers=[]},$BEFORE_MSG_APP_READY:function(){this.oNavigator=jindo.$Agent().navigator()},$ON_SHOW_DIALOG_LAYER:function(a,b){a=jindo.$(a);b=b||{};if(a&&!jindo.$A(this.aOpenedLayers).has(a)){this.oApp.exec("POSITION_DIALOG_LAYER",[a]);this.aOpenedLayers[this.aOpenedLayers.length]=a;var c;c=jindo.$A(this.aMadeDraggable).indexOf(a);-1==
c?(c=new nhn.DraggableLayer(a,b),this.aMadeDraggable[this.aMadeDraggable.length]=a,this.aDraggableLayer[this.aDraggableLayer.length]=c):(b&&(c=this.aDraggableLayer[c],c.setOptions(b)),a.style.display="block");b.sOnShowMsg&&this.oApp.exec(b.sOnShowMsg,b.sOnShowParam)}},$ON_HIDE_LAST_DIALOG_LAYER:function(){this.oApp.exec("HIDE_DIALOG_LAYER",[this.aOpenedLayers[this.aOpenedLayers.length-1]])},$ON_HIDE_ALL_DIALOG_LAYER:function(){for(var a=this.aOpenedLayers.length-1;0<=a;a--)this.oApp.exec("HIDE_DIALOG_LAYER",
[this.aOpenedLayers[a]])},$ON_HIDE_DIALOG_LAYER:function(a){if(a=jindo.$(a))a.style.display="none";this.aOpenedLayers=jindo.$A(this.aOpenedLayers).refuse(a).$value();this.oNavigator.msafari&&this.oApp.getWYSIWYGWindow().focus()},$ON_TOGGLE_DIALOG_LAYER:function(a,b){jindo.$A(this.aOpenedLayers).indexOf(a)?this.oApp.exec("SHOW_DIALOG_LAYER",[a,b]):this.oApp.exec("HIDE_DIALOG_LAYER",[a])},$ON_SET_DIALOG_LAYER_POSITION:function(a,b,c){a.style.top=b;a.style.left=c}});
nhn.husky.LazyLoader=jindo.$Class({name:"LazyLoader",htMsgInfo:null,aLoadingInfo:null,$init:function(a){this.htMsgInfo={};this.aLoadingInfo=[];this.aToDo=a},$ON_MSG_APP_READY:function(){for(var a=0;a<this.aToDo.length;a++){var b=this.aToDo[a];this._createBeforeHandlersAndSaveURLInfo(b.oMsgs,b.sURL,b.elTarget,b.htOptions)}},$LOCAL_BEFORE_ALL:function(a,b){var c=a.replace("$BEFORE_",""),d=this.htMsgInfo[c];if(1==d.nLoadingStatus)return!0;if(2==d.nLoadingStatus)return this[a]=function(){this._removeHandler(a);
this.oApp.delayedExec(c,b,0);return!1},!0;d.bLoadingStatus=1;(new jindo.$Ajax(d.sURL,{onload:jindo.$Fn(this._onload,this).bind(c,b)})).request();return!0},_onload:function(a,b,c){4==c._response.readyState?(this.htMsgInfo[a].elTarget.innerHTML=c.text(),this.htMsgInfo[a].nLoadingStatus=2,this._removeHandler("$BEFORE_"+a),this.oApp.exec("sMsg",b)):this.oApp.exec(this.htMsgInfo[a].sFailureCallback,[])},_removeHandler:function(a){delete this[a];this.oApp.createMessageMap(a)},_createBeforeHandlersAndSaveURLInfo:function(a,
b,c,d){d=d||{};b={sURL:b,elTarget:c,sSuccessCallback:d.sSuccessCallback,sFailureCallback:d.sFailureCallback,nLoadingStatus:0};this.aLoadingInfo[this.aLoadingInfo.legnth]=b;if(!(a instanceof Array)){d=a;a=[];c={};for(var e in d)e.match(/^\$(BEFORE|ON|AFTER)_(.+)$/)&&(d=RegExp.$2,"MSG_APP_READY"!=d&&!c[d]&&(a[a.length]=RegExp.$2,c[d]=!0))}for(e=0;e<a.length;e++)c="$BEFORE_"+a[e],this[c]=function(){return!1},this.oApp.createMessageMap(c),this.htMsgInfo[a[e]]=b}});
nhn.husky.MessageManager=jindo.$Class({name:"MessageManager",oMessageMap:null,sLocale:"ko_KR",$init:function(a,b){switch(b){case "ja_JP":this.oMessageMap=oMessageMap_ja_JP;break;case "en_US":this.oMessageMap=oMessageMap_en_US;break;case "zh_CN":this.oMessageMap=oMessageMap_zh_CN;break;default:this.oMessageMap=a}},$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["$MSG",jindo.$Fn(this.getMessage,this).bind()])},getMessage:function(a){return this.oMessageMap[a]?unescape(this.oMessageMap[a]):
a}});nhn.husky.PopUpManager={};nhn.husky.PopUpManager._instance=null;nhn.husky.PopUpManager._pluginKeyCnt=0;
nhn.husky.PopUpManager.getInstance=function(a){null==this._instance&&(this._instance=new function(){this._whtPluginWin=new jindo.$H;this._whtPlugin=new jindo.$H;this.addPlugin=function(a,c){this._whtPlugin.add(a,c)};this.getPlugin=function(){return this._whtPlugin};this.getPluginWin=function(){return this._whtPluginWin};this.openWindow=function(a){var c={oApp:null,sUrl:"",sName:"popup",sLeft:null,sTop:null,nWidth:400,nHeight:400,sProperties:null,bScroll:!0},d;for(d in a)c[d]=a[d];null==c.oApp&&alert("\ud31d\uc5c5 \uc694\uccad\uc2dc \uc635\uc158\uc73c\ub85c oApp(\ud5c8\uc2a4\ud0a4 reference) \uac12\uc744 \uc124\uc815\ud558\uc154\uc57c \ud569\ub2c8\ub2e4.");
a=c.sLeft||(screen.availWidth-c.nWidth)/2;d=c.sTop||(screen.availHeight-c.nHeight)/2;var e=window.open(c.sUrl,c.sName,null!=c.sProperties?c.sProperties:"top="+d+",left="+a+",width="+c.nWidth+",height="+c.nHeight+",scrollbars="+(c.bScroll?"yes":"no")+",status=yes");e&&setTimeout(function(){try{e.focus()}catch(a){}},100);this.removePluginWin(e);this._whtPluginWin.add(this.getCorrectKey(this._whtPlugin,c.oApp),e);return e};this.getCorrectKey=function(a,c){var d=null;a.forEach(function(a,b){a==c&&(d=
b)});return d};this.removePluginWin=function(a){var c=this._whtPluginWin.search(a);c&&(this._whtPluginWin.remove(c),this.removePluginWin(a))}});this._instance.addPlugin("plugin_"+this._pluginKeyCnt++,a);return nhn.husky.PopUpManager._instance};nhn.husky.PopUpManager.setCallback=function(a,b,c){this._instance.getPluginWin().hasValue(a)&&(a=this._instance.getCorrectKey(this._instance.getPluginWin(),a))&&this._instance.getPlugin().$(a).exec(b,c)};
nhn.husky.PopUpManager.getFunc=function(a,b){if(this._instance.getPluginWin().hasValue(a)){var c=this._instance.getCorrectKey(this._instance.getPluginWin(),a);if(c)return this._instance.getPlugin().$(c)[b]()}};
nhn.husky.SE2M_ImgSizeRatioKeeper=jindo.$Class({name:"SE2M_ImgSizeRatioKeeper",$init:function(a){this.elAppContainer=a},$LOCAL_BEFORE_FIRST:function(){this.wfnResizeEnd=jindo.$Fn(this._onResizeEnd,this);this.bIE=jindo.$Agent().navigator().ie;this.elCheckImgAutoAdjust=jindo.$$.getSingle(".se2_srate",this.elAppContainer);this.bIE||(this.$ON_EVENT_EDITING_AREA_MOUSEUP=this.$ON_EVENT_EDITING_AREA_KEYDOWN=void 0)},$ON_EVENT_EDITING_AREA_KEYDOWN:function(){this._detachResizeEnd()},$ON_EVENT_EDITING_AREA_MOUSEUP:function(a){this._detachResizeEnd();
a.element&&"IMG"==a.element.tagName&&this.oApp.exec("SET_RESIZE_TARGET_IMG",[a.element])},$ON_SET_RESIZE_TARGET_IMG:function(a){a!=this.elImg&&(this._detachResizeEnd(),this._attachResizeEnd(a))},_attachResizeEnd:function(a){this.elImg=a;this.wfnResizeEnd.attach(this.elImg,"resizeend");this.elBorderSize=a.border||0;this.nWidth=this.elImg.clientWidth;this.nHeight=this.elImg.clientHeight},_detachResizeEnd:function(){this.elImg&&(this.wfnResizeEnd.detach(this.elImg,"resizeend"),this.elImg=null)},_onResizeEnd:function(a){if(a.element==
this.elImg){var b,c;c=this.elImg.border||0;a=this.elImg.clientWidth-2*c;c=this.elImg.clientHeight-2*c;this.elCheckImgAutoAdjust.checked&&(b=a-this.nWidth,-1<=b&&1>=b?(b=this.nWidth/this.nHeight,a=b*c):(b=this.nHeight/this.nWidth,c=b*a));this.elImg.style.width=a+"px";this.elImg.style.height=c+"px";this.elImg.setAttribute("width",a);this.elImg.setAttribute("height",c);this.elImg.style.rwidth=this.elImg.style.width;this.elImg.style.rheight=this.elImg.style.height;this.elImg.setAttribute("rwidth",this.elImg.getAttribute("width"));
this.elImg.setAttribute("rheight",this.elImg.getAttribute("height"));this._isAdjustPossible(this.elImg.offsetWidth)||(this.elImg.style.width=this.nWidth,this.elImg.style.height=this.nHeight,this.elImg.style.rwidth=this.elImg.style.width,this.elImg.style.rheight=this.elImg.style.height,this.elImg.setAttribute("width",this.nWidth),this.elImg.setAttribute("height",this.nHeight),this.elImg.setAttribute("rwidth",this.elImg.getAttribute("width")),this.elImg.setAttribute("rheight",this.elImg.getAttribute("height")));
this.oApp.delayedExec("SET_RESIZE_TARGET_IMG",[this.elImg],0)}},_isAdjustPossible:function(a){var b=!0;if(this.oApp.htOptions.SE2M_EditingAreaRuler&&this.oApp.htOptions.SE2M_EditingAreaRuler.bUse){var c=jindo.$Element(this.oApp.getWYSIWYGDocument().body);c&&(c=c.width(),a>c&&(b=!1,alert(this.oApp.$MSG("SE2M_ImgSizeRatioKeeper.exceedMaxWidth").replace("#EditorWidth#",c))))}return b}});"undefined"==typeof window.nhn&&(window.nhn={});nhn.husky||(nhn.husky={});
nhn.husky.SE2M_UtilPlugin=jindo.$Class({name:"SE2M_UtilPlugin",$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["oAgent",jindo.$Agent()]);this.oApp.exec("ADD_APP_PROPERTY",["oNavigator",jindo.$Agent().navigator()]);this.oApp.exec("ADD_APP_PROPERTY",["oUtils",this])},$ON_REGISTER_HOTKEY:function(a,b,c,d){this.oApp.exec("ADD_HOTKEY",[a,b,c,d||this.oApp.getWYSIWYGDocument()])},$ON_SE2_ATTACH_HOVER_EVENTS:function(a){this.oApp.exec("ATTACH_HOVER_EVENTS",[a,{fnElmToSrc:this._elm2Src,
fnElmToTarget:this._elm2Target}])},_elm2Src:function(a){return"LI"==a.tagName&&a.firstChild&&"BUTTON"==a.firstChild.tagName?a.firstChild:a},_elm2Target:function(a){return"BUTTON"==a.tagName&&"LI"==a.parentNode.tagName?a.parentNode:a},getScrollXY:function(){var a,b;b=this.oApp.getWYSIWYGWindow();"undefined"==typeof b.scrollX?(a=b.document.documentElement.scrollLeft,b=b.document.documentElement.scrollTop):(a=b.scrollX,b=b.scrollY);return{x:a,y:b}}});
nhn.husky.SE2M_Utils={sURLPattern:"(http|https|ftp|mailto):(?:\\/\\/)?((:?\\w|-)+(:?\\.(:?\\w|-)+)+)([^ <>]+)?",getCustomCSS:function(a,b,c){var d=[];if("undefined"==typeof a||"undefined"==typeof b||!a||!b)return d;(a=a.match(b))&&(a[0]&&a[1])&&(c?d=a[1].split(c):d[0]=a[1]);return d},toStringSamePropertiesOfArray:function(a,b,c){if(a instanceof Array){for(var d=[],e=0;e<a.length;e++)d.push(a[e][b]);return d.join(",").replace(/,/g,c)}if("undefined"==typeof a[b])return"";if("string"==typeof a[b])return a[b]},
makeArray:function(a){if(null===a||"undefined"===typeof a)return[];if(a instanceof Array)return a;var b=[];b.push(a);return b},ellipsis:function(a,b,c,d){c=c||"...";"undefined"==typeof d&&(d=1);a=jindo.$Element(a);b=jindo.$Element(b);var e=a.html(),f=e.length,g=b.height(),h=0;a.html("A");var j=b.height();if(g<j*(d+0.5))return a.html(e);for(g=j;g<j*(d+0.5);)h+=Math.max(Math.ceil((f-h)/2),1),a.html(e.substring(0,h)+c),g=b.height();for(;g>j*(d+0.5);)h--,a.html(e.substring(0,h)+c),g=b.height()},ellipsisByPixel:function(a,
b,c,d){b=b||"...";a=jindo.$Element(a);var e=a.width();if(!(e<c)){var f=a.html(),g=f.length,h=0;if("undefined"==typeof d){for(e=a.html("A").width();e<c;)h+=Math.max(Math.ceil((g-h)/2),1),a.html(f.substring(0,h)+b),e=a.width();d=function(){return!0}}for(h=a.html().length-b.length;e>c&&d();)h--,a.html(f.substring(0,h)+b),e=a.width()}},ellipsisElementsToDesinatedWidth:function(a,b,c,d){jindo.$A(a).forEach(function(a,f){a||jindo.$A.Continue();nhn.husky.SE2M_Utils.ellipsisByPixel(a,b,c[f],d)})},paddingZero:function(a,
b){for(var c=a.toString();c.length<b;)c="0"+c;return c},cutStringToByte:function(a,b,c){if(null===a||0===a.length)return a;a=a.replace(/  +/g," ");!c&&""!=c&&(c="...");for(var d=0,e=a.length,f=0;f<e;f++)if(d+=this.getCharByte(a.charAt(f)),d==b)if(f==e-1)break;else return a.substring(0,f)+c;else if(d>b)return a.substring(0,f)+c;return a},getCharByte:function(a){if(null===a||1>a.length)return 0;var b=0;a=escape(a);1==a.length?b++:-1!=a.indexOf("%u")?b+=2:-1!=a.indexOf("%")&&(b+=a.length/3);return b},
getFilteredHashTable:function(a,b){if(!(b instanceof Array))return arguments.callee.call(this,a,[b]);var c=jindo.$A(b);return jindo.$H(a).filter(function(a,b){return c.has(b)&&a?!0:!1}).$value()},isBlankNode:function(a){var b=this.isBlankTextNode,c=function(a){return!a||b(a)||"BR"==a.tagName||"&nbsp;"==a.innerHTML||""==a.innerHTML?!0:!1},d=function(a){if(c(a))return!0;if("P"==a.tagName){for(var d=a.childNodes.length-1;0<=d;d--){var e=a.childNodes[d];b(e)&&e.parentNode.removeChild(e)}if(1==a.childNodes.length&&
c(a.firstChild))return!0}return!1};if(d(a))return!0;for(var e=0,f=a.childNodes.length;e<f;e++)if(!d(a.childNodes[e]))return!1;return!0},isBlankTextNode:function(a){return 3==a.nodeType&&(a=a.nodeValue,a=a.replace(unescape("%uFEFF"),""),""==a)?!0:!1},findAncestorByTagName:function(a,b){for(;b&&b.tagName!=a;)b=b.parentNode;return b},loadCSS:function(a,b){var c=document,d=c.getElementsByTagName("HEAD")[0],e=c.createElement("LINK");e.setAttribute("type","text/css");e.setAttribute("rel","stylesheet");
e.setAttribute("href",a);b&&(e.onreadystatechange=function(){"complete"==e.readyState&&!e.getAttribute("_complete")&&(e.setAttribute("_complete",!0),b())});d.appendChild(e)},getUniqueId:function(a){return(a||"")+jindo.$Date().time()+(1E5*Math.random()).toFixed()},clone:function(a,b){if("undefined"!=typeof a&&a&&(a.constructor==Array||a.constructor==Object)){var c=a.constructor==Array?[]:{},d;for(d in a)c[d]="undefined"!=typeof b&&b[d]?arguments.callee(b[d]):arguments.callee(a[d]);return c}return a},
getHtmlTagAttr:function(a,b){var c=RegExp("\\s"+b+"=('([^']*)'|\"([^\"]*)\"|([^\"' >]*))","i").exec(a);if(!c)return"";(c=c[1]||c[2]||c[3])&&(c=c.replace(/[\"]/g,""));return c},iframeAlignConverter:function(a,b){var c=a.tagName.toUpperCase();if(("DIV"==c||"P"==c)&&null!==a.parentNode){var c=jindo.$Element(a),d=c.html(),e=jindo.$Element(a).attr("align")||jindo.$Element(a).css("text-align"),f=jindo.$Element(jindo.$("<div></div>",b));f.html(d).attr("align",e);c.replace(f)}},getJsonDatafromXML:function(a){var b=
{},c=/^[0-9]+(?:\.[0-9]+)?$/,d={"&amp;":"&","&nbsp;":" ","&quot;":'"',"&lt;":"<","&gt;":">"},e=["/"],f=[b],g=function(a){return"undefined"==typeof a?"":a.replace(/&[a-z]+;/g,function(a){return"string"==typeof d[a]?d[a]:a})},h=function(a){for(var b in a)if(a.hasOwnProperty(b)&&!Object.prototype[b])return!1;return!0};a=a.replace(/<(\?|\!-)[^>]*>/g,"");a.replace(/\s*<(\/?[\w:\-]+)((?:\s+[\w:\-]+\s*=\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'))*)\s*((?:\/>)|(?:><\/\1>|\s*))|\s*<!\[CDATA\[([\w\W]*?)\]\]>\s*|\s*>?([^<]*)/ig,
function(a,b,d,l,n,q){var p="";a=f.length-1;if("string"==typeof b&&b)if("/"!=b.substr(0,1)){n="string"==typeof d&&d;q="string"==typeof l&&l;var r=!n&&q?"":{};l=f[a];if("undefined"==typeof l[b])l[b]=r,l=f[a+1]=l[b];else if(l[b]instanceof Array){var s=l[b].length;l[b][s]=r;l=f[a+1]=l[b][s]}else l[b]=[l[b],r],l=f[a+1]=l[b][1];if(n){var t=l;d.replace(/([\w\:\-]+)\s*=\s*(?:"((?:\\"|[^"])*)"|'((?:\\'|[^'])*)')/g,function(a,b,c,d){t[b]=g((c?c.replace(/\\"/g,'"'):void 0)||(d?d.replace(/\\'/g,"'"):void 0))})}e[a+
1]=b;q&&(e.length--,f.length--)}else e.length--,f.length--;else"string"==typeof n&&n?p=n:"string"==typeof q&&q&&(p=g(q));if(0<p.length){b=f[a-1];d=e[a];if(!c.test(p)&&("true"==p||"false"==p))p=new Boolean(p);"undefined"!=typeof b&&(b[d]instanceof Array?(b=b[d],"object"==typeof b[b.length-1]&&!h(b[b.length-1])?(b[b.length-1].$cdata=p,b[b.length-1].toString=function(){return p}):b[b.length-1]=p):"object"==typeof b[d]&&!h(b[d])?(b[d].$cdata=p,b[d].toString=function(){return p}):b[d]=p)}});return jindo.$Json(b)}};
nhn.husky.AutoResizer=jindo.$Class({welHiddenDiv:null,welCloneDiv:null,elContainer:null,$init:function(a,b){var c="lineHeight textDecoration letterSpacing fontSize fontFamily fontStyle fontWeight textTransform textAlign direction wordSpacing fontSizeAdjust paddingTop paddingLeft paddingBottom paddingRight width".split(" "),d=c.length,e={position:"absolute",top:-9999,left:-9999,opacity:0,overflow:"hidden",wordWrap:"break-word"};this.nMinHeight=b.nMinHeight;this.wfnCallback=b.wfnCallback;this.elContainer=
a.parentNode;this.welTextArea=jindo.$Element(a);this.welHiddenDiv=jindo.$Element("<div>");this.wfnResize=jindo.$Fn(this._resize,this);this.sOverflow=this.welTextArea.css("overflow");for(this.welTextArea.css("overflow","hidden");d--;)e[c[d]]=this.welTextArea.css(c[d]);this.welHiddenDiv.css(e);this.nLastHeight=this.welTextArea.height()},bind:function(){this.welCloneDiv=jindo.$Element(this.welHiddenDiv.$value().cloneNode(!1));this.wfnResize.attach(this.welTextArea,"keyup");this.welCloneDiv.appendTo(this.elContainer);
this._resize()},unbind:function(){this.wfnResize.detach(this.welTextArea,"keyup");this.welTextArea.css("overflow",this.sOverflow);this.welCloneDiv&&this.welCloneDiv.leave()},_resize:function(){var a=this.welTextArea.$value().value,b=!1;a!==this.sContents&&(this.sContents=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\n/g,"<br>"),this.sContents+="<br>",this.welCloneDiv.html(this.sContents),a=this.welCloneDiv.height(),a<this.nMinHeight&&(a=this.nMinHeight),
this.welTextArea.css("height",a+"px"),this.elContainer.style.height=a+"px",this.nLastHeight<a&&(b=!0),this.wfnCallback(b))}});"undefined"!=typeof StringBuffer&&(StringBuffer={});StringBuffer=function(a){this._aString=[];"undefined"!=typeof a&&this.append(a)};StringBuffer.prototype.append=function(a){this._aString.push(a);return this};StringBuffer.prototype.toString=function(){return this._aString.join("")};
StringBuffer.prototype.setLength=function(a){this._aString.length="undefined"==typeof a||0>=a?0:a};
(function(){var a=null;IsInstalledFont=function(b){var c="Comic Sans MS"==b?"Courier New":"Comic Sans MS";a||(a=document.createElement("div"));a.innerHTML="mmmmiiiii"+unescape("%uD55C%uAE00");a.style.cssText='position:absolute !important; font-size:200px !important; left:-9999px !important; top:-9999px !important;font-family:"'+c+'" !important';var d=document.body||document.documentElement;d.firstChild?d.insertBefore(a,d.firstChild):document.body.appendChild(a);d=a.offsetWidth+"-"+a.offsetHeight;
a.style.cssText='position:absolute !important; font-size:200px !important; left:-9999px !important; top:-9999px !important;font-family:"'+b+'", "'+c+'" !important';b=d!=a.offsetWidth+"-"+a.offsetHeight;document.body.removeChild(a);return b}})();
nhn.husky.StringConverterManager=jindo.$Class({name:"StringConverterManager",oConverters:null,$init:function(){this.oConverters={};this.oConverters_DOM={};this.oAgent=jindo.$Agent().navigator()},$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["applyConverter",jindo.$Fn(this.applyConverter,this).bind()]);this.oApp.exec("ADD_APP_PROPERTY",["addConverter",jindo.$Fn(this.addConverter,this).bind()]);this.oApp.exec("ADD_APP_PROPERTY",["addConverter_DOM",jindo.$Fn(this.addConverter_DOM,
this).bind()])},applyConverter:function(a,b,c){var d="@"+(new Date).getTime()+"@",e=RegExp(d,"g");b={sContents:d+b};c=c||document;this.oApp.exec("MSG_STRING_CONVERTER_STARTED",[a,b]);var f;b=b.sContents;if(f=this.oConverters_DOM[a]){var g=c.createElement("DIV");g.innerHTML=b;for(c=0;c<f.length;c++)f[c](g);b=g.innerHTML;g.parentNode&&g.parentNode.removeChild(g);jindo.$Agent().navigator().ie&&(e=RegExp(d+"(\r\n)?","g"))}if(f=this.oConverters[a])for(c=0;c<f.length;c++)d=f[c](b),"undefined"!=typeof d&&
(b=d);b={sContents:b};this.oApp.exec("MSG_STRING_CONVERTER_ENDED",[a,b]);b.sContents=b.sContents.replace(e,"");return b.sContents},$ON_ADD_CONVERTER:function(a,b){var c=this.oApp.aCallerStack;b.sPluginName=c[c.length-2].name;this.addConverter(a,b)},$ON_ADD_CONVERTER_DOM:function(a,b){var c=this.oApp.aCallerStack;b.sPluginName=c[c.length-2].name;this.addConverter_DOM(a,b)},addConverter:function(a,b){this.oConverters[a]||(this.oConverters[a]=[]);this.oConverters[a][this.oConverters[a].length]=b},addConverter_DOM:function(a,
b){this.oConverters_DOM[a]||(this.oConverters_DOM[a]=[]);this.oConverters_DOM[a][this.oConverters_DOM[a].length]=b}});
nhn.husky.Utils=jindo.$Class({name:"Utils",$init:function(){var a=jindo.$Agent().navigator();if(a.ie&&6==a.version)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(b){}},$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["htBrowser",jindo.$Agent().navigator()])},$ON_ATTACH_HOVER_EVENTS:function(a,b){b=b||[];var c=b.sHoverClass||"hover",d=b.fnElmToSrc||function(a){return a},e=b.fnElmToTarget||function(a){return a};if(a)for(var f=jindo.$Fn(function(a){jindo.$Element(e(a.currentElement)).addClass(c)},
this),g=jindo.$Fn(function(a){jindo.$Element(e(a.currentElement)).removeClass(c)},this),h=0,j=a.length;h<j;h++){var k=d(a[h]);f.attach(k,"mouseover");g.attach(k,"mouseout");f.attach(k,"focus");g.attach(k,"blur")}}});
nhn.husky.SE_OuterIFrameControl=$Class({name:"SE_OuterIFrameControl",oResizeGrip:null,$init:function(a){this.aHeightChangeKeyMap=[-100,100,500,-500,-1,-10,1,10];this._assignHTMLObjects(a);this.$FnKeyDown=$Fn(this._keydown,this);this.oResizeGrip&&this.$FnKeyDown.attach(this.oResizeGrip,"keydown");jindo.$Agent().navigator().ie&&(this.$FnMouseDown=$Fn(this._mousedown,this),this.$FnMouseMove=$Fn(this._mousemove,this),this.$FnMouseMove_Parent=$Fn(this._mousemove_parent,this),this.$FnMouseUp=$Fn(this._mouseup,
this),this.oResizeGrip&&this.$FnMouseDown.attach(this.oResizeGrip,"mousedown"))},_assignHTMLObjects:function(a){a=$(a)||document;this.oResizeGrip=cssquery.getSingle(".husky_seditor_editingArea_verticalResizer",a);this.elIFrame=window.frameElement;this.welIFrame=$Element(this.elIFrame)},$ON_MSG_APP_READY:function(){this.oApp.exec("SE_FIT_IFRAME",[])},$ON_MSG_EDITING_AREA_SIZE_CHANGED:function(){this.oApp.exec("SE_FIT_IFRAME",[])},$ON_SE_FIT_IFRAME:function(){this.elIFrame.style.height=document.body.offsetHeight+
"px"},$AFTER_RESIZE_EDITING_AREA_BY:function(){this.oApp.exec("SE_FIT_IFRAME",[])},_keydown:function(a){var b=a.key();33<=b.keyCode&&40>=b.keyCode&&(this.oApp.exec("MSG_EDITING_AREA_RESIZE_STARTED",[]),this.oApp.exec("RESIZE_EDITING_AREA_BY",[0,this.aHeightChangeKeyMap[b.keyCode-33]]),this.oApp.exec("MSG_EDITING_AREA_RESIZE_ENDED",[]),a.stop())},_mousedown:function(a){this.iStartHeight=a.pos().clientY;this.iStartHeightOffset=a.pos().layerY;this.$FnMouseMove.attach(document,"mousemove");this.$FnMouseMove_Parent.attach(parent.document,
"mousemove");this.$FnMouseUp.attach(document,"mouseup");this.$FnMouseUp.attach(parent.document,"mouseup");this.iStartHeight=a.pos().clientY;this.oApp.exec("MSG_EDITING_AREA_RESIZE_STARTED",[this.$FnMouseDown,this.$FnMouseMove,this.$FnMouseUp])},_mousemove:function(a){a=a.pos().clientY-this.iStartHeight;this.oApp.exec("RESIZE_EDITING_AREA_BY",[0,a])},_mousemove_parent:function(a){a=a.pos().pageY-(this.welIFrame.offset().top+this.iStartHeight);this.oApp.exec("RESIZE_EDITING_AREA_BY",[0,a])},_mouseup:function(){this.$FnMouseMove.detach(document,
"mousemove");this.$FnMouseMove_Parent.detach(parent.document,"mousemove");this.$FnMouseUp.detach(document,"mouseup");this.$FnMouseUp.detach(parent.document,"mouseup");this.oApp.exec("MSG_EDITING_AREA_RESIZE_ENDED",[this.$FnMouseDown,this.$FnMouseMove,this.$FnMouseUp])}});
nhn.husky.SE_ToolbarToggler=$Class({name:"SE_ToolbarToggler",bUseToolbar:!0,$init:function(a,b){this._assignHTMLObjects(a,b)},_assignHTMLObjects:function(a,b){a=$(a)||document;this.toolbarArea=cssquery.getSingle(".se2_tool",a);this.toolbarArea.style.display="undefined"==typeof b||!0===b?"block":"none"},$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_HOTKEY",["ctrl+t","SE_TOGGLE_TOOLBAR",[]])},$ON_SE_TOGGLE_TOOLBAR:function(){this.toolbarArea.style.display="none"==this.toolbarArea.style.display?
"block":"none";this.oApp.exec("MSG_EDITING_AREA_SIZE_CHANGED",[])}});
nhn.husky.SE2B_CSSLoader=jindo.$Class({name:"SE2B_CSSLoader",bCssLoaded:!1,aInstantLoadTrigger:["OPEN_QE_LAYER","SHOW_ACTIVE_LAYER","SHOW_DIALOG_LAYER"],aDelayedLoadTrigger:["MSG_SE_OBJECT_EDIT_REQUESTED","OBJECT_MODIFY","MSG_SE_DUMMY_OBJECT_EDIT_REQUESTED","TOGGLE_TOOLBAR_ACTIVE_LAYER","SHOW_TOOLBAR_ACTIVE_LAYER"],$init:function(){this.htOptions=nhn.husky.SE2M_Configuration.SE2B_CSSLoader;if(jindo.$Agent().navigator().ie){for(var a=0,b=this.aInstantLoadTrigger.length;a<b;a++)this["$BEFORE_"+this.aInstantLoadTrigger[a]]=
jindo.$Fn(function(){this.loadSE2CSS()},this).bind();a=0;for(b=this.aDelayedLoadTrigger.length;a<b;a++){var c=this.aDelayedLoadTrigger[a];this["$BEFORE_"+this.aDelayedLoadTrigger[a]]=jindo.$Fn(function(a){var b=jindo.$A(arguments).$value(),b=b.splice(1,b.length-1);return this.loadSE2CSS(a,b)},this).bind(c)}}else this.loadSE2CSS()},loadSE2CSS:function(a,b){if(this.bCssLoaded)return!0;this.bCssLoaded=!0;var c=null;a&&(c=jindo.$Fn(this.oApp.exec,this.oApp).bind(a,b));nhn.husky.SE2M_Utils.loadCSS(this.htOptions.sCSSBaseURI+
"/wysiwyg.item.css",c);return!1}});
nhn.husky.SE2B_Customize_ToolBar=jindo.$Class({name:"SE2B_Customize_ToolBar",$init:function(a){this._assignHTMLElements(a)},$BEFORE_MSG_APP_READY:function(){this._addEventMoreButton()},_assignHTMLElements:function(a){this.oAppContainer=a;this.elTextToolBarArea=jindo.$$.getSingle("div.se2_tool");this.elTextMoreButton=jindo.$$.getSingle("button.se2_text_tool_more",this.elTextToolBarArea);this.elTextMoreButtonParent=this.elTextMoreButton.parentNode;this.welTextMoreButtonParent=jindo.$Element(this.elTextMoreButtonParent);
this.elMoreLayer=jindo.$$.getSingle("div.se2_sub_text_tool")},_addEventMoreButton:function(){this.oApp.registerBrowserEvent(this.elTextMoreButton,"click","EVENT_CLICK_EXPAND_VIEW");this.oApp.registerBrowserEvent(this.elMoreLayer,"click","EVENT_CLICK_EXPAND_VIEW")},$ON_EVENT_CLICK_EXPAND_VIEW:function(a){this.oApp.exec("TOGGLE_EXPAND_VIEW",[this.elTextMoreButton]);a.stop()},$ON_TOGGLE_EXPAND_VIEW:function(){this.welTextMoreButtonParent.hasClass("active")?this.oApp.exec("HIDE_EXPAND_VIEW"):this.oApp.exec("SHOW_EXPAND_VIEW")},
$ON_CHANGE_EDITING_MODE:function(a){"WYSIWYG"!=a?(this.elTextMoreButton.disabled=!0,this.welTextMoreButtonParent.removeClass("active"),this.oApp.exec("HIDE_EXPAND_VIEW")):this.elTextMoreButton.disabled=!1},$AFTER_SHOW_ACTIVE_LAYER:function(){this.oApp.exec("HIDE_EXPAND_VIEW")},$AFTER_SHOW_DIALOG_LAYER:function(){this.oApp.exec("HIDE_EXPAND_VIEW")},$ON_SHOW_EXPAND_VIEW:function(){this.welTextMoreButtonParent.addClass("active");this.elMoreLayer.style.display="block"},$ON_HIDE_EXPAND_VIEW:function(){this.welTextMoreButtonParent.removeClass("active");
this.elMoreLayer.style.display="none"},$ON_RESET_TOOLBAR:function(){"WYSIWYG"===this.oApp.getEditingMode()&&(this.oApp.exec("END_SPELLCHECK"),this.oApp.exec("DISABLE_ALL_UI"),this.oApp.exec("ENABLE_ALL_UI"),this.oApp.exec("RESET_STYLE_STATUS"),this.oApp.exec("CHECK_STYLE_CHANGE"),this.oApp.exec("APPLY_FONTCOLOR",["#000000"]),this.oApp.exec("HIDE_EXPAND_VIEW"))}});"undefined"==typeof window.nhn&&(window.nhn={});
var oMessageMap={"SE_EditingAreaManager.onExit":"\ub0b4\uc6a9\uc774 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","SE_Color.invalidColorCode":"\uc0c9\uc0c1 \ucf54\ub4dc\ub97c \uc62c\ubc14\ub974\uac8c \uc785\ub825\ud574 \uc8fc\uc138\uc694. \n\n \uc608) #000000, #FF0000, #FFFFFF, #ffffff, ffffff","SE_Hyperlink.invalidURL":"\uc785\ub825\ud558\uc2e0 URL\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.","SE_FindReplace.keywordMissing":"\ucc3e\uc73c\uc2e4 \ub2e8\uc5b4\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694.",
"SE_FindReplace.keywordNotFound":"\ucc3e\uc73c\uc2e4 \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.","SE_FindReplace.replaceAllResultP1":"\uc77c\uce58\ud558\ub294 \ub0b4\uc6a9\uc774 \ucd1d ","SE_FindReplace.replaceAllResultP2":"\uac74 \ubc14\ub00c\uc5c8\uc2b5\ub2c8\ub2e4.","SE_FindReplace.notSupportedBrowser":"\ud604\uc7ac \uc0ac\uc6a9\ud558\uace0 \uacc4\uc2e0 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c\ub294 \uc0ac\uc6a9\ud558\uc2e4\uc218 \uc5c6\ub294 \uae30\ub2a5\uc785\ub2c8\ub2e4.\n\n\uc774\uc6a9\uc5d0 \ubd88\ud3b8\uc744 \ub4dc\ub824 \uc8c4\uc1a1\ud569\ub2c8\ub2e4.",
"SE_FindReplace.replaceKeywordNotFound":"\ubc14\ub014 \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4","SE_LineHeight.invalidLineHeight":"\uc798\ubabb\ub41c \uac12\uc785\ub2c8\ub2e4.","SE_Footnote.defaultText":"\uac01\uc8fc\ub0b4\uc6a9\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694","SE.failedToLoadFlash":"\ud50c\ub798\uc2dc\uac00 \ucc28\ub2e8\ub418\uc5b4 \uc788\uc5b4 \ud574\ub2f9 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","SE2M_EditingModeChanger.confirmTextMode":"\ud14d\uc2a4\ud2b8 \ubaa8\ub4dc\ub85c \uc804\ud658\ud558\uba74 \uc791\uc131\ub41c \ub0b4\uc6a9\uc740 \uc720\uc9c0\ub418\ub098, \n\n\uae00\uaf34 \ub4f1\uc758 \ud3b8\uc9d1\ud6a8\uacfc\uc640 \uc774\ubbf8\uc9c0 \ub4f1\uc758 \ucca8\ubd80\ub0b4\uc6a9\uc774 \ubaa8\ub450 \uc0ac\ub77c\uc9c0\uac8c \ub429\ub2c8\ub2e4.\n\n\uc804\ud658\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",
"SE2M_FontNameWithLayerUI.sSampleText":"\uac00\ub098\ub2e4\ub77c"};